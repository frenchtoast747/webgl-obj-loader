(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("OBJ", [], factory);
	else if(typeof exports === 'object')
		exports["OBJ"] = factory();
	else
		root["OBJ"] = factory();
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}} /**
                                                                                                                                                                                                                                  * A class to represent the memory layout for a vertex attribute array. Used by
                                                                                                                                                                                                                                  * {@link Mesh}'s TBD(...) method to generate a packed array from mesh data.
                                                                                                                                                                                                                                  * <p>
                                                                                                                                                                                                                                  * Layout can sort of be thought of as a C-style struct declaration.
                                                                                                                                                                                                                                  * {@link Mesh}'s TBD(...) method will use the {@link Layout} instance to
                                                                                                                                                                                                                                  * pack an array in the given attribute order.
                                                                                                                                                                                                                                  * <p>
                                                                                                                                                                                                                                  * Layout also is very helpful when calling a WebGL context's
                                                                                                                                                                                                                                  * <code>vertexAttribPointer</code> method. If you've created a buffer using
                                                                                                                                                                                                                                  * a Layout instance, then the same Layout instance can be used to determine
                                                                                                                                                                                                                                  * the size, type, normalized, stride, and offset parameters for
                                                                                                                                                                                                                                  * <code>vertexAttribPointer</code>.
                                                                                                                                                                                                                                  * <p>
                                                                                                                                                                                                                                  * For example:
                                                                                                                                                                                                                                  * <pre><code>
                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                  * const index = glctx.getAttribLocation(shaderProgram, "pos");
                                                                                                                                                                                                                                  * glctx.vertexAttribPointer(
                                                                                                                                                                                                                                  *   layout.position.size,
                                                                                                                                                                                                                                  *   glctx[layout.position.type],
                                                                                                                                                                                                                                  *   layout.position.normalized,
                                                                                                                                                                                                                                  *   layout.position.stride,
                                                                                                                                                                                                                                  *   layout.position.offset);
                                                                                                                                                                                                                                  * </code></pre>
                                                                                                                                                                                                                                  * @see {@link Mesh}
                                                                                                                                                                                                                                  */var
Layout =
/**
          * Create a Layout object. This constructor will throw if any duplicate
          * attributes are given.
          * @param {Array} ...attributes - An ordered list of attributes that
          *        describe the desired memory layout for each vertex attribute.
          *        <p>
          *
          * @see {@link Mesh}
          */exports.Layout =
function Layout() {_classCallCheck(this, Layout);for (var _len = arguments.length, attributes = Array(_len), _key = 0; _key < _len; _key++) {attributes[_key] = arguments[_key];}
    this.attributes = attributes;
    var offset = 0;
    var maxStrideMultiple = 0;var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {
        for (var _iterator = attributes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var attribute = _step.value;
            if (this[attribute.key]) {
                throw new DuplicateAttributeException(attribute);
            }
            // Add padding to satisfy WebGL's requirement that all
            // vertexAttribPointer calls have an offset that is a multiple of
            // the type size.
            if (offset % attribute.sizeOfType !== 0) {
                offset += attribute.sizeOfType - offset % attribute.sizeOfType;
                console.warn('Layout requires padding before ' + attribute.key + ' attribute');
            }
            this[attribute.key] = {
                'attribute': attribute,
                'size': attribute.size,
                'type': attribute.type,
                'normalized': attribute.normalized,
                'offset': offset };

            offset += attribute.sizeInBytes;
            maxStrideMultiple = Math.max(
            maxStrideMultiple,
            attribute.sizeOfType);
        }
        // Add padding to the end to satisfy WebGL's requirement that all
        // vertexAttribPointer calls have a stride that is a multiple of the
        // type size. Because we're putting differently sized attributes into
        // the same buffer, it must be padded to a multiple of the largest
        // type size.
    } catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}if (offset % maxStrideMultiple !== 0) {
        offset += maxStrideMultiple - offset % maxStrideMultiple;
        console.warn('Layout requires padding at the back');
    }
    this.stride = offset;var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {
        for (var _iterator2 = attributes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var _attribute = _step2.value;
            this[_attribute.key].stride = this.stride;
        }} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2.return) {_iterator2.return();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}
};



/**
    * An exception for when two or more of the same attributes are found in the
    * same layout.
    * @private
    */var
DuplicateAttributeException =
/**
                               * Create a DuplicateAttributeException
                               * @param {Attribute} attribute - The attribute that was found more than
                               *        once in the {@link Layout}
                               */
function DuplicateAttributeException(attribute) {_classCallCheck(this, DuplicateAttributeException);
    this.message = 'found duplicate attribute: ' + attribute.key;
};


/**
    * Represents how a vertex attribute should be packed into an buffer.
    * @private
    */var
Attribute =
/**
             * Create an attribute. Do not call this directly, use the predefined
             * constants.
             * @param {string} key - The name of this attribute as if it were a key in
             *        an Object. Use the camel case version of the upper snake case
             *        const name.
             * @param {number} size - The number of components per vertex attribute.
             *        Must be 1, 2, 3, or 4.
             * @param {string} type - The data type of each component for this
             *        attribute. Possible values:<br/>
             *        "BYTE": signed 8-bit integer, with values in [-128, 127]<br/>
             *        "SHORT": signed 16-bit integer, with values in
             *            [-32768, 32767]<br/>
             *        "UNSIGNED_BYTE": unsigned 8-bit integer, with values in
             *            [0, 255]<br/>
             *        "UNSIGNED_SHORT": unsigned 16-bit integer, with values in
             *            [0, 65535]<br/>
             *        "FLOAT": 32-bit floating point number
             * @param {boolean} normalized - Whether integer data values should be
             *        normalized when being casted to a float.<br/>
             *        If true, signed integers are normalized to [-1, 1].<br/>
             *        If true, unsigned integers are normalized to [0, 1].<br/>
             *        For type "FLOAT", this parameter has no effect.
             */
function Attribute(key, size, type) {var normalized = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;_classCallCheck(this, Attribute);
    this.key = key;
    this.size = size;
    this.type = type;
    this.normalized = false;
    this.sizeOfType = sizeInBytesOfType(type);
    this.sizeInBytes = this.sizeOfType * size;
};


/**
    * @param {string} type - A type accepted by {@link Attribute}.
    * @return The size (in bytes) for a given type.
    * @see {@link Attribute}
    * @private
    */
function sizeInBytesOfType(type) {
    switch (type) {
        case 'BYTE':
        case 'UNSIGNED_BYTE':
            return 1;
        case 'SHORT':
        case 'UNSIGNED_SHORT':
            return 2;
        case 'FLOAT':
            return 4;}

}

// Geometry attributes
/**
 * Attribute layout to pack a vertex's x, y, & z as floats
 *
 * @see {@link Layout}
 */
Layout.POSITION = new Attribute('position', 3, 'FLOAT');

/**
                                                          * Attribute layout to pack a vertex's normal's x, y, & z as floats
                                                          *
                                                          * @see {@link Layout}
                                                          */
Layout.NORMAL = new Attribute('normal', 3, 'FLOAT');

/**
                                                      * Attribute layout to pack a vertex's normal's x, y, & z as floats.
                                                      * <p>
                                                      * This value will be computed on-the-fly based on the texture coordinates.
                                                      * If no texture coordinates are available, the generated value will default to
                                                      * 0, 0, 0.
                                                      *
                                                      * @see {@link Layout}
                                                      */
Layout.TANGENT = new Attribute('tangent', 3, 'FLOAT');

/**
                                                        * Attribute layout to pack a vertex's normal's bitangent x, y, & z as floats.
                                                        * <p>
                                                        * This value will be computed on-the-fly based on the texture coordinates.
                                                        * If no texture coordinates are available, the generated value will default to
                                                        * 0, 0, 0.
                                                        * @see {@link Layout}
                                                        */
Layout.BITANGENT = new Attribute('bitangent', 3, 'FLOAT');

/**
                                                            * Attribute layout to pack a vertex's texture coordinates' u & v as floats
                                                            *
                                                            * @see {@link Layout}
                                                            */
Layout.UV = new Attribute('uv', 2, 'FLOAT');

// Material attributes

/**
 * Attribute layout to pack an unsigned short to be interpreted as a the index
 * into a {@link Mesh}'s materials list.
 * <p>
 * The intention of this value is to send all of the {@link Mesh}'s materials
 * into multiple shader uniforms and then reference the current one by this
 * vertex attribute.
 * <p>
 * example glsl code:
 *
 * <pre><code>
 *  // this is bound using MATERIAL_INDEX
 *  attribute int materialIndex;
 *
 *  struct Material {
 *    vec3 diffuse;
 *    vec3 specular;
 *    vec3 specularExponent;
 *  };
 *
 *  uniform Material materials[MAX_MATERIALS];
 *
 *  // ...
 *
 *  vec3 diffuse = materials[materialIndex];
 *
 * </code></pre>
 * TODO: More description & test to make sure subscripting by attributes even
 * works for webgl
 *
 * @see {@link Layout}
 */
Layout.MATERIAL_INDEX = new Attribute('materialIndex', 1, 'SHORT');
Layout.MATERIAL_ENABLED = new Attribute('materialEnabled', 1, 'UNSIGNED_SHORT');
Layout.AMBIENT = new Attribute('ambient', 3, 'FLOAT');
Layout.DIFFUSE = new Attribute('diffuse', 3, 'FLOAT');
Layout.SPECULAR = new Attribute('specular', 3, 'FLOAT');
Layout.SPECULAR_EXPONENT = new Attribute('specularExponent', 3, 'FLOAT');
Layout.EMISSIVE = new Attribute('emissive', 3, 'FLOAT');
Layout.TRANSMISSION_FILTER = new Attribute('transmissionFilter', 3, 'FLOAT');
Layout.DISSOLVE = new Attribute('dissolve', 1, 'FLOAT');
Layout.ILLUMINATION = new Attribute('illumination', 1, 'UNSIGNED_SHORT');
Layout.REFRACTION_INDEX = new Attribute('refractionIndex', 1, 'FLOAT');
Layout.SHARPNESS = new Attribute('sharpness', 1, 'FLOAT');
Layout.MAP_DIFFUSE = new Attribute('mapDiffuse', 1, 'SHORT');
Layout.MAP_AMBIENT = new Attribute('mapAmbient', 1, 'SHORT');
Layout.MAP_SPECULAR = new Attribute('mapSpecular', 1, 'SHORT');
Layout.MAP_SPECULAR_EXPONENT = new Attribute('mapSpecularExponent', 1, 'SHORT');
Layout.MAP_DISSOLVE = new Attribute('mapDissolve', 1, 'SHORT');
Layout.ANTI_ALIASING = new Attribute('antiAliasing', 1, 'UNSIGNED_SHORT');
Layout.MAP_BUMP = new Attribute('mapBump', 1, 'SHORT');
Layout.MAP_DISPLACEMENT = new Attribute('mapDisplacement', 1, 'SHORT');
Layout.MAP_DECAL = new Attribute('mapDecal', 1, 'SHORT');
Layout.MAP_EMISSIVE = new Attribute('mapEmissive', 1, 'SHORT');

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();var _layout = __webpack_require__(0);function _toConsumableArray(arr) {if (Array.isArray(arr)) {for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {arr2[i] = arr[i];}return arr2;} else {return Array.from(arr);}}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * The main Mesh class. The constructor will parse through the OBJ file data
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * and collect the vertex, vertex normal, texture, and face information. This
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * information can then be used later on when creating your VBOs. See
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * OBJ.initMeshBuffers for an example of how to use the newly created Mesh
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   */var
Mesh = function () {
    /**
                     * Create a Mesh
                     * @param {String} objectData - a string representation of an OBJ file with
                     *     newlines preserved.
                     * @param {Object} options - a JS object containing valid options. See class
                     *     documentation for options.
                     * @param {bool} options.enableWTextureCoord - Texture coordinates can have
                     *     an optional "w" coordinate after the u and v coordinates. This extra
                     *     value can be used in order to perform fancy transformations on the
                     *     textures themselves. Default is to truncate to only the u an v
                     *     coordinates. Passing true will provide a default value of 0 in the
                     *     event that any or all texture coordinates don't provide a w value.
                     *     Always use the textureStride attribute in order to determine the
                     *     stride length of the texture coordinates when rendering the element
                     *     array.
                     * @param {bool} options.calcTangentsAndBitangents - Calculate the tangents
                     *     and bitangents when loading of the OBJ is completed. This adds two new
                     *     attributes to the Mesh instance: `tangents` and `bitangents`.
                     */
    function Mesh(objectData, options) {_classCallCheck(this, Mesh);
        options = options || {};
        options.materials = options.materials || {};
        options.enableWTextureCoord = !!options.enableWTextureCoord;
        options.indicesPerMaterial = !!options.indicesPerMaterial;

        var self = this;
        // the list of unique vertex, normal, texture, attributes
        self.vertices = [];
        self.vertexNormals = [];
        self.textures = [];
        // the indicies to draw the faces
        self.indices = [];
        self.textureStride = options.enableWTextureCoord ? 3 : 2;

        /*
                                                                  The OBJ file format does a sort of compression when saving a model in a
                                                                  program like Blender. There are at least 3 sections (4 including textures)
                                                                  within the file. Each line in a section begins with the same string:
                                                                    * 'v': indicates vertex section
                                                                    * 'vn': indicates vertex normal section
                                                                    * 'f': indicates the faces section
                                                                    * 'vt': indicates vertex texture section (if textures were used on the model)
                                                                  Each of the above sections (except for the faces section) is a list/set of
                                                                  unique vertices.
                                                                   Each line of the faces section contains a list of
                                                                  (vertex, [texture], normal) groups.
                                                                   **Note:** The following documentation will use a capital "V" Vertex to
                                                                  denote the above (vertex, [texture], normal) groups whereas a lowercase
                                                                  "v" vertex is used to denote an X, Y, Z coordinate.
                                                                   Some examples:
                                                                      // the texture index is optional, both formats are possible for models
                                                                      // without a texture applied
                                                                      f 1/25 18/46 12/31
                                                                      f 1//25 18//46 12//31
                                                                       // A 3 vertex face with texture indices
                                                                      f 16/92/11 14/101/22 1/69/1
                                                                       // A 4 vertex face
                                                                      f 16/92/11 40/109/40 38/114/38 14/101/22
                                                                   The first two lines are examples of a 3 vertex face without a texture applied.
                                                                  The second is an example of a 3 vertex face with a texture applied.
                                                                  The third is an example of a 4 vertex face. Note: a face can contain N
                                                                  number of vertices.
                                                                   Each number that appears in one of the groups is a 1-based index
                                                                  corresponding to an item from the other sections (meaning that indexing
                                                                  starts at one and *not* zero).
                                                                   For example:
                                                                      `f 16/92/11` is saying to
                                                                        - take the 16th element from the [v] vertex array
                                                                        - take the 92nd element from the [vt] texture array
                                                                        - take the 11th element from the [vn] normal array
                                                                      and together they make a unique vertex.
                                                                  Using all 3+ unique Vertices from the face line will produce a polygon.
                                                                   Now, you could just go through the OBJ file and create a new vertex for
                                                                  each face line and WebGL will draw what appears to be the same model.
                                                                  However, vertices will be overlapped and duplicated all over the place.
                                                                   Consider a cube in 3D space centered about the origin and each side is
                                                                  2 units long. The front face (with the positive Z-axis pointing towards
                                                                  you) would have a Top Right vertex (looking orthogonal to its normal)
                                                                  mapped at (1,1,1) The right face would have a Top Left vertex (looking
                                                                  orthogonal to its normal) at (1,1,1) and the top face would have a Bottom
                                                                  Right vertex (looking orthogonal to its normal) at (1,1,1). Each face
                                                                  has a vertex at the same coordinates, however, three distinct vertices
                                                                  will be drawn at the same spot.
                                                                   To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`
                                                                  groups), while iterating through the face lines, when a group is encountered
                                                                  the whole group string ('16/92/11') is checked to see if it exists in the
                                                                  packed.hashindices object, and if it doesn't, the indices it specifies
                                                                  are used to look up each attribute in the corresponding attribute arrays
                                                                  already created. The values are then copied to the corresponding unpacked
                                                                  array (flattened to play nice with WebGL's ELEMENT_ARRAY_BUFFER indexing),
                                                                  the group string is added to the hashindices set and the current unpacked
                                                                  index is used as this hashindices value so that the group of elements can
                                                                  be reused. The unpacked index is incremented. If the group string already
                                                                  exists in the hashindices object, its corresponding value is the index of
                                                                  that group and is appended to the unpacked indices array.
                                                                  */











        this.name = '';
        var verts = [];
        var vertNormals = [];
        var textures = [];
        var unpacked = {};
        var materialNamesByIndex = [];
        var materialIndicesByName = {};
        // keep track of what material we've seen last
        var currentMaterialIndex = -1;
        // keep track if pushing indices by materials - otherwise not used
        var currentObjectByMaterialIndex = 0;
        // unpacking stuff
        unpacked.verts = [];
        unpacked.norms = [];
        unpacked.textures = [];
        unpacked.hashindices = {};
        unpacked.indices = [[]];
        unpacked.materialIndices = [];
        unpacked.index = 0;

        var VERTEX_RE = /^v\s/;
        var NORMAL_RE = /^vn\s/;
        var TEXTURE_RE = /^vt\s/;
        var FACE_RE = /^f\s/;
        var WHITESPACE_RE = /\s+/;
        var USE_MATERIAL_RE = /^usemtl/;

        // array of lines separated by the newline
        var lines = objectData.split('\n');

        for (var i = 0; i < lines.length; i++) {
            var line = lines[i].trim();
            if (!line || line.startsWith('#')) {
                continue;
            }
            var elements = line.split(WHITESPACE_RE);
            elements.shift();

            if (VERTEX_RE.test(line)) {
                // if this is a vertex
                verts.push.apply(verts, _toConsumableArray(elements));
            } else if (NORMAL_RE.test(line)) {
                // if this is a vertex normal
                vertNormals.push.apply(vertNormals, _toConsumableArray(elements));
            } else if (TEXTURE_RE.test(line)) {
                var coords = elements;
                // by default, the loader will only look at the U and V
                // coordinates of the vt declaration. So, this truncates the
                // elements to only those 2 values. If W texture coordinate
                // support is enabled, then the texture coordinate is
                // expected to have three values in it.
                if (elements.length > 2 && !options.enableWTextureCoord) {
                    coords = elements.slice(0, 1);
                }
                // If for some reason W texture coordinate support is enabled
                // and only the U and V coordinates are given, then we supply
                // the default value of 0 so that the stride length is correct
                // when the textures are unpacked below.
                else if (elements.length === 2 && options.enableWTextureCoord) {
                        coords.push(0);
                    }
                textures.push.apply(textures, _toConsumableArray(coords));
            } else if (USE_MATERIAL_RE.test(line)) {
                var materialName = elements[0];

                // check to see if we've ever seen it before
                if (!(materialName in materialIndicesByName)) {
                    // new material we've never seen
                    materialNamesByIndex.push(materialName);
                    materialIndicesByName[materialName] = materialNamesByIndex.length - 1;
                    // push new array into indices
                    if (options.indicesPerMaterial) {
                        // already contains an array at index zero, don't add
                        if (materialIndicesByName[materialName] > 0) {
                            unpacked.indices.push([]);
                        }
                    }
                }
                // keep track of the current material index
                currentMaterialIndex = materialIndicesByName[materialName];
                // update current index array
                if (options.indicesPerMaterial) {
                    currentObjectByMaterialIndex = currentMaterialIndex;
                }
            } else if (FACE_RE.test(line)) {
                // if this is a face
                /*
                split this face into an array of Vertex groups
                for example:
                   f 16/92/11 14/101/22 1/69/1
                becomes:
                  ['16/92/11', '14/101/22', '1/69/1'];
                */
                var quad = false;
                for (var j = 0, eleLen = elements.length; j < eleLen; j++) {
                    // Triangulating quads
                    // quad: 'f v0/t0/vn0 v1/t1/vn1 v2/t2/vn2 v3/t3/vn3/'
                    // corresponding triangles:
                    //      'f v0/t0/vn0 v1/t1/vn1 v2/t2/vn2'
                    //      'f v2/t2/vn2 v3/t3/vn3 v0/t0/vn0'
                    if (j === 3 && !quad) {
                        // add v2/t2/vn2 in again before continuing to 3
                        j = 2;
                        quad = true;
                    }
                    var hash0 = elements[0] + ',' + currentMaterialIndex;
                    var hash = elements[j] + ',' + currentMaterialIndex;
                    if (hash in unpacked.hashindices) {
                        unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);
                    } else {
                        /*
                            Each element of the face line array is a Vertex which has its
                            attributes delimited by a forward slash. This will separate
                            each attribute into another array:
                                '19/92/11'
                            becomes:
                                Vertex = ['19', '92', '11'];
                            where
                                Vertex[0] is the vertex index
                                Vertex[1] is the texture index
                                Vertex[2] is the normal index
                             Think of faces having Vertices which are comprised of the
                             attributes location (v), texture (vt), and normal (vn).
                             */
                        var vertex = elements[j].split('/');
                        // it's possible for faces to only specify the vertex
                        // and the normal. In this case, vertex will only have
                        // a length of 2 and not 3 and the normal will be the
                        // second item in the list with an index of 1.
                        var normalIndex = vertex.length - 1;
                        /*
                                                              The verts, textures, and vertNormals arrays each contain a
                                                              flattend array of coordinates.
                                                               Because it gets confusing by referring to Vertex and then
                                                              vertex (both are different in my descriptions) I will explain
                                                              what's going on using the vertexNormals array:
                                                               vertex[2] will contain the one-based index of the vertexNormals
                                                              section (vn). One is subtracted from this index number to play
                                                              nice with javascript's zero-based array indexing.
                                                               Because vertexNormal is a flattened array of x, y, z values,
                                                              simple pointer arithmetic is used to skip to the start of the
                                                              vertexNormal, then the offset is added to get the correct
                                                              component: +0 is x, +1 is y, +2 is z.
                                                               This same process is repeated for verts and textures.
                                                              */




                        // Vertex position
                        unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 0]);
                        unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 1]);
                        unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 2]);
                        // Vertex textures
                        if (textures.length) {
                            var stride = options.enableWTextureCoord ? 3 : 2;
                            unpacked.textures.push(+textures[(vertex[1] - 1) * stride + 0]);
                            unpacked.textures.push(+textures[(vertex[1] - 1) * stride + 1]);
                            if (options.enableWTextureCoord) {
                                unpacked.textures.push(+textures[(vertex[1] - 1) * stride + 2]);
                            }
                        }
                        // Vertex normals
                        unpacked.norms.push(+vertNormals[(vertex[normalIndex] - 1) * 3 + 0]);
                        unpacked.norms.push(+vertNormals[(vertex[normalIndex] - 1) * 3 + 1]);
                        unpacked.norms.push(+vertNormals[(vertex[normalIndex] - 1) * 3 + 2]);
                        // Vertex material indices
                        unpacked.materialIndices.push(currentMaterialIndex);
                        // add the newly created Vertex to the list of indices
                        unpacked.hashindices[hash] = unpacked.index;
                        unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);
                        // increment the counter
                        unpacked.index += 1;
                    }
                    if (j === 3 && quad) {
                        // add v0/t0/vn0 onto the second triangle
                        unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash0]);
                    }
                }
            }
        }
        self.vertices = unpacked.verts;
        self.vertexNormals = unpacked.norms;
        self.textures = unpacked.textures;
        self.vertexMaterialIndices = unpacked.materialIndices;
        self.indices = options.indicesPerMaterial ? unpacked.indices : unpacked.indices[currentObjectByMaterialIndex];

        self.materialNames = materialNamesByIndex;
        self.materialIndices = materialIndicesByName;
        self.materialsByIndex = {};

        if (options.calcTangentsAndBitangents) {
            this.calculateTangentsAndBitangents();
        }
    }

    /**
       * Calculates the tangents and bitangents of the mesh that forms an orthogonal basis together with the
       * normal in the direction of the texture coordinates. These are useful for setting up the TBN matrix
       * when distorting the normals through normal maps.
       * Method derived from: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/
       * 
       * This method requires the normals and texture coordinates to be parsed and set up correctly.
       * Adds the tangents and bitangents as members of the class instance.
       */_createClass(Mesh, [{ key: 'calculateTangentsAndBitangents', value: function calculateTangentsAndBitangents()
        {
            console.assert(this.vertices && this.vertices.length &&
            this.vertexNormals && this.vertexNormals.length &&
            this.textures && this.textures.length, "Missing attributes for calculating tangents and bitangents");

            var unpacked = {};
            unpacked.tangents = [].concat(_toConsumableArray(new Array(this.vertices.length))).map(function (v) {return 0;});
            unpacked.bitangents = [].concat(_toConsumableArray(new Array(this.vertices.length))).map(function (v) {return 0;});

            // Loop through all faces in the whole mesh
            var indices = void 0;
            // If sorted by material
            if (Array.isArray(this.indices[0])) {
                indices = [].concat.apply([], this.indices);
            } else {
                indices = this.indices;
            }

            var vertices = this.vertices;
            var normals = this.vertexNormals;
            var uvs = this.textures;

            for (var i = 0; i < indices.length; i += 3) {
                var i0 = indices[i + 0];
                var i1 = indices[i + 1];
                var i2 = indices[i + 2];

                var x_v0 = vertices[i0 * 3 + 0];
                var y_v0 = vertices[i0 * 3 + 1];
                var z_v0 = vertices[i0 * 3 + 2];

                var x_uv0 = uvs[i0 * 2 + 0];
                var y_uv0 = uvs[i0 * 2 + 1];

                var x_v1 = vertices[i1 * 3 + 0];
                var y_v1 = vertices[i1 * 3 + 1];
                var z_v1 = vertices[i1 * 3 + 2];

                var x_uv1 = uvs[i1 * 2 + 0];
                var y_uv1 = uvs[i1 * 2 + 1];

                var x_v2 = vertices[i2 * 3 + 0];
                var y_v2 = vertices[i2 * 3 + 1];
                var z_v2 = vertices[i2 * 3 + 2];

                var x_uv2 = uvs[i2 * 2 + 0];
                var y_uv2 = uvs[i2 * 2 + 1];

                var x_deltaPos1 = x_v1 - x_v0;
                var y_deltaPos1 = y_v1 - y_v0;
                var z_deltaPos1 = z_v1 - z_v0;

                var x_deltaPos2 = x_v2 - x_v0;
                var y_deltaPos2 = y_v2 - y_v0;
                var z_deltaPos2 = z_v2 - z_v0;

                var x_uvDeltaPos1 = x_uv1 - x_uv0;
                var y_uvDeltaPos1 = y_uv1 - y_uv0;

                var x_uvDeltaPos2 = x_uv2 - x_uv0;
                var y_uvDeltaPos2 = y_uv2 - y_uv0;

                var rInv = x_uvDeltaPos1 * y_uvDeltaPos2 - y_uvDeltaPos1 * x_uvDeltaPos2;
                var r = 1.0 / (Math.abs(rInv < 0.0001) ? 1.0 : rInv);

                // Tangent
                var x_tangent = (x_deltaPos1 * y_uvDeltaPos2 - x_deltaPos2 * y_uvDeltaPos1) * r;
                var y_tangent = (y_deltaPos1 * y_uvDeltaPos2 - y_deltaPos2 * y_uvDeltaPos1) * r;
                var z_tangent = (z_deltaPos1 * y_uvDeltaPos2 - z_deltaPos2 * y_uvDeltaPos1) * r;

                // Bitangent
                var x_bitangent = (x_deltaPos2 * x_uvDeltaPos1 - x_deltaPos1 * x_uvDeltaPos2) * r;
                var y_bitangent = (y_deltaPos2 * x_uvDeltaPos1 - y_deltaPos1 * x_uvDeltaPos2) * r;
                var z_bitangent = (z_deltaPos2 * x_uvDeltaPos1 - z_deltaPos1 * x_uvDeltaPos2) * r;

                // Gram-Schmidt orthogonalize
                //t = glm::normalize(t - n * glm:: dot(n, t));
                var x_n0 = normals[i0 * 3 + 0];
                var y_n0 = normals[i0 * 3 + 1];
                var z_n0 = normals[i0 * 3 + 2];

                var x_n1 = normals[i1 * 3 + 0];
                var y_n1 = normals[i1 * 3 + 1];
                var z_n1 = normals[i1 * 3 + 2];

                var x_n2 = normals[i2 * 3 + 0];
                var y_n2 = normals[i2 * 3 + 1];
                var z_n2 = normals[i2 * 3 + 2];

                // Tangent
                var n0_dot_t = x_tangent * x_n0 + y_tangent * y_n0 + z_tangent * z_n0;
                var n1_dot_t = x_tangent * x_n1 + y_tangent * y_n1 + z_tangent * z_n1;
                var n2_dot_t = x_tangent * x_n2 + y_tangent * y_n2 + z_tangent * z_n2;

                var x_resTangent0 = x_tangent - x_n0 * n0_dot_t;
                var y_resTangent0 = y_tangent - y_n0 * n0_dot_t;
                var z_resTangent0 = z_tangent - z_n0 * n0_dot_t;

                var x_resTangent1 = x_tangent - x_n1 * n1_dot_t;
                var y_resTangent1 = y_tangent - y_n1 * n1_dot_t;
                var z_resTangent1 = z_tangent - z_n1 * n1_dot_t;

                var x_resTangent2 = x_tangent - x_n2 * n2_dot_t;
                var y_resTangent2 = y_tangent - y_n2 * n2_dot_t;
                var z_resTangent2 = z_tangent - z_n2 * n2_dot_t;

                var magTangent0 = Math.sqrt(x_resTangent0 * x_resTangent0 + y_resTangent0 * y_resTangent0 + z_resTangent0 * z_resTangent0);
                var magTangent1 = Math.sqrt(x_resTangent1 * x_resTangent1 + y_resTangent1 * y_resTangent1 + z_resTangent1 * z_resTangent1);
                var magTangent2 = Math.sqrt(x_resTangent2 * x_resTangent2 + y_resTangent2 * y_resTangent2 + z_resTangent2 * z_resTangent2);

                // Bitangent
                var n0_dot_bt = x_bitangent * x_n0 + y_bitangent * y_n0 + z_bitangent * z_n0;
                var n1_dot_bt = x_bitangent * x_n1 + y_bitangent * y_n1 + z_bitangent * z_n1;
                var n2_dot_bt = x_bitangent * x_n2 + y_bitangent * y_n2 + z_bitangent * z_n2;

                var x_resBitangent0 = x_bitangent - x_n0 * n0_dot_bt;
                var y_resBitangent0 = y_bitangent - y_n0 * n0_dot_bt;
                var z_resBitangent0 = z_bitangent - z_n0 * n0_dot_bt;

                var x_resBitangent1 = x_bitangent - x_n1 * n1_dot_bt;
                var y_resBitangent1 = y_bitangent - y_n1 * n1_dot_bt;
                var z_resBitangent1 = z_bitangent - z_n1 * n1_dot_bt;

                var x_resBitangent2 = x_bitangent - x_n2 * n2_dot_bt;
                var y_resBitangent2 = y_bitangent - y_n2 * n2_dot_bt;
                var z_resBitangent2 = z_bitangent - z_n2 * n2_dot_bt;

                var magBitangent0 = Math.sqrt(x_resBitangent0 * x_resBitangent0 + y_resBitangent0 * y_resBitangent0 + z_resBitangent0 * z_resBitangent0);
                var magBitangent1 = Math.sqrt(x_resBitangent1 * x_resBitangent1 + y_resBitangent1 * y_resBitangent1 + z_resBitangent1 * z_resBitangent1);
                var magBitangent2 = Math.sqrt(x_resBitangent2 * x_resBitangent2 + y_resBitangent2 * y_resBitangent2 + z_resBitangent2 * z_resBitangent2);

                unpacked.tangents[i0 * 3 + 0] += x_resTangent0 / magTangent0;
                unpacked.tangents[i0 * 3 + 1] += y_resTangent0 / magTangent0;
                unpacked.tangents[i0 * 3 + 2] += z_resTangent0 / magTangent0;

                unpacked.tangents[i1 * 3 + 0] += x_resTangent1 / magTangent1;
                unpacked.tangents[i1 * 3 + 1] += y_resTangent1 / magTangent1;
                unpacked.tangents[i1 * 3 + 2] += z_resTangent1 / magTangent1;

                unpacked.tangents[i2 * 3 + 0] += x_resTangent2 / magTangent2;
                unpacked.tangents[i2 * 3 + 1] += y_resTangent2 / magTangent2;
                unpacked.tangents[i2 * 3 + 2] += z_resTangent2 / magTangent2;

                unpacked.bitangents[i0 * 3 + 0] += x_resBitangent0 / magBitangent0;
                unpacked.bitangents[i0 * 3 + 1] += y_resBitangent0 / magBitangent0;
                unpacked.bitangents[i0 * 3 + 2] += z_resBitangent0 / magBitangent0;

                unpacked.bitangents[i1 * 3 + 0] += x_resBitangent1 / magBitangent1;
                unpacked.bitangents[i1 * 3 + 1] += y_resBitangent1 / magBitangent1;
                unpacked.bitangents[i1 * 3 + 2] += z_resBitangent1 / magBitangent1;

                unpacked.bitangents[i2 * 3 + 0] += x_resBitangent2 / magBitangent2;
                unpacked.bitangents[i2 * 3 + 1] += y_resBitangent2 / magBitangent2;
                unpacked.bitangents[i2 * 3 + 2] += z_resBitangent2 / magBitangent2;

                // TODO: check handedness
            }

            this.tangents = unpacked.tangents;
            this.bitangents = unpacked.bitangents;
        }

        /**
           * @param {Layout} layout - A {@link Layout} object that describes the
           * desired memory layout of the generated buffer
           * @return {ArrayBuffer} The packed array in the ... TODO
           */ }, { key: 'makeBufferData', value: function makeBufferData(
        layout) {
            var numItems = this.vertices.length / 3;
            var buffer = new ArrayBuffer(layout.stride * numItems);
            buffer.numItems = numItems;
            var dataView = new DataView(buffer);
            for (var i = 0, vertexOffset = 0; i < numItems; i++) {
                vertexOffset = i * layout.stride;
                // copy in the vertex data in the order and format given by the
                // layout param
                var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {for (var _iterator = layout.attributes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var attribute = _step.value;
                        var offset = vertexOffset + layout[attribute.key].offset;
                        switch (attribute.key) {
                            case _layout.Layout.POSITION.key:
                                dataView.setFloat32(offset, this.vertices[i * 3], true);
                                dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);
                                dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);
                                break;
                            case _layout.Layout.UV.key:
                                dataView.setFloat32(offset, this.textures[i * 2], true);
                                dataView.setFloat32(offset + 4, this.vertices[i * 2 + 1], true);
                                break;
                            case _layout.Layout.NORMAL.key:
                                dataView.setFloat32(offset, this.vertexNormals[i * 3], true);
                                dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);
                                dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);
                                break;
                            case _layout.Layout.MATERIAL_INDEX.key:
                                dataView.setInt16(offset, this.vertexMaterialIndices[i], true);
                                break;
                            case _layout.Layout.AMBIENT.key:{
                                    var materialIndex = this.vertexMaterialIndices[i];
                                    var material = this.materialsByIndex[materialIndex];
                                    if (!material) {
                                        console.warn('Material "' + this.materialNames[materialIndex] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, material.ambient[0], true);
                                    dataView.setFloat32(offset + 4, material.ambient[1], true);
                                    dataView.setFloat32(offset + 8, material.ambient[2], true);
                                    break;
                                }
                            case _layout.Layout.DIFFUSE.key:{
                                    var _materialIndex = this.vertexMaterialIndices[i];
                                    var _material = this.materialsByIndex[_materialIndex];
                                    if (!_material) {
                                        console.warn('Material "' + this.materialNames[_materialIndex] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material.diffuse[0], true);
                                    dataView.setFloat32(offset + 4, _material.diffuse[1], true);
                                    dataView.setFloat32(offset + 8, _material.diffuse[2], true);
                                    break;
                                }
                            case _layout.Layout.SPECULAR.key:{
                                    var _materialIndex2 = this.vertexMaterialIndices[i];
                                    var _material2 = this.materialsByIndex[_materialIndex2];
                                    if (!_material2) {
                                        console.warn('Material "' + this.materialNames[_materialIndex2] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material2.specular[0], true);
                                    dataView.setFloat32(offset + 4, _material2.specular[1], true);
                                    dataView.setFloat32(offset + 8, _material2.specular[2], true);
                                    break;
                                }
                            case _layout.Layout.SPECULAR_EXPONENT.key:{
                                    var _materialIndex3 = this.vertexMaterialIndices[i];
                                    var _material3 = this.materialsByIndex[_materialIndex3];
                                    if (!_material3) {
                                        console.warn('Material "' + this.materialNames[_materialIndex3] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material3.specularExponent, true);
                                    break;
                                }
                            case _layout.Layout.EMISSIVE.key:{
                                    var _materialIndex4 = this.vertexMaterialIndices[i];
                                    var _material4 = this.materialsByIndex[_materialIndex4];
                                    if (!_material4) {
                                        console.warn('Material "' + this.materialNames[_materialIndex4] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material4.emissive[0], true);
                                    dataView.setFloat32(offset + 4, _material4.emissive[1], true);
                                    dataView.setFloat32(offset + 8, _material4.emissive[2], true);
                                    break;
                                }
                            case _layout.Layout.TRANSMISSION_FILTER.key:{
                                    var _materialIndex5 = this.vertexMaterialIndices[i];
                                    var _material5 = this.materialsByIndex[_materialIndex5];
                                    if (!_material5) {
                                        console.warn('Material "' + this.materialNames[_materialIndex5] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material5.transmissionFilter[0], true);
                                    dataView.setFloat32(offset + 4, _material5.transmissionFilter[1], true);
                                    dataView.setFloat32(offset + 8, _material5.transmissionFilter[2], true);
                                    break;
                                }
                            case _layout.Layout.DISSOLVE.key:{
                                    var _materialIndex6 = this.vertexMaterialIndices[i];
                                    var _material6 = this.materialsByIndex[_materialIndex6];
                                    if (!_material6) {
                                        console.warn('Material "' + this.materialNames[_materialIndex6] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material6.dissolve, true);
                                    break;
                                }
                            case _layout.Layout.ILLUMINATION.key:{
                                    var _materialIndex7 = this.vertexMaterialIndices[i];
                                    var _material7 = this.materialsByIndex[_materialIndex7];
                                    if (!_material7) {
                                        console.warn('Material "' + this.materialNames[_materialIndex7] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setInt16(offset, _material7.illumination, true);
                                    break;
                                }
                            case _layout.Layout.REFRACTION_INDEX.key:{
                                    var _materialIndex8 = this.vertexMaterialIndices[i];
                                    var _material8 = this.materialsByIndex[_materialIndex8];
                                    if (!_material8) {
                                        console.warn('Material "' + this.materialNames[_materialIndex8] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material8.refractionIndex, true);
                                    break;
                                }
                            case _layout.Layout.SHARPNESS.key:{
                                    var _materialIndex9 = this.vertexMaterialIndices[i];
                                    var _material9 = this.materialsByIndex[_materialIndex9];
                                    if (!_material9) {
                                        console.warn('Material "' + this.materialNames[_materialIndex9] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material9.sharpness, true);
                                    break;
                                }
                            case _layout.Layout.ANTI_ALIASING.key:{
                                    var _materialIndex10 = this.vertexMaterialIndices[i];
                                    var _material10 = this.materialsByIndex[_materialIndex10];
                                    if (!_material10) {
                                        console.warn('Material "' + this.materialNames[_materialIndex10] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setInt16(offset, _material10.antiAliasing, true);
                                    break;
                                }}

                    }} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}
            }
            return buffer;
        } }, { key: 'makeIndexBufferData', value: function makeIndexBufferData()

        {
            var buffer = new Uint16Array(this.indices);
            buffer.numItems = this.indices.length;
            return buffer;
        } }, { key: 'addMaterialLibrary', value: function addMaterialLibrary(

        mtl) {
            for (var name in mtl.materials) {
                if (!(name in this.materialIndices)) {
                    // This material is not referenced by the mesh
                    continue;
                }

                var material = mtl.materials[name];

                // Find the material index for this material
                var materialIndex = this.materialIndices[material.name];

                // Put the material into the materialsByIndex object at the right
                // spot as determined when the obj file was parsed
                this.materialsByIndex[materialIndex] = material;
            }
        } }]);return Mesh;}();exports.default = Mesh;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();function _toArray(arr) {return Array.isArray(arr) ? arr : Array.from(arr);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * The Material class.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */var
Material =
/**
            * Constructor
            * @param {String} name the unique name of the material
            */exports.Material =
function Material(name) {_classCallCheck(this, Material);
  // the unique material ID.
  this.name = name;
  // The values for the following attibutes
  // are an array of R, G, B normalized values.
  // Ka - Ambient Reflectivity
  this.ambient = [0, 0, 0];
  // Kd - Defuse Reflectivity
  this.diffuse = [0, 0, 0];
  // Ks
  this.specular = [0, 0, 0];
  // Ke
  this.emissive = [0, 0, 0];
  // Tf
  this.transmissionFilter = [0, 0, 0];
  // d
  this.dissolve = 0;
  // valid range is between 0 and 1000
  this.specularExponent = 0;
  // either d or Tr; valid values are normalized
  this.transparency = 0;
  // illum - the enum of the illumination model to use
  this.illumination = 0;
  // Ni - Set to "normal" (air).
  this.refractionIndex = 1;
  // sharpness
  this.sharpness = 0;
  // map_Kd
  this.mapDiffuse = null;
  // map_Ka
  this.mapAmbient = null;
  // map_Ks
  this.mapSpecular = null;
  // map_Ns
  this.mapSpecularExponent = null;
  // map_d
  this.mapDissolve = null;
  // map_aat
  this.antiAliasing = false;
  // map_bump or bump
  this.mapBump = null;
  // disp
  this.mapDisplacement = null;
  // decal
  this.mapDecal = null;
  // map_Ke
  this.mapEmissive = null;
  // refl - when the reflection type is a cube, there will be multiple refl
  //        statements for each side of the cube. If it's a spherical
  //        reflection, there should only ever be one.
  this.mapReflections = [];
};


/**
    * https://en.wikipedia.org/wiki/Wavefront_.obj_file
    * http://paulbourke.net/dataformats/mtl/
    */var
MaterialLibrary = exports.MaterialLibrary = function () {
  /**
                                                          * Constructs the Material Parser
                                                          * @param {String} mtlData the MTL file contents
                                                          */
  function MaterialLibrary(mtlData) {_classCallCheck(this, MaterialLibrary);
    this.data = mtlData;
    this.currentMaterial = null;
    this.materials = {};

    this.parse();
  }

  /* eslint-disable camelcase */
  /* the function names here disobey camelCase conventions
                                    to make parsing/routing easier. see the parse function
                                    documentation for more information. */

  /**
                                                                            * Creates a new Material object and adds to the registry.
                                                                            * @param {string[]} tokens the tokens associated with the directive
                                                                            */_createClass(MaterialLibrary, [{ key: 'parse_newmtl', value: function parse_newmtl(
    tokens) {
      var name = tokens[0];
      // console.info('Parsing new Material:', name);

      this.currentMaterial = new Material(name);
      this.materials[name] = this.currentMaterial;
    }

    /**
       * See the documenation for parse_Ka below for a better understanding.
       *
       * Given a list of possible color tokens, returns an array of R, G, and B
       * color values.
       *
       * @param {string[]} tokens the tokens associated with the directive
       * @return {*} a 3 element array containing the R, G, and B values
       * of the color.
       */ }, { key: 'parseColor', value: function parseColor(
    tokens) {
      if (tokens[0] == 'spectral') {
        console.error(
        'The MTL parser does not support spectral curve files. You will ' +
        'need to convert the MTL colors to either RGB or CIEXYZ.');

        return;
      }

      if (tokens[0] == 'xyz') {
        console.warn('TODO: convert XYZ to RGB');
        return;
      }

      // from my understanding of the spec, RGB values at this point
      // will either be 3 floats or exactly 1 float, so that's the check
      // that i'm going to perform here
      if (tokens.length == 3) {
        return tokens.map(parseFloat);
      }

      // Since tokens at this point has a length of 3, we're going to assume
      // it's exactly 1, skipping the check for 2.
      var value = parseFloat(tokens[0]);
      // in this case, all values are equivalent
      return [value, value, value];
    }

    /**
       * Parse the ambient reflectivity
       *
       * A Ka directive can take one of three forms:
       *   - Ka r g b
       *   - Ka spectral file.rfl
       *   - Ka xyz x y z
       * These three forms are mutually exclusive in that only one
       * declaration can exist per material. It is considered a syntax
       * error otherwise.
       *
       * The "Ka" form specifies the ambient reflectivity using RGB values.
       * The "g" and "b" values are optional. If only the "r" value is
       * specified, then the "g" and "b" values are assigned the value of
       * "r". Values are normally in the range 0.0 to 1.0. Values outside
       * of this range increase or decrease the reflectivity accordingly.
       *
       * The "Ka spectral" form specifies the ambient reflectivity using a
       * spectral curve. "file.rfl" is the name of the ".rfl" file containing
       * the curve data. "factor" is an optional argument which is a multiplier
       * for the values in the .rfl file and defaults to 1.0 if not specified.
       *
       * The "Ka xyz" form specifies the ambient reflectivity using CIEXYZ values.
       * "x y z" are the values of the CIEXYZ color space. The "y" and "z" arguments
       * are optional and take on the value of the "x" component if only "x" is
       * specified. The "x y z" values are normally in the range of 0.0 to 1.0 and
       * increase or decrease ambient reflectivity accordingly outside of that
       * range.
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ka', value: function parse_Ka(
    tokens) {
      this.currentMaterial.ambient = this.parseColor(tokens);
    }

    /**
       * Diffuse Reflectivity
       *
       * Similar to the Ka directive. Simply replace "Ka" with "Kd" and the rules
       * are the same
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Kd', value: function parse_Kd(
    tokens) {
      this.currentMaterial.diffuse = this.parseColor(tokens);
    }

    /**
       * Spectral Reflectivity
       *
       * Similar to the Ka directive. Simply replace "Ks" with "Kd" and the rules
       * are the same
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ks', value: function parse_Ks(
    tokens) {
      this.currentMaterial.specular = this.parseColor(tokens);
    }

    /**
       * Emissive
       *
       * The amount and color of light emitted by the object.
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ke', value: function parse_Ke(
    tokens) {
      this.currentMaterial.emissive = this.parseColor(tokens);
    }

    /**
       * Transmission Filter
       *
       * Any light passing through the object is filtered by the transmission
       * filter, which only allows specific colors to pass through. For example, Tf
       * 0 1 0 allows all of the green to pass through and filters out all of the
       * red and blue.
       *
       * Similar to the Ka directive. Simply replace "Ks" with "Tf" and the rules
       * are the same
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Tf', value: function parse_Tf(
    tokens) {
      this.currentMaterial.transmissionFilter = this.parseColor(tokens);
    }

    /**
       * Specifies the dissolve for the current material.
       *
       * Statement: d [-halo] `factor`
       *
       * Example: "d 0.5"
       *
       * The factor is the amount this material dissolves into the background. A
       * factor of 1.0 is fully opaque. This is the default when a new material is
       * created. A factor of 0.0 is fully dissolved (completely transparent).
       *
       * Unlike a real transparent material, the dissolve does not depend upon
       * material thickness nor does it have any spectral character. Dissolve works
       * on all illumination models.
       *
       * The dissolve statement allows for an optional "-halo" flag which indicates
       * that a dissolve is dependent on the surface orientation relative to the
       * viewer. For example, a sphere with the following dissolve, "d -halo 0.0",
       * will be fully dissolved at its center and will appear gradually more opaque
       * toward its edge.
       *
       * "factor" is the minimum amount of dissolve applied to the material. The
       * amount of dissolve will vary between 1.0 (fully opaque) and the specified
       * "factor". The formula is:
       *
       *    dissolve = 1.0 - (N*v)(1.0-factor)
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_d', value: function parse_d(
    tokens) {
      // this ignores the -halo option as I can't find any documentation on what
      // it's supposed to be.
      this.currentMaterial.dissolve = parseFloat(tokens.pop());
    }

    /**
       * The "illum" statement specifies the illumination model to use in the
       * material. Illumination models are mathematical equations that represent
       * various material lighting and shading effects.
       *
       * The illumination number can be a number from 0 to 10. The following are
       * the list of illumination enumerations and their summaries:
       * 0. Color on and Ambient off
       * 1. Color on and Ambient on
       * 2. Highlight on
       * 3. Reflection on and Ray trace on
       * 4. Transparency: Glass on, Reflection: Ray trace on
       * 5. Reflection: Fresnel on and Ray trace on
       * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on
       * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on
       * 8. Reflection on and Ray trace off
       * 9. Transparency: Glass on, Reflection: Ray trace off
       * 10. Casts shadows onto invisible surfaces
       *
       * Example: "illum 2" to specify the "Highlight on" model
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_illum', value: function parse_illum(
    tokens) {
      this.currentMaterial.illumination = parseInt(tokens[0]);
    }

    /**
       * Optical Density (AKA Index of Refraction)
       *
       * Statement: Ni `index`
       *
       * Example: Ni 1.0
       *
       * Specifies the optical density for the surface. `index` is the value
       * for the optical density. The values can range from 0.001 to 10.  A value of
       * 1.0 means that light does not bend as it passes through an object.
       * Increasing the optical_density increases the amount of bending. Glass has
       * an index of refraction of about 1.5. Values of less than 1.0 produce
       * bizarre results and are not recommended
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ni', value: function parse_Ni(
    tokens) {
      this.currentMaterial.refractionIndex = parseFloat(tokens[0]);
    }

    /**
       * Specifies the specular exponent for the current material. This defines the
       * focus of the specular highlight.
       *
       * Statement: Ns `exponent`
       *
       * Example: "Ns 250"
       *
       * `exponent` is the value for the specular exponent. A high exponent results
       * in a tight, concentrated highlight. Ns Values normally range from 0 to
       * 1000.
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ns', value: function parse_Ns(
    tokens) {
      this.currentMaterial.specularExponent = parseInt(tokens[0]);
    }

    /**
       * Specifies the sharpness of the reflections from the local reflection map.
       *
       * Statement: sharpness `value`
       *
       * Example: "sharpness 100"
       *
       * If a material does not have a local reflection map defined in its material
       * defintions, sharpness will apply to the global reflection map defined in
       * PreView.
       *
       * `value` can be a number from 0 to 1000. The default is 60. A high value
       * results in a clear reflection of objects in the reflection map.
       *
       * Tip: sharpness values greater than 100 introduce aliasing effects in
       * flat surfaces that are viewed at a sharp angle.
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_sharpness', value: function parse_sharpness(
    tokens) {
      this.currentMaterial.sharpness = parseInt(tokens[0]);
    }

    /**
       * Parses the -cc flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -cc flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_cc', value: function parse_cc(
    values, options) {
      options.colorCorrection = values[0] == 'on';
    }

    /**
       * Parses the -blendu flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -blendu flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_blendu', value: function parse_blendu(
    values, options) {
      options.horizontalBlending = values[0] == 'on';
    }

    /**
       * Parses the -blendv flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -blendv flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_blendv', value: function parse_blendv(
    values, options) {
      options.verticalBlending = values[0] == 'on';
    }

    /**
       * Parses the -boost flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -boost flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_boost', value: function parse_boost(
    values, options) {
      options.boostMipMapSharpness = parseFloat(values[0]);
    }

    /**
       * Parses the -mm flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -mm flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_mm', value: function parse_mm(
    values, options) {
      options.modifyTextureMap.brightness = parseFloat(values[0]);
      options.modifyTextureMap.contrast = parseFloat(values[1]);
    }

    /**
       * Parses and sets the -o, -s, and -t  u, v, and w values
       *
       * @param {string[]} values the values passed to the -o, -s, -t flag
       * @param {Object} option the Object of either the -o, -s, -t option
       * @param {Integer} defaultValue the Object of all image options
       */ }, { key: 'parse_ost', value: function parse_ost(
    values, option, defaultValue) {
      while (values.length < 3) {
        values.push(defaultValue);
      }

      option.u = parseFloat(values[0]);
      option.v = parseFloat(values[1]);
      option.w = parseFloat(values[2]);
    }

    /**
       * Parses the -o flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -o flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_o', value: function parse_o(
    values, options) {
      this.parse_ost(values, options.offset, 0);
    }

    /**
       * Parses the -s flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -s flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_s', value: function parse_s(
    values, options) {
      this.parse_ost(values, options.scale, 1);
    }

    /**
       * Parses the -t flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -t flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_t', value: function parse_t(
    values, options) {
      this.parse_ost(values, options.turbulence, 0);
    }

    /**
       * Parses the -texres flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -texres flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_texres', value: function parse_texres(
    values, options) {
      options.textureResolution = parseFloat(values[0]);
    }

    /**
       * Parses the -clamp flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -clamp flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_clamp', value: function parse_clamp(
    values, options) {
      options.clamp = values[0] == 'on';
    }

    /**
       * Parses the -bm flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -bm flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_bm', value: function parse_bm(
    values, options) {
      options.bumpMultiplier = parseFloat(values[0]);
    }

    /**
       * Parses the -imfchan flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -imfchan flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_imfchan', value: function parse_imfchan(
    values, options) {
      options.imfChan = values[0];
    }

    /**
       * This only exists for relection maps and denotes the type of reflection.
       *
       * @param {string[]} values the values passed to the -type flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_type', value: function parse_type(
    values, options) {
      options.reflectionType = values[0];
    }

    /**
       * Parses the texture's options and returns an options object with the info
       *
       * @param {string[]} tokens all of the option tokens to pass to the texture
       * @return {Object} a complete object of objects to apply to the texture
       */ }, { key: 'parseOptions', value: function parseOptions(
    tokens) {
      var options = {
        colorCorrection: false,
        horizontalBlending: true,
        verticalBlending: true,
        boostMipMapSharpness: 0,
        modifyTextureMap: {
          brightness: 0,
          contrast: 1 },

        offset: { u: 0, v: 0, w: 0 },
        scale: { u: 1, v: 1, w: 1 },
        turbulence: { u: 0, v: 0, w: 0 },
        clamp: false,
        textureResolution: null,
        bumpMultiplier: 1,
        imfChan: null };


      var option = void 0;
      var values = void 0;
      var optionsToValues = {};

      tokens.reverse();

      while (tokens.length) {
        var token = tokens.pop();

        if (token.startsWith('-')) {
          option = token.substr(1);
          optionsToValues[option] = [];
        } else {
          optionsToValues[option].push(token);
        }
      }

      for (option in optionsToValues) {
        if (!optionsToValues.hasOwnProperty(option)) {
          continue;
        }
        values = optionsToValues[option];
        var optionMethod = this['parse_' + option];
        if (optionMethod) {
          optionMethod.bind(this)(values, options);
        }
      }

      return options;
    }

    /**
       * Parses the given texture map line.
       *
       * @param {string[]} tokens all of the tokens representing the texture
       * @return {Object} a complete object of objects to apply to the texture
       */ }, { key: 'parseMap', value: function parseMap(
    tokens) {
      // according to wikipedia:
      // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)
      // there is at least one vendor that places the filename before the options
      // rather than after (which is to spec). All options start with a '-'
      // so if the first token doesn't start with a '-', we're going to assume
      // it's the name of the map file.
      var filename = void 0;
      var options = void 0;
      if (!tokens[0].startsWith('-')) {var _tokens = _toArray(
        tokens);filename = _tokens[0];options = _tokens.slice(1);
      } else {
        filename = tokens.pop();
        options = tokens;
      }

      options = this.parseOptions(options);
      options['filename'] = filename;
      return options;
    }

    /**
       * Parses the ambient map.
       *
       * @param {string[]} tokens list of tokens for the map_Ka direcive
       */ }, { key: 'parse_map_Ka', value: function parse_map_Ka(
    tokens) {
      this.currentMaterial.mapAmbient = this.parseMap(tokens);
    }

    /**
       * Parses the diffuse map.
       *
       * @param {string[]} tokens list of tokens for the map_Kd direcive
       */ }, { key: 'parse_map_Kd', value: function parse_map_Kd(
    tokens) {
      this.currentMaterial.mapDiffuse = this.parseMap(tokens);
    }

    /**
       * Parses the specular map.
       *
       * @param {string[]} tokens list of tokens for the map_Ks direcive
       */ }, { key: 'parse_map_Ks', value: function parse_map_Ks(
    tokens) {
      this.currentMaterial.mapSpecular = this.parseMap(tokens);
    }

    /**
       * Parses the emissive map.
       *
       * @param {string[]} tokens list of tokens for the map_Ke direcive
       */ }, { key: 'parse_map_Ke', value: function parse_map_Ke(
    tokens) {
      this.currentMaterial.mapEmissive = this.parseMap(tokens);
    }

    /**
       * Parses the specular exponent map.
       *
       * @param {string[]} tokens list of tokens for the map_Ns direcive
       */ }, { key: 'parse_map_Ns', value: function parse_map_Ns(
    tokens) {
      this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);
    }

    /**
       * Parses the dissolve map.
       *
       * @param {string[]} tokens list of tokens for the map_d direcive
       */ }, { key: 'parse_map_d', value: function parse_map_d(
    tokens) {
      this.currentMaterial.mapDissolve = this.parseMap(tokens);
    }

    /**
       * Parses the anti-aliasing option.
       *
       * @param {string[]} tokens list of tokens for the map_aat direcive
       */ }, { key: 'parse_map_aat', value: function parse_map_aat(
    tokens) {
      this.currentMaterial.antiAliasing = tokens[0] == 'on';
    }

    /**
       * Parses the bump map.
       *
       * @param {string[]} tokens list of tokens for the map_bump direcive
       */ }, { key: 'parse_map_bump', value: function parse_map_bump(
    tokens) {
      this.currentMaterial.mapBump = this.parseMap(tokens);
    }

    /**
       * Parses the bump map.
       *
       * @param {string[]} tokens list of tokens for the bump direcive
       */ }, { key: 'parse_bump', value: function parse_bump(
    tokens) {
      this.parse_map_bump(tokens);
    }

    /**
       * Parses the disp map.
       *
       * @param {string[]} tokens list of tokens for the disp direcive
       */ }, { key: 'parse_disp', value: function parse_disp(
    tokens) {
      this.currentMaterial.mapDisplacement = this.parseMap(tokens);
    }

    /**
       * Parses the decal map.
       *
       * @param {string[]} tokens list of tokens for the map_decal direcive
       */ }, { key: 'parse_decal', value: function parse_decal(
    tokens) {
      this.currentMaterial.mapDecal = this.parseMap(tokens);
    }

    /**
       * Parses the refl map.
       *
       * @param {string[]} tokens list of tokens for the refl direcive
       */ }, { key: 'parse_refl', value: function parse_refl(
    tokens) {
      this.currentMaterial.mapReflections.push(this.parseMap(tokens));
    }

    /**
       * Parses the MTL file.
       * 
       * Iterates line by line parsing each MTL directive.
       * 
       * This function expects the first token in the line
       * to be a valid MTL directive. That token is then used
       * to try and run a method on this class. parse_[directive]
       * E.g., the `newmtl` directive would try to call the method
       * parse_newmtl. Each parsing function takes in the remaining
       * list of tokens and updates the currentMaterial class with
       * the attributes provided.
       */ }, { key: 'parse', value: function parse()
    {
      var lines = this.data.split(/\r?\n/);var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {
        for (var _iterator = lines[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var line = _step.value;
          line = line.trim();
          if (!line || line.startsWith('#')) {
            continue;
          }

          var tokens = line.split(/\s/);
          var directive = void 0;var _tokens2 =
          tokens;var _tokens3 = _toArray(_tokens2);directive = _tokens3[0];tokens = _tokens3.slice(1);

          var parseMethod = this['parse_' + directive];

          if (!parseMethod) {
            console.warn('Don\'t know how to parse the directive: "' + directive + '"');
            continue;
          }

          // console.log(`Parsing "${directive}" with tokens: ${tokens}`);
          parseMethod.bind(this)(tokens);
        }

        // some cleanup. These don't need to be exposed as public data.
      } catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}delete this.data;
      this.currentMaterial = null;
    }

    /* eslint-enable camelcase*/ }]);return MaterialLibrary;}();
;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(4);


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.deleteMeshBuffers = exports.initMeshBuffers = exports.downloadMeshes = exports.downloadModels = exports.Layout = exports.MaterialLibrary = exports.Material = exports.Mesh = undefined;var _mesh = __webpack_require__(1);var _mesh2 = _interopRequireDefault(_mesh);
var _material = __webpack_require__(2);
var _layout = __webpack_require__(0);
var _utils = __webpack_require__(5);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}



/**
                                                                                                                               * @namespace
                                                                                                                               */exports.

Mesh = _mesh2.default;exports.
Material = _material.Material;exports.
MaterialLibrary = _material.MaterialLibrary;exports.
Layout = _layout.Layout;exports.

downloadModels = _utils.downloadModels;exports.
downloadMeshes = _utils.downloadMeshes;exports.
initMeshBuffers = _utils.initMeshBuffers;exports.
deleteMeshBuffers = _utils.deleteMeshBuffers;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();exports.






































































































downloadModels = downloadModels;exports.












































































































downloadMeshes = downloadMeshes;exports.


















































































































initMeshBuffers = initMeshBuffers;exports.






deleteMeshBuffers = deleteMeshBuffers;var _mesh = __webpack_require__(1);var _mesh2 = _interopRequireDefault(_mesh);var _material = __webpack_require__(2);var _layout = __webpack_require__(0);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function downloadMtlTextures(mtl, root) {var mapAttributes = ['mapDiffuse', 'mapAmbient', 'mapSpecular', 'mapDissolve', 'mapBump', 'mapDisplacement', 'mapDecal', 'mapEmissive'];if (!root.endsWith('/')) {root += '/';}var textures = [];for (var material in mtl.materials) {if (!mtl.materials.hasOwnProperty(material)) {continue;}material = mtl.materials[material];var _loop = function _loop(attr) {var mapData = material[attr];if (!mapData) {return 'continue';}var url = root + mapData.filename;textures.push(fetch(url).then(function (response) {if (!response.ok) {throw new Error();}return response.blob();}).then(function (data) {var image = new Image();image.src = URL.createObjectURL(data);mapData.texture = image;}).catch(function () {console.error('Unable to download texture: ' + url);}));};var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {for (var _iterator = mapAttributes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var attr = _step.value;var _ret = _loop(attr);if (_ret === 'continue') continue;}} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}}return Promise.all(textures);} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * Accepts a list of model request objects and returns a Promise that
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * resolves when all models have been downloaded and parsed.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The list of model objects follow this interface:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  obj: 'path/to/model.obj',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  mtl: true | 'path/to/model.mtl',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  downloadMtlTextures: true | false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  mtlTextureRoot: '/models/suzanne/maps'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  name: 'suzanne'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `obj` attribute is required and should be the path to the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * model's .obj file relative to the current repo (absolute URLs are
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * suggested).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `mtl` attribute is optional and can either be a boolean or
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * a path to the model's .mtl file relative to the current URL. If
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * the value is `true`, then the path and basename given for the `obj`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * attribute is used replacing the .obj suffix for .mtl
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * E.g.: {obj: 'models/foo.obj', mtl: true} would search for 'models/foo.mtl'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `name` attribute is optional and is a human friendly name to be
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * included with the parsed OBJ and MTL files. If not given, the base .obj
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * filename will be used.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `downloadMtlTextures` attribute is a flag for automatically downloading
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * any images found in the MTL file and attaching them to each Material
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * created from that file. For example, if material.mapDiffuse is set (there
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * was data in the MTL file), then material.mapDiffuse.texture will contain
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * the downloaded image. This option defaults to `true`. By default, the MTL's
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * URL will be used to determine the location of the images.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `mtlTextureRoot` attribute is optional and should point to the location
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * on the server that this MTL's texture files are located. The default is to
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * use the MTL file's location.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * @returns {Promise} the result of downloading the given list of models. The
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * promise will resolve with an object whose keys are the names of the models
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * and the value is its Mesh object. Each Mesh object will automatically
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * have its addMaterialLibrary() method called to set the given MTL data (if given).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           */function downloadModels(models) {var finished = [];var _loop2 = function _loop2(model) {var parsed = [];if (!model.obj) {throw new Error('"obj" attribute of model object not set. The .obj file is required to be set ' + 'in order to use downloadModels()');}var options = {};options.indicesPerMaterial = !!model.indicesPerMaterial;options.calcTangentsAndBitangents = !!model.calcTangentsAndBitangents; // if the name is not provided, dervive it from the given OBJ
    var name = model.name;if (!name) {var parts = model.obj.split('/');name = parts[parts.length - 1].replace('.obj', '');}parsed.push(Promise.resolve(name));parsed.push(fetch(model.obj).then(function (response) {return response.text();}).then(function (data) {return new _mesh2.default(data, options);})); // Download MaterialLibrary file?
    if (model.mtl) {var mtl = model.mtl;if (typeof mtl === 'boolean') {mtl = model.obj.replace(/\.obj$/, '.mtl');}parsed.push(fetch(mtl).then(function (response) {return response.text();}).then(function (data) {var material = new _material.MaterialLibrary(data);if (model.downloadMtlTextures !== false) {var root = model.mtlTextureRoot;if (!root) {// get the directory of the MTL file as default
            root = mtl.substr(0, mtl.lastIndexOf("/"));} // downloadMtlTextures returns a Promise that
          // is resolved once all of the images it
          // contains are downloaded. These are then
          // attached to the map data objects
          return Promise.all([Promise.resolve(material), downloadMtlTextures(material, root)]);}return Promise.all(Promise.resolve(material));}).then(function (value) {return value[0];}));}finished.push(Promise.all(parsed));};var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {for (var _iterator2 = models[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var model = _step2.value;_loop2(model);}} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2.return) {_iterator2.return();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}return Promise.all(finished).then(function (ms) {// the "finished" promise is a list of name, Mesh instance,
    // and MaterialLibary instance. This unpacks and returns an
    // object mapping name to Mesh (Mesh points to MTL).
    var models = {};var _iteratorNormalCompletion3 = true;var _didIteratorError3 = false;var _iteratorError3 = undefined;try {for (var _iterator3 = ms[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {var model = _step3.value;var _model = _slicedToArray(model, 3),_name = _model[0],mesh = _model[1],mtl = _model[2];mesh.name = _name;if (mtl) {mesh.addMaterialLibrary(mtl);}models[_name] = mesh;}} catch (err) {_didIteratorError3 = true;_iteratorError3 = err;} finally {try {if (!_iteratorNormalCompletion3 && _iterator3.return) {_iterator3.return();}} finally {if (_didIteratorError3) {throw _iteratorError3;}}}return models;});} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * Takes in an object of `mesh_name`, `'/url/to/OBJ/file'` pairs and a callback
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * function. Each OBJ file will be ajaxed in and automatically converted to
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * an OBJ.Mesh. When all files have successfully downloaded the callback
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * function provided will be called and passed in an object containing
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * the newly created meshes.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * **Note:** In order to use this function as a way to download meshes, a
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * webserver of some sort must be used.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh's OBJ file
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { '<mesh_name>': OBJ.Mesh }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        */function downloadMeshes(nameAndURLs, completionCallback, meshes) {if (meshes === undefined) {meshes = {};}var completed = [];var _loop3 = function _loop3(mesh_name) {if (!nameAndURLs.hasOwnProperty(mesh_name)) {return 'continue';}var url = nameAndURLs[mesh_name];completed.push(fetch(url).then(function (response) {return response.text();}).then(function (data) {return [mesh_name, new _mesh2.default(data)];}));};for (var mesh_name in nameAndURLs) {var _ret3 = _loop3(mesh_name);if (_ret3 === 'continue') continue;}Promise.all(completed).then(function (ms) {var _iteratorNormalCompletion4 = true;var _didIteratorError4 = false;var _iteratorError4 = undefined;try {for (var _iterator4 = ms[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {var _ref = _step4.value;var _ref2 = _slicedToArray(_ref, 2);var _name2 = _ref2[0];var mesh = _ref2[1];meshes[_name2] = mesh;}} catch (err) {_didIteratorError4 = true;_iteratorError4 = err;} finally {try {if (!_iteratorNormalCompletion4 && _iterator4.return) {_iterator4.return();}} finally {if (_didIteratorError4) {throw _iteratorError4;}}}return completionCallback(meshes);});}var _buildBuffer = function _buildBuffer(gl, type, data, itemSize) {var buffer = gl.createBuffer();var arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;gl.bindBuffer(type, buffer);gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);buffer.itemSize = itemSize;buffer.numItems = data.length / itemSize;return buffer;}; /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Takes in the WebGL context and a Mesh, then creates and appends the buffers
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * to the mesh object as attributes.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * @param {WebGLRenderingContext} gl the `canvas.getContext('webgl')` context instance
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * @param {Mesh} mesh a single `OBJ.Mesh` instance
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * The newly created mesh attributes are:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Attrbute | Description
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * :--- | ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * **normalBuffer**       |contains the model&#39;s Vertex Normals
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * normalBuffer.itemSize  |set to 3 items
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * normalBuffer.numItems  |the total number of vertex normals
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * **textureBuffer**      |contains the model&#39;s Texture Coordinates
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * textureBuffer.itemSize |set to 2 items
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * textureBuffer.numItems |the number of texture coordinates
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * vertexBuffer.itemSize  |set to 3 items
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * vertexBuffer.numItems  |the total number of vertices
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * **indexBuffer**        |contains the indices of the faces
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * indexBuffer.itemSize   |is set to 1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * indexBuffer.numItems   |the total number of indices
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * A simple example (a lot of steps are missing, so don't copy and paste):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     var gl   = canvas.getContext('webgl'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *         mesh = OBJ.Mesh(obj_file_data);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // compile the shaders and create a shader program
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     var shaderProgram = gl.createProgram();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // compilation stuff here
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     ...
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // make sure you have vertex, vertex normal, and texture coordinate
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // attributes located in your shaders and attach them to the shader program
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // create and initialize the vertex, vertex normal, and texture coordinate buffers
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // and save on to the mesh object
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     OBJ.initMeshBuffers(gl, mesh);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // now to render the mesh
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // it's possible that the mesh doesn't contain
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // any texture coordinates (e.g. suzanne.obj in the development branch).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // in this case, the texture vertexAttribArray will need to be disabled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // before the call to drawElements
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     if(!mesh.textures.length){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       gl.disableVertexAttribArray(shaderProgram.textureCoordAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     else{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       // if the texture vertexAttribArray has been previously
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       // disabled, then it needs to be re-enabled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              */function initMeshBuffers(gl, mesh) {mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);};function deleteMeshBuffers(gl, mesh) {gl.deleteBuffer(mesh.normalBuffer);gl.deleteBuffer(mesh.textureBuffer);gl.deleteBuffer(mesh.vertexBuffer);gl.deleteBuffer(mesh.indexBuffer);}

/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAyY2IwMmVkYzdjZWE3ZTg0ZjllMiIsIndlYnBhY2s6Ly8vLi9zcmMvbGF5b3V0LmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNoLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXRlcmlhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIl0sIm5hbWVzIjpbIkxheW91dCIsImF0dHJpYnV0ZXMiLCJvZmZzZXQiLCJtYXhTdHJpZGVNdWx0aXBsZSIsImF0dHJpYnV0ZSIsImtleSIsIkR1cGxpY2F0ZUF0dHJpYnV0ZUV4Y2VwdGlvbiIsInNpemVPZlR5cGUiLCJjb25zb2xlIiwid2FybiIsInNpemUiLCJ0eXBlIiwibm9ybWFsaXplZCIsInNpemVJbkJ5dGVzIiwiTWF0aCIsIm1heCIsInN0cmlkZSIsIm1lc3NhZ2UiLCJBdHRyaWJ1dGUiLCJzaXplSW5CeXRlc09mVHlwZSIsIlBPU0lUSU9OIiwiTk9STUFMIiwiVEFOR0VOVCIsIkJJVEFOR0VOVCIsIlVWIiwiTUFURVJJQUxfSU5ERVgiLCJNQVRFUklBTF9FTkFCTEVEIiwiQU1CSUVOVCIsIkRJRkZVU0UiLCJTUEVDVUxBUiIsIlNQRUNVTEFSX0VYUE9ORU5UIiwiRU1JU1NJVkUiLCJUUkFOU01JU1NJT05fRklMVEVSIiwiRElTU09MVkUiLCJJTExVTUlOQVRJT04iLCJSRUZSQUNUSU9OX0lOREVYIiwiU0hBUlBORVNTIiwiTUFQX0RJRkZVU0UiLCJNQVBfQU1CSUVOVCIsIk1BUF9TUEVDVUxBUiIsIk1BUF9TUEVDVUxBUl9FWFBPTkVOVCIsIk1BUF9ESVNTT0xWRSIsIkFOVElfQUxJQVNJTkciLCJNQVBfQlVNUCIsIk1BUF9ESVNQTEFDRU1FTlQiLCJNQVBfREVDQUwiLCJNQVBfRU1JU1NJVkUiLCJNZXNoIiwib2JqZWN0RGF0YSIsIm9wdGlvbnMiLCJtYXRlcmlhbHMiLCJlbmFibGVXVGV4dHVyZUNvb3JkIiwiaW5kaWNlc1Blck1hdGVyaWFsIiwic2VsZiIsInZlcnRpY2VzIiwidmVydGV4Tm9ybWFscyIsInRleHR1cmVzIiwiaW5kaWNlcyIsInRleHR1cmVTdHJpZGUiLCJuYW1lIiwidmVydHMiLCJ2ZXJ0Tm9ybWFscyIsInVucGFja2VkIiwibWF0ZXJpYWxOYW1lc0J5SW5kZXgiLCJtYXRlcmlhbEluZGljZXNCeU5hbWUiLCJjdXJyZW50TWF0ZXJpYWxJbmRleCIsImN1cnJlbnRPYmplY3RCeU1hdGVyaWFsSW5kZXgiLCJub3JtcyIsImhhc2hpbmRpY2VzIiwibWF0ZXJpYWxJbmRpY2VzIiwiaW5kZXgiLCJWRVJURVhfUkUiLCJOT1JNQUxfUkUiLCJURVhUVVJFX1JFIiwiRkFDRV9SRSIsIldISVRFU1BBQ0VfUkUiLCJVU0VfTUFURVJJQUxfUkUiLCJsaW5lcyIsInNwbGl0IiwiaSIsImxlbmd0aCIsImxpbmUiLCJ0cmltIiwic3RhcnRzV2l0aCIsImVsZW1lbnRzIiwic2hpZnQiLCJ0ZXN0IiwicHVzaCIsImNvb3JkcyIsInNsaWNlIiwibWF0ZXJpYWxOYW1lIiwicXVhZCIsImoiLCJlbGVMZW4iLCJoYXNoMCIsImhhc2giLCJ2ZXJ0ZXgiLCJub3JtYWxJbmRleCIsInZlcnRleE1hdGVyaWFsSW5kaWNlcyIsIm1hdGVyaWFsTmFtZXMiLCJtYXRlcmlhbHNCeUluZGV4IiwiY2FsY1RhbmdlbnRzQW5kQml0YW5nZW50cyIsImNhbGN1bGF0ZVRhbmdlbnRzQW5kQml0YW5nZW50cyIsImFzc2VydCIsInRhbmdlbnRzIiwiQXJyYXkiLCJtYXAiLCJiaXRhbmdlbnRzIiwiaXNBcnJheSIsImNvbmNhdCIsImFwcGx5Iiwibm9ybWFscyIsInV2cyIsImkwIiwiaTEiLCJpMiIsInhfdjAiLCJ5X3YwIiwiel92MCIsInhfdXYwIiwieV91djAiLCJ4X3YxIiwieV92MSIsInpfdjEiLCJ4X3V2MSIsInlfdXYxIiwieF92MiIsInlfdjIiLCJ6X3YyIiwieF91djIiLCJ5X3V2MiIsInhfZGVsdGFQb3MxIiwieV9kZWx0YVBvczEiLCJ6X2RlbHRhUG9zMSIsInhfZGVsdGFQb3MyIiwieV9kZWx0YVBvczIiLCJ6X2RlbHRhUG9zMiIsInhfdXZEZWx0YVBvczEiLCJ5X3V2RGVsdGFQb3MxIiwieF91dkRlbHRhUG9zMiIsInlfdXZEZWx0YVBvczIiLCJySW52IiwiciIsImFicyIsInhfdGFuZ2VudCIsInlfdGFuZ2VudCIsInpfdGFuZ2VudCIsInhfYml0YW5nZW50IiwieV9iaXRhbmdlbnQiLCJ6X2JpdGFuZ2VudCIsInhfbjAiLCJ5X24wIiwiel9uMCIsInhfbjEiLCJ5X24xIiwiel9uMSIsInhfbjIiLCJ5X24yIiwiel9uMiIsIm4wX2RvdF90IiwibjFfZG90X3QiLCJuMl9kb3RfdCIsInhfcmVzVGFuZ2VudDAiLCJ5X3Jlc1RhbmdlbnQwIiwiel9yZXNUYW5nZW50MCIsInhfcmVzVGFuZ2VudDEiLCJ5X3Jlc1RhbmdlbnQxIiwiel9yZXNUYW5nZW50MSIsInhfcmVzVGFuZ2VudDIiLCJ5X3Jlc1RhbmdlbnQyIiwiel9yZXNUYW5nZW50MiIsIm1hZ1RhbmdlbnQwIiwic3FydCIsIm1hZ1RhbmdlbnQxIiwibWFnVGFuZ2VudDIiLCJuMF9kb3RfYnQiLCJuMV9kb3RfYnQiLCJuMl9kb3RfYnQiLCJ4X3Jlc0JpdGFuZ2VudDAiLCJ5X3Jlc0JpdGFuZ2VudDAiLCJ6X3Jlc0JpdGFuZ2VudDAiLCJ4X3Jlc0JpdGFuZ2VudDEiLCJ5X3Jlc0JpdGFuZ2VudDEiLCJ6X3Jlc0JpdGFuZ2VudDEiLCJ4X3Jlc0JpdGFuZ2VudDIiLCJ5X3Jlc0JpdGFuZ2VudDIiLCJ6X3Jlc0JpdGFuZ2VudDIiLCJtYWdCaXRhbmdlbnQwIiwibWFnQml0YW5nZW50MSIsIm1hZ0JpdGFuZ2VudDIiLCJsYXlvdXQiLCJudW1JdGVtcyIsImJ1ZmZlciIsIkFycmF5QnVmZmVyIiwiZGF0YVZpZXciLCJEYXRhVmlldyIsInZlcnRleE9mZnNldCIsInNldEZsb2F0MzIiLCJzZXRJbnQxNiIsIm1hdGVyaWFsSW5kZXgiLCJtYXRlcmlhbCIsImFtYmllbnQiLCJkaWZmdXNlIiwic3BlY3VsYXIiLCJzcGVjdWxhckV4cG9uZW50IiwiZW1pc3NpdmUiLCJ0cmFuc21pc3Npb25GaWx0ZXIiLCJkaXNzb2x2ZSIsImlsbHVtaW5hdGlvbiIsInJlZnJhY3Rpb25JbmRleCIsInNoYXJwbmVzcyIsImFudGlBbGlhc2luZyIsIlVpbnQxNkFycmF5IiwibXRsIiwiTWF0ZXJpYWwiLCJ0cmFuc3BhcmVuY3kiLCJtYXBEaWZmdXNlIiwibWFwQW1iaWVudCIsIm1hcFNwZWN1bGFyIiwibWFwU3BlY3VsYXJFeHBvbmVudCIsIm1hcERpc3NvbHZlIiwibWFwQnVtcCIsIm1hcERpc3BsYWNlbWVudCIsIm1hcERlY2FsIiwibWFwRW1pc3NpdmUiLCJtYXBSZWZsZWN0aW9ucyIsIk1hdGVyaWFsTGlicmFyeSIsIm10bERhdGEiLCJkYXRhIiwiY3VycmVudE1hdGVyaWFsIiwicGFyc2UiLCJ0b2tlbnMiLCJlcnJvciIsInBhcnNlRmxvYXQiLCJ2YWx1ZSIsInBhcnNlQ29sb3IiLCJwb3AiLCJwYXJzZUludCIsInZhbHVlcyIsImNvbG9yQ29ycmVjdGlvbiIsImhvcml6b250YWxCbGVuZGluZyIsInZlcnRpY2FsQmxlbmRpbmciLCJib29zdE1pcE1hcFNoYXJwbmVzcyIsIm1vZGlmeVRleHR1cmVNYXAiLCJicmlnaHRuZXNzIiwiY29udHJhc3QiLCJvcHRpb24iLCJkZWZhdWx0VmFsdWUiLCJ1IiwidiIsInciLCJwYXJzZV9vc3QiLCJzY2FsZSIsInR1cmJ1bGVuY2UiLCJ0ZXh0dXJlUmVzb2x1dGlvbiIsImNsYW1wIiwiYnVtcE11bHRpcGxpZXIiLCJpbWZDaGFuIiwicmVmbGVjdGlvblR5cGUiLCJvcHRpb25zVG9WYWx1ZXMiLCJyZXZlcnNlIiwidG9rZW4iLCJzdWJzdHIiLCJoYXNPd25Qcm9wZXJ0eSIsIm9wdGlvbk1ldGhvZCIsImJpbmQiLCJmaWxlbmFtZSIsInBhcnNlT3B0aW9ucyIsInBhcnNlTWFwIiwicGFyc2VfbWFwX2J1bXAiLCJkaXJlY3RpdmUiLCJwYXJzZU1ldGhvZCIsImRvd25sb2FkTW9kZWxzIiwiZG93bmxvYWRNZXNoZXMiLCJpbml0TWVzaEJ1ZmZlcnMiLCJkZWxldGVNZXNoQnVmZmVycyIsImRvd25sb2FkTXRsVGV4dHVyZXMiLCJyb290IiwibWFwQXR0cmlidXRlcyIsImVuZHNXaXRoIiwiYXR0ciIsIm1hcERhdGEiLCJ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsIm9rIiwiRXJyb3IiLCJibG9iIiwiaW1hZ2UiLCJJbWFnZSIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInRleHR1cmUiLCJjYXRjaCIsIlByb21pc2UiLCJhbGwiLCJtb2RlbHMiLCJmaW5pc2hlZCIsIm1vZGVsIiwicGFyc2VkIiwib2JqIiwicGFydHMiLCJyZXBsYWNlIiwicmVzb2x2ZSIsInRleHQiLCJtdGxUZXh0dXJlUm9vdCIsImxhc3RJbmRleE9mIiwibXMiLCJtZXNoIiwiYWRkTWF0ZXJpYWxMaWJyYXJ5IiwibmFtZUFuZFVSTHMiLCJjb21wbGV0aW9uQ2FsbGJhY2siLCJtZXNoZXMiLCJ1bmRlZmluZWQiLCJjb21wbGV0ZWQiLCJtZXNoX25hbWUiLCJfYnVpbGRCdWZmZXIiLCJnbCIsIml0ZW1TaXplIiwiY3JlYXRlQnVmZmVyIiwiYXJyYXlWaWV3IiwiQVJSQVlfQlVGRkVSIiwiRmxvYXQzMkFycmF5IiwiYmluZEJ1ZmZlciIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsIm5vcm1hbEJ1ZmZlciIsInRleHR1cmVCdWZmZXIiLCJ2ZXJ0ZXhCdWZmZXIiLCJpbmRleEJ1ZmZlciIsIkVMRU1FTlRfQVJSQVlfQlVGRkVSIiwiZGVsZXRlQnVmZmVyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQXNELCtEQUErRDs7QUFFckg7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7OztvTkM3REE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTJCYUEsTTtBQUNUOzs7Ozs7OztvQkFEU0EsTTtBQVVULGtCQUEyQixpRUFBWkMsVUFBWSxnREFBWkEsVUFBWTtBQUN2QixTQUFLQSxVQUFMLEdBQWtCQSxVQUFsQjtBQUNBLFFBQUlDLFNBQVMsQ0FBYjtBQUNBLFFBQUlDLG9CQUFvQixDQUF4QixDQUh1QjtBQUl2Qiw2QkFBd0JGLFVBQXhCLDhIQUFvQyxLQUF6QkcsU0FBeUI7QUFDaEMsZ0JBQUksS0FBS0EsVUFBVUMsR0FBZixDQUFKLEVBQXlCO0FBQ3JCLHNCQUFNLElBQUlDLDJCQUFKLENBQWdDRixTQUFoQyxDQUFOO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQSxnQkFBSUYsU0FBU0UsVUFBVUcsVUFBbkIsS0FBa0MsQ0FBdEMsRUFBeUM7QUFDckNMLDBCQUFVRSxVQUFVRyxVQUFWLEdBQXVCTCxTQUFTRSxVQUFVRyxVQUFwRDtBQUNBQyx3QkFBUUMsSUFBUixDQUFhLG9DQUFvQ0wsVUFBVUMsR0FBOUMsR0FBb0QsWUFBakU7QUFDSDtBQUNELGlCQUFLRCxVQUFVQyxHQUFmLElBQXNCO0FBQ2xCLDZCQUFhRCxTQURLO0FBRWxCLHdCQUFRQSxVQUFVTSxJQUZBO0FBR2xCLHdCQUFRTixVQUFVTyxJQUhBO0FBSWxCLDhCQUFjUCxVQUFVUSxVQUpOO0FBS2xCLDBCQUFVVixNQUxRLEVBQXRCOztBQU9BQSxzQkFBVUUsVUFBVVMsV0FBcEI7QUFDQVYsZ0NBQW9CVyxLQUFLQyxHQUFMO0FBQ2hCWiw2QkFEZ0I7QUFFaEJDLHNCQUFVRyxVQUZNLENBQXBCO0FBR0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL0J1QixxTkFnQ3ZCLElBQUlMLFNBQVNDLGlCQUFULEtBQStCLENBQW5DLEVBQXNDO0FBQ2xDRCxrQkFBVUMsb0JBQW9CRCxTQUFTQyxpQkFBdkM7QUFDQUssZ0JBQVFDLElBQVIsQ0FBYSxxQ0FBYjtBQUNIO0FBQ0QsU0FBS08sTUFBTCxHQUFjZCxNQUFkLENBcEN1QjtBQXFDdkIsOEJBQXdCRCxVQUF4QixtSUFBb0MsS0FBekJHLFVBQXlCO0FBQ2hDLGlCQUFLQSxXQUFVQyxHQUFmLEVBQW9CVyxNQUFwQixHQUE2QixLQUFLQSxNQUFsQztBQUNILFNBdkNzQjtBQXdDMUIsQzs7OztBQUlMOzs7OztBQUtNViwyQjtBQUNGOzs7OztBQUtBLHFDQUFZRixTQUFaLEVBQXVCO0FBQ25CLFNBQUthLE9BQUwsR0FBZSxnQ0FBZ0NiLFVBQVVDLEdBQXpEO0FBQ0gsQzs7O0FBR0w7Ozs7QUFJTWEsUztBQUNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF3QkEsbUJBQVliLEdBQVosRUFBaUJLLElBQWpCLEVBQXVCQyxJQUF2QixFQUErQyxLQUFsQkMsVUFBa0IsdUVBQVAsS0FBTztBQUMzQyxTQUFLUCxHQUFMLEdBQVdBLEdBQVg7QUFDQSxTQUFLSyxJQUFMLEdBQVlBLElBQVo7QUFDQSxTQUFLQyxJQUFMLEdBQVlBLElBQVo7QUFDQSxTQUFLQyxVQUFMLEdBQWtCLEtBQWxCO0FBQ0EsU0FBS0wsVUFBTCxHQUFrQlksa0JBQWtCUixJQUFsQixDQUFsQjtBQUNBLFNBQUtFLFdBQUwsR0FBbUIsS0FBS04sVUFBTCxHQUFrQkcsSUFBckM7QUFDSCxDOzs7QUFHTDs7Ozs7O0FBTUEsU0FBU1MsaUJBQVQsQ0FBMkJSLElBQTNCLEVBQWlDO0FBQzdCLFlBQVFBLElBQVI7QUFDSSxhQUFLLE1BQUw7QUFDQSxhQUFLLGVBQUw7QUFDSSxtQkFBTyxDQUFQO0FBQ0osYUFBSyxPQUFMO0FBQ0EsYUFBSyxnQkFBTDtBQUNJLG1CQUFPLENBQVA7QUFDSixhQUFLLE9BQUw7QUFDSSxtQkFBTyxDQUFQLENBUlI7O0FBVUg7O0FBRUQ7QUFDQTs7Ozs7QUFLQVgsT0FBT29CLFFBQVAsR0FBa0IsSUFBSUYsU0FBSixDQUFjLFVBQWQsRUFBMEIsQ0FBMUIsRUFBNkIsT0FBN0IsQ0FBbEI7O0FBRUE7Ozs7O0FBS0FsQixPQUFPcUIsTUFBUCxHQUFnQixJQUFJSCxTQUFKLENBQWMsUUFBZCxFQUF3QixDQUF4QixFQUEyQixPQUEzQixDQUFoQjs7QUFFQTs7Ozs7Ozs7O0FBU0FsQixPQUFPc0IsT0FBUCxHQUFpQixJQUFJSixTQUFKLENBQWMsU0FBZCxFQUF5QixDQUF6QixFQUE0QixPQUE1QixDQUFqQjs7QUFFQTs7Ozs7Ozs7QUFRQWxCLE9BQU91QixTQUFQLEdBQW1CLElBQUlMLFNBQUosQ0FBYyxXQUFkLEVBQTJCLENBQTNCLEVBQThCLE9BQTlCLENBQW5COztBQUVBOzs7OztBQUtBbEIsT0FBT3dCLEVBQVAsR0FBWSxJQUFJTixTQUFKLENBQWMsSUFBZCxFQUFvQixDQUFwQixFQUF1QixPQUF2QixDQUFaOztBQUVBOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdDQWxCLE9BQU95QixjQUFQLEdBQXdCLElBQUlQLFNBQUosQ0FBYyxlQUFkLEVBQStCLENBQS9CLEVBQWtDLE9BQWxDLENBQXhCO0FBQ0FsQixPQUFPMEIsZ0JBQVAsR0FBMEIsSUFBSVIsU0FBSixDQUFjLGlCQUFkLEVBQWlDLENBQWpDLEVBQW9DLGdCQUFwQyxDQUExQjtBQUNBbEIsT0FBTzJCLE9BQVAsR0FBaUIsSUFBSVQsU0FBSixDQUFjLFNBQWQsRUFBeUIsQ0FBekIsRUFBNEIsT0FBNUIsQ0FBakI7QUFDQWxCLE9BQU80QixPQUFQLEdBQWlCLElBQUlWLFNBQUosQ0FBYyxTQUFkLEVBQXlCLENBQXpCLEVBQTRCLE9BQTVCLENBQWpCO0FBQ0FsQixPQUFPNkIsUUFBUCxHQUFrQixJQUFJWCxTQUFKLENBQWMsVUFBZCxFQUEwQixDQUExQixFQUE2QixPQUE3QixDQUFsQjtBQUNBbEIsT0FBTzhCLGlCQUFQLEdBQTJCLElBQUlaLFNBQUosQ0FBYyxrQkFBZCxFQUFrQyxDQUFsQyxFQUFxQyxPQUFyQyxDQUEzQjtBQUNBbEIsT0FBTytCLFFBQVAsR0FBa0IsSUFBSWIsU0FBSixDQUFjLFVBQWQsRUFBMEIsQ0FBMUIsRUFBNkIsT0FBN0IsQ0FBbEI7QUFDQWxCLE9BQU9nQyxtQkFBUCxHQUE2QixJQUFJZCxTQUFKLENBQWMsb0JBQWQsRUFBb0MsQ0FBcEMsRUFBdUMsT0FBdkMsQ0FBN0I7QUFDQWxCLE9BQU9pQyxRQUFQLEdBQWtCLElBQUlmLFNBQUosQ0FBYyxVQUFkLEVBQTBCLENBQTFCLEVBQTZCLE9BQTdCLENBQWxCO0FBQ0FsQixPQUFPa0MsWUFBUCxHQUFzQixJQUFJaEIsU0FBSixDQUFjLGNBQWQsRUFBOEIsQ0FBOUIsRUFBaUMsZ0JBQWpDLENBQXRCO0FBQ0FsQixPQUFPbUMsZ0JBQVAsR0FBMEIsSUFBSWpCLFNBQUosQ0FBYyxpQkFBZCxFQUFpQyxDQUFqQyxFQUFvQyxPQUFwQyxDQUExQjtBQUNBbEIsT0FBT29DLFNBQVAsR0FBbUIsSUFBSWxCLFNBQUosQ0FBYyxXQUFkLEVBQTJCLENBQTNCLEVBQThCLE9BQTlCLENBQW5CO0FBQ0FsQixPQUFPcUMsV0FBUCxHQUFxQixJQUFJbkIsU0FBSixDQUFjLFlBQWQsRUFBNEIsQ0FBNUIsRUFBK0IsT0FBL0IsQ0FBckI7QUFDQWxCLE9BQU9zQyxXQUFQLEdBQXFCLElBQUlwQixTQUFKLENBQWMsWUFBZCxFQUE0QixDQUE1QixFQUErQixPQUEvQixDQUFyQjtBQUNBbEIsT0FBT3VDLFlBQVAsR0FBc0IsSUFBSXJCLFNBQUosQ0FBYyxhQUFkLEVBQTZCLENBQTdCLEVBQWdDLE9BQWhDLENBQXRCO0FBQ0FsQixPQUFPd0MscUJBQVAsR0FBK0IsSUFBSXRCLFNBQUosQ0FBYyxxQkFBZCxFQUFxQyxDQUFyQyxFQUF3QyxPQUF4QyxDQUEvQjtBQUNBbEIsT0FBT3lDLFlBQVAsR0FBc0IsSUFBSXZCLFNBQUosQ0FBYyxhQUFkLEVBQTZCLENBQTdCLEVBQWdDLE9BQWhDLENBQXRCO0FBQ0FsQixPQUFPMEMsYUFBUCxHQUF1QixJQUFJeEIsU0FBSixDQUFjLGNBQWQsRUFBOEIsQ0FBOUIsRUFBaUMsZ0JBQWpDLENBQXZCO0FBQ0FsQixPQUFPMkMsUUFBUCxHQUFrQixJQUFJekIsU0FBSixDQUFjLFNBQWQsRUFBeUIsQ0FBekIsRUFBNEIsT0FBNUIsQ0FBbEI7QUFDQWxCLE9BQU80QyxnQkFBUCxHQUEwQixJQUFJMUIsU0FBSixDQUFjLGlCQUFkLEVBQWlDLENBQWpDLEVBQW9DLE9BQXBDLENBQTFCO0FBQ0FsQixPQUFPNkMsU0FBUCxHQUFtQixJQUFJM0IsU0FBSixDQUFjLFVBQWQsRUFBMEIsQ0FBMUIsRUFBNkIsT0FBN0IsQ0FBbkI7QUFDQWxCLE9BQU84QyxZQUFQLEdBQXNCLElBQUk1QixTQUFKLENBQWMsYUFBZCxFQUE2QixDQUE3QixFQUFnQyxPQUFoQyxDQUF0QixDOzs7Ozs7O21tQkM3UEEscUM7O0FBRUE7Ozs7OztBQU1xQjZCLEk7QUFDakI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkEsa0JBQVlDLFVBQVosRUFBd0JDLE9BQXhCLEVBQWlDO0FBQzdCQSxrQkFBVUEsV0FBVyxFQUFyQjtBQUNBQSxnQkFBUUMsU0FBUixHQUFvQkQsUUFBUUMsU0FBUixJQUFxQixFQUF6QztBQUNBRCxnQkFBUUUsbUJBQVIsR0FBOEIsQ0FBQyxDQUFDRixRQUFRRSxtQkFBeEM7QUFDQUYsZ0JBQVFHLGtCQUFSLEdBQTZCLENBQUMsQ0FBQ0gsUUFBUUcsa0JBQXZDOztBQUVBLFlBQUlDLE9BQU8sSUFBWDtBQUNBO0FBQ0FBLGFBQUtDLFFBQUwsR0FBZ0IsRUFBaEI7QUFDQUQsYUFBS0UsYUFBTCxHQUFxQixFQUFyQjtBQUNBRixhQUFLRyxRQUFMLEdBQWdCLEVBQWhCO0FBQ0E7QUFDQUgsYUFBS0ksT0FBTCxHQUFlLEVBQWY7QUFDQUosYUFBS0ssYUFBTCxHQUFxQlQsUUFBUUUsbUJBQVIsR0FBNkIsQ0FBN0IsR0FBaUMsQ0FBdEQ7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5RUEsYUFBS1EsSUFBTCxHQUFZLEVBQVo7QUFDQSxZQUFNQyxRQUFRLEVBQWQ7QUFDQSxZQUFNQyxjQUFjLEVBQXBCO0FBQ0EsWUFBTUwsV0FBVyxFQUFqQjtBQUNBLFlBQU1NLFdBQVcsRUFBakI7QUFDQSxZQUFNQyx1QkFBdUIsRUFBN0I7QUFDQSxZQUFNQyx3QkFBd0IsRUFBOUI7QUFDQTtBQUNBLFlBQUlDLHVCQUF1QixDQUFDLENBQTVCO0FBQ0E7QUFDQSxZQUFJQywrQkFBK0IsQ0FBbkM7QUFDQTtBQUNBSixpQkFBU0YsS0FBVCxHQUFpQixFQUFqQjtBQUNBRSxpQkFBU0ssS0FBVCxHQUFpQixFQUFqQjtBQUNBTCxpQkFBU04sUUFBVCxHQUFvQixFQUFwQjtBQUNBTSxpQkFBU00sV0FBVCxHQUF1QixFQUF2QjtBQUNBTixpQkFBU0wsT0FBVCxHQUFtQixDQUFDLEVBQUQsQ0FBbkI7QUFDQUssaUJBQVNPLGVBQVQsR0FBMkIsRUFBM0I7QUFDQVAsaUJBQVNRLEtBQVQsR0FBaUIsQ0FBakI7O0FBRUEsWUFBTUMsWUFBWSxNQUFsQjtBQUNBLFlBQU1DLFlBQVksT0FBbEI7QUFDQSxZQUFNQyxhQUFhLE9BQW5CO0FBQ0EsWUFBTUMsVUFBVSxNQUFoQjtBQUNBLFlBQU1DLGdCQUFnQixLQUF0QjtBQUNBLFlBQU1DLGtCQUFrQixTQUF4Qjs7QUFFQTtBQUNBLFlBQU1DLFFBQVE3QixXQUFXOEIsS0FBWCxDQUFpQixJQUFqQixDQUFkOztBQUVBLGFBQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJRixNQUFNRyxNQUExQixFQUFrQ0QsR0FBbEMsRUFBdUM7QUFDbkMsZ0JBQU1FLE9BQU9KLE1BQU1FLENBQU4sRUFBU0csSUFBVCxFQUFiO0FBQ0EsZ0JBQUksQ0FBQ0QsSUFBRCxJQUFTQSxLQUFLRSxVQUFMLENBQWdCLEdBQWhCLENBQWIsRUFBbUM7QUFDL0I7QUFDSDtBQUNELGdCQUFNQyxXQUFXSCxLQUFLSCxLQUFMLENBQVdILGFBQVgsQ0FBakI7QUFDQVMscUJBQVNDLEtBQVQ7O0FBRUEsZ0JBQUlkLFVBQVVlLElBQVYsQ0FBZUwsSUFBZixDQUFKLEVBQTBCO0FBQ3RCO0FBQ0FyQixzQkFBTTJCLElBQU4saUNBQWNILFFBQWQ7QUFDSCxhQUhELE1BR08sSUFBSVosVUFBVWMsSUFBVixDQUFlTCxJQUFmLENBQUosRUFBMEI7QUFDN0I7QUFDQXBCLDRCQUFZMEIsSUFBWix1Q0FBb0JILFFBQXBCO0FBQ0gsYUFITSxNQUdBLElBQUlYLFdBQVdhLElBQVgsQ0FBZ0JMLElBQWhCLENBQUosRUFBMkI7QUFDOUIsb0JBQUlPLFNBQVNKLFFBQWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQUlBLFNBQVNKLE1BQVQsR0FBa0IsQ0FBbEIsSUFBdUIsQ0FBQy9CLFFBQVFFLG1CQUFwQyxFQUF5RDtBQUNyRHFDLDZCQUFTSixTQUFTSyxLQUFULENBQWUsQ0FBZixFQUFrQixDQUFsQixDQUFUO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQU5BLHFCQU9LLElBQUlMLFNBQVNKLE1BQVQsS0FBb0IsQ0FBcEIsSUFBeUIvQixRQUFRRSxtQkFBckMsRUFBMEQ7QUFDM0RxQywrQkFBT0QsSUFBUCxDQUFZLENBQVo7QUFDSDtBQUNEL0IseUJBQVMrQixJQUFULG9DQUFpQkMsTUFBakI7QUFDSCxhQWxCTSxNQWtCQSxJQUFJWixnQkFBZ0JVLElBQWhCLENBQXFCTCxJQUFyQixDQUFKLEVBQWdDO0FBQ25DLG9CQUFNUyxlQUFlTixTQUFTLENBQVQsQ0FBckI7O0FBRUE7QUFDQSxvQkFBSSxFQUFFTSxnQkFBZ0IxQixxQkFBbEIsQ0FBSixFQUE4QztBQUMxQztBQUNBRCx5Q0FBcUJ3QixJQUFyQixDQUEwQkcsWUFBMUI7QUFDQTFCLDBDQUFzQjBCLFlBQXRCLElBQXNDM0IscUJBQXFCaUIsTUFBckIsR0FBOEIsQ0FBcEU7QUFDQTtBQUNBLHdCQUFJL0IsUUFBUUcsa0JBQVosRUFBZ0M7QUFDNUI7QUFDQSw0QkFBSVksc0JBQXNCMEIsWUFBdEIsSUFBc0MsQ0FBMUMsRUFBNkM7QUFDekM1QixxQ0FBU0wsT0FBVCxDQUFpQjhCLElBQWpCLENBQXNCLEVBQXRCO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDQXRCLHVDQUF1QkQsc0JBQXNCMEIsWUFBdEIsQ0FBdkI7QUFDQTtBQUNBLG9CQUFJekMsUUFBUUcsa0JBQVosRUFBZ0M7QUFDNUJjLG1EQUErQkQsb0JBQS9CO0FBQ0g7QUFDSixhQXRCTSxNQXNCQSxJQUFJUyxRQUFRWSxJQUFSLENBQWFMLElBQWIsQ0FBSixFQUF3QjtBQUMzQjtBQUNBOzs7Ozs7O0FBT0Esb0JBQUlVLE9BQU8sS0FBWDtBQUNBLHFCQUFLLElBQUlDLElBQUksQ0FBUixFQUFXQyxTQUFTVCxTQUFTSixNQUFsQyxFQUEwQ1ksSUFBSUMsTUFBOUMsRUFBc0RELEdBQXRELEVBQTJEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBSUEsTUFBTSxDQUFOLElBQVcsQ0FBQ0QsSUFBaEIsRUFBc0I7QUFDbEI7QUFDQUMsNEJBQUksQ0FBSjtBQUNBRCwrQkFBTyxJQUFQO0FBQ0g7QUFDRCx3QkFBTUcsUUFBUVYsU0FBUyxDQUFULElBQWMsR0FBZCxHQUFvQm5CLG9CQUFsQztBQUNBLHdCQUFNOEIsT0FBT1gsU0FBU1EsQ0FBVCxJQUFjLEdBQWQsR0FBb0IzQixvQkFBakM7QUFDQSx3QkFBSThCLFFBQVFqQyxTQUFTTSxXQUFyQixFQUFrQztBQUM5Qk4saUNBQVNMLE9BQVQsQ0FBaUJTLDRCQUFqQixFQUErQ3FCLElBQS9DLENBQW9EekIsU0FBU00sV0FBVCxDQUFxQjJCLElBQXJCLENBQXBEO0FBQ0gscUJBRkQsTUFFTztBQUNIOzs7Ozs7Ozs7Ozs7OztBQWNBLDRCQUFJQyxTQUFTWixTQUFTUSxDQUFULEVBQVlkLEtBQVosQ0FBa0IsR0FBbEIsQ0FBYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQUltQixjQUFjRCxPQUFPaEIsTUFBUCxHQUFnQixDQUFsQztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBO0FBQ0FsQixpQ0FBU0YsS0FBVCxDQUFlMkIsSUFBZixDQUFvQixDQUFDM0IsTUFBTSxDQUFDb0MsT0FBTyxDQUFQLElBQVksQ0FBYixJQUFrQixDQUFsQixHQUFzQixDQUE1QixDQUFyQjtBQUNBbEMsaUNBQVNGLEtBQVQsQ0FBZTJCLElBQWYsQ0FBb0IsQ0FBQzNCLE1BQU0sQ0FBQ29DLE9BQU8sQ0FBUCxJQUFZLENBQWIsSUFBa0IsQ0FBbEIsR0FBc0IsQ0FBNUIsQ0FBckI7QUFDQWxDLGlDQUFTRixLQUFULENBQWUyQixJQUFmLENBQW9CLENBQUMzQixNQUFNLENBQUNvQyxPQUFPLENBQVAsSUFBWSxDQUFiLElBQWtCLENBQWxCLEdBQXNCLENBQTVCLENBQXJCO0FBQ0E7QUFDQSw0QkFBSXhDLFNBQVN3QixNQUFiLEVBQXFCO0FBQ2pCLGdDQUFJaEUsU0FBU2lDLFFBQVFFLG1CQUFSLEdBQTZCLENBQTdCLEdBQWlDLENBQTlDO0FBQ0FXLHFDQUFTTixRQUFULENBQWtCK0IsSUFBbEIsQ0FBdUIsQ0FBQy9CLFNBQVMsQ0FBQ3dDLE9BQU8sQ0FBUCxJQUFZLENBQWIsSUFBa0JoRixNQUFsQixHQUEyQixDQUFwQyxDQUF4QjtBQUNBOEMscUNBQVNOLFFBQVQsQ0FBa0IrQixJQUFsQixDQUF1QixDQUFDL0IsU0FBUyxDQUFDd0MsT0FBTyxDQUFQLElBQVksQ0FBYixJQUFrQmhGLE1BQWxCLEdBQTJCLENBQXBDLENBQXhCO0FBQ0EsZ0NBQUlpQyxRQUFRRSxtQkFBWixFQUFpQztBQUM3QlcseUNBQVNOLFFBQVQsQ0FBa0IrQixJQUFsQixDQUF1QixDQUFDL0IsU0FBUyxDQUFDd0MsT0FBTyxDQUFQLElBQVksQ0FBYixJQUFrQmhGLE1BQWxCLEdBQTJCLENBQXBDLENBQXhCO0FBQ0g7QUFDSjtBQUNEO0FBQ0E4QyxpQ0FBU0ssS0FBVCxDQUFlb0IsSUFBZixDQUFvQixDQUFDMUIsWUFBWSxDQUFDbUMsT0FBT0MsV0FBUCxJQUFzQixDQUF2QixJQUE0QixDQUE1QixHQUFnQyxDQUE1QyxDQUFyQjtBQUNBbkMsaUNBQVNLLEtBQVQsQ0FBZW9CLElBQWYsQ0FBb0IsQ0FBQzFCLFlBQVksQ0FBQ21DLE9BQU9DLFdBQVAsSUFBc0IsQ0FBdkIsSUFBNEIsQ0FBNUIsR0FBZ0MsQ0FBNUMsQ0FBckI7QUFDQW5DLGlDQUFTSyxLQUFULENBQWVvQixJQUFmLENBQW9CLENBQUMxQixZQUFZLENBQUNtQyxPQUFPQyxXQUFQLElBQXNCLENBQXZCLElBQTRCLENBQTVCLEdBQWdDLENBQTVDLENBQXJCO0FBQ0E7QUFDQW5DLGlDQUFTTyxlQUFULENBQXlCa0IsSUFBekIsQ0FBOEJ0QixvQkFBOUI7QUFDQTtBQUNBSCxpQ0FBU00sV0FBVCxDQUFxQjJCLElBQXJCLElBQTZCakMsU0FBU1EsS0FBdEM7QUFDQVIsaUNBQVNMLE9BQVQsQ0FBaUJTLDRCQUFqQixFQUErQ3FCLElBQS9DLENBQW9EekIsU0FBU00sV0FBVCxDQUFxQjJCLElBQXJCLENBQXBEO0FBQ0E7QUFDQWpDLGlDQUFTUSxLQUFULElBQWtCLENBQWxCO0FBQ0g7QUFDRCx3QkFBSXNCLE1BQU0sQ0FBTixJQUFXRCxJQUFmLEVBQXFCO0FBQ2pCO0FBQ0E3QixpQ0FBU0wsT0FBVCxDQUFpQlMsNEJBQWpCLEVBQStDcUIsSUFBL0MsQ0FBb0R6QixTQUFTTSxXQUFULENBQXFCMEIsS0FBckIsQ0FBcEQ7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUNEekMsYUFBS0MsUUFBTCxHQUFnQlEsU0FBU0YsS0FBekI7QUFDQVAsYUFBS0UsYUFBTCxHQUFxQk8sU0FBU0ssS0FBOUI7QUFDQWQsYUFBS0csUUFBTCxHQUFnQk0sU0FBU04sUUFBekI7QUFDQUgsYUFBSzZDLHFCQUFMLEdBQTZCcEMsU0FBU08sZUFBdEM7QUFDQWhCLGFBQUtJLE9BQUwsR0FBZVIsUUFBUUcsa0JBQVIsR0FBNkJVLFNBQVNMLE9BQXRDLEdBQWdESyxTQUFTTCxPQUFULENBQWlCUyw0QkFBakIsQ0FBL0Q7O0FBRUFiLGFBQUs4QyxhQUFMLEdBQXFCcEMsb0JBQXJCO0FBQ0FWLGFBQUtnQixlQUFMLEdBQXVCTCxxQkFBdkI7QUFDQVgsYUFBSytDLGdCQUFMLEdBQXdCLEVBQXhCOztBQUVBLFlBQUluRCxRQUFRb0QseUJBQVosRUFBdUM7QUFDbkMsaUJBQUtDLDhCQUFMO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7O0FBU2lDO0FBQzdCOUYsb0JBQVErRixNQUFSLENBQWUsS0FBS2pELFFBQUwsSUFBaUIsS0FBS0EsUUFBTCxDQUFjMEIsTUFBL0I7QUFDWCxpQkFBS3pCLGFBRE0sSUFDVyxLQUFLQSxhQUFMLENBQW1CeUIsTUFEOUI7QUFFWCxpQkFBS3hCLFFBRk0sSUFFTSxLQUFLQSxRQUFMLENBQWN3QixNQUZuQyxFQUUyQyw0REFGM0M7O0FBSUEsZ0JBQU1sQixXQUFXLEVBQWpCO0FBQ0FBLHFCQUFTMEMsUUFBVCxHQUFvQiw2QkFBSSxJQUFJQyxLQUFKLENBQVUsS0FBS25ELFFBQUwsQ0FBYzBCLE1BQXhCLENBQUosR0FBcUMwQixHQUFyQyxDQUF5QyxxQkFBSyxDQUFMLEVBQXpDLENBQXBCO0FBQ0E1QyxxQkFBUzZDLFVBQVQsR0FBc0IsNkJBQUksSUFBSUYsS0FBSixDQUFVLEtBQUtuRCxRQUFMLENBQWMwQixNQUF4QixDQUFKLEdBQXFDMEIsR0FBckMsQ0FBeUMscUJBQUssQ0FBTCxFQUF6QyxDQUF0Qjs7QUFFQTtBQUNBLGdCQUFJakQsZ0JBQUo7QUFDQTtBQUNBLGdCQUFJZ0QsTUFBTUcsT0FBTixDQUFjLEtBQUtuRCxPQUFMLENBQWEsQ0FBYixDQUFkLENBQUosRUFBb0M7QUFDaENBLDBCQUFVLEdBQUdvRCxNQUFILENBQVVDLEtBQVYsQ0FBZ0IsRUFBaEIsRUFBb0IsS0FBS3JELE9BQXpCLENBQVY7QUFDSCxhQUZELE1BRU87QUFDSEEsMEJBQVUsS0FBS0EsT0FBZjtBQUNIOztBQUVELGdCQUFNSCxXQUFXLEtBQUtBLFFBQXRCO0FBQ0EsZ0JBQU15RCxVQUFVLEtBQUt4RCxhQUFyQjtBQUNBLGdCQUFNeUQsTUFBTSxLQUFLeEQsUUFBakI7O0FBRUEsaUJBQUssSUFBSXVCLElBQUksQ0FBYixFQUFnQkEsSUFBSXRCLFFBQVF1QixNQUE1QixFQUFvQ0QsS0FBSSxDQUF4QyxFQUEyQztBQUN2QyxvQkFBTWtDLEtBQUt4RCxRQUFRc0IsSUFBSSxDQUFaLENBQVg7QUFDQSxvQkFBTW1DLEtBQUt6RCxRQUFRc0IsSUFBSSxDQUFaLENBQVg7QUFDQSxvQkFBTW9DLEtBQUsxRCxRQUFRc0IsSUFBSSxDQUFaLENBQVg7O0FBRUEsb0JBQU1xQyxPQUFPOUQsU0FBUzJELEtBQUssQ0FBTCxHQUFTLENBQWxCLENBQWI7QUFDQSxvQkFBTUksT0FBTy9ELFNBQVMyRCxLQUFLLENBQUwsR0FBUyxDQUFsQixDQUFiO0FBQ0Esb0JBQU1LLE9BQU9oRSxTQUFTMkQsS0FBSyxDQUFMLEdBQVMsQ0FBbEIsQ0FBYjs7QUFFQSxvQkFBTU0sUUFBUVAsSUFBSUMsS0FBSyxDQUFMLEdBQVMsQ0FBYixDQUFkO0FBQ0Esb0JBQU1PLFFBQVFSLElBQUlDLEtBQUssQ0FBTCxHQUFTLENBQWIsQ0FBZDs7QUFFQSxvQkFBTVEsT0FBT25FLFNBQVM0RCxLQUFLLENBQUwsR0FBUyxDQUFsQixDQUFiO0FBQ0Esb0JBQU1RLE9BQU9wRSxTQUFTNEQsS0FBSyxDQUFMLEdBQVMsQ0FBbEIsQ0FBYjtBQUNBLG9CQUFNUyxPQUFPckUsU0FBUzRELEtBQUssQ0FBTCxHQUFTLENBQWxCLENBQWI7O0FBRUEsb0JBQU1VLFFBQVFaLElBQUlFLEtBQUssQ0FBTCxHQUFTLENBQWIsQ0FBZDtBQUNBLG9CQUFNVyxRQUFRYixJQUFJRSxLQUFLLENBQUwsR0FBUyxDQUFiLENBQWQ7O0FBRUEsb0JBQU1ZLE9BQU94RSxTQUFTNkQsS0FBSyxDQUFMLEdBQVMsQ0FBbEIsQ0FBYjtBQUNBLG9CQUFNWSxPQUFPekUsU0FBUzZELEtBQUssQ0FBTCxHQUFTLENBQWxCLENBQWI7QUFDQSxvQkFBTWEsT0FBTzFFLFNBQVM2RCxLQUFLLENBQUwsR0FBUyxDQUFsQixDQUFiOztBQUVBLG9CQUFNYyxRQUFRakIsSUFBSUcsS0FBSyxDQUFMLEdBQVMsQ0FBYixDQUFkO0FBQ0Esb0JBQU1lLFFBQVFsQixJQUFJRyxLQUFLLENBQUwsR0FBUyxDQUFiLENBQWQ7O0FBRUEsb0JBQU1nQixjQUFjVixPQUFPTCxJQUEzQjtBQUNBLG9CQUFNZ0IsY0FBY1YsT0FBT0wsSUFBM0I7QUFDQSxvQkFBTWdCLGNBQWNWLE9BQU9MLElBQTNCOztBQUVBLG9CQUFNZ0IsY0FBY1IsT0FBT1YsSUFBM0I7QUFDQSxvQkFBTW1CLGNBQWNSLE9BQU9WLElBQTNCO0FBQ0Esb0JBQU1tQixjQUFjUixPQUFPVixJQUEzQjs7QUFFQSxvQkFBTW1CLGdCQUFnQmIsUUFBUUwsS0FBOUI7QUFDQSxvQkFBTW1CLGdCQUFnQmIsUUFBUUwsS0FBOUI7O0FBRUEsb0JBQU1tQixnQkFBZ0JWLFFBQVFWLEtBQTlCO0FBQ0Esb0JBQU1xQixnQkFBZ0JWLFFBQVFWLEtBQTlCOztBQUVBLG9CQUFNcUIsT0FBT0osZ0JBQWdCRyxhQUFoQixHQUFnQ0YsZ0JBQWdCQyxhQUE3RDtBQUNBLG9CQUFNRyxJQUFJLE9BQU9oSSxLQUFLaUksR0FBTCxDQUFTRixPQUFPLE1BQWhCLElBQTBCLEdBQTFCLEdBQWdDQSxJQUF2QyxDQUFWOztBQUVBO0FBQ0Esb0JBQU1HLFlBQVksQ0FBQ2IsY0FBY1MsYUFBZCxHQUE4Qk4sY0FBY0ksYUFBN0MsSUFBOERJLENBQWhGO0FBQ0Esb0JBQU1HLFlBQVksQ0FBQ2IsY0FBY1EsYUFBZCxHQUE4QkwsY0FBY0csYUFBN0MsSUFBOERJLENBQWhGO0FBQ0Esb0JBQU1JLFlBQVksQ0FBQ2IsY0FBY08sYUFBZCxHQUE4QkosY0FBY0UsYUFBN0MsSUFBOERJLENBQWhGOztBQUVBO0FBQ0Esb0JBQU1LLGNBQWMsQ0FBQ2IsY0FBY0csYUFBZCxHQUE4Qk4sY0FBY1EsYUFBN0MsSUFBOERHLENBQWxGO0FBQ0Esb0JBQU1NLGNBQWMsQ0FBQ2IsY0FBY0UsYUFBZCxHQUE4QkwsY0FBY08sYUFBN0MsSUFBOERHLENBQWxGO0FBQ0Esb0JBQU1PLGNBQWMsQ0FBQ2IsY0FBY0MsYUFBZCxHQUE4QkosY0FBY00sYUFBN0MsSUFBOERHLENBQWxGOztBQUVBO0FBQ0E7QUFDQSxvQkFBTVEsT0FBT3ZDLFFBQVFFLEtBQUssQ0FBTCxHQUFTLENBQWpCLENBQWI7QUFDQSxvQkFBTXNDLE9BQU94QyxRQUFRRSxLQUFLLENBQUwsR0FBUyxDQUFqQixDQUFiO0FBQ0Esb0JBQU11QyxPQUFPekMsUUFBUUUsS0FBSyxDQUFMLEdBQVMsQ0FBakIsQ0FBYjs7QUFFQSxvQkFBTXdDLE9BQU8xQyxRQUFRRyxLQUFLLENBQUwsR0FBUyxDQUFqQixDQUFiO0FBQ0Esb0JBQU13QyxPQUFPM0MsUUFBUUcsS0FBSyxDQUFMLEdBQVMsQ0FBakIsQ0FBYjtBQUNBLG9CQUFNeUMsT0FBTzVDLFFBQVFHLEtBQUssQ0FBTCxHQUFTLENBQWpCLENBQWI7O0FBRUEsb0JBQU0wQyxPQUFPN0MsUUFBUUksS0FBSyxDQUFMLEdBQVMsQ0FBakIsQ0FBYjtBQUNBLG9CQUFNMEMsT0FBTzlDLFFBQVFJLEtBQUssQ0FBTCxHQUFTLENBQWpCLENBQWI7QUFDQSxvQkFBTTJDLE9BQU8vQyxRQUFRSSxLQUFLLENBQUwsR0FBUyxDQUFqQixDQUFiOztBQUVBO0FBQ0Esb0JBQU00QyxXQUFXZixZQUFZTSxJQUFaLEdBQW1CTCxZQUFZTSxJQUEvQixHQUFzQ0wsWUFBWU0sSUFBbkU7QUFDQSxvQkFBTVEsV0FBV2hCLFlBQVlTLElBQVosR0FBbUJSLFlBQVlTLElBQS9CLEdBQXNDUixZQUFZUyxJQUFuRTtBQUNBLG9CQUFNTSxXQUFXakIsWUFBWVksSUFBWixHQUFtQlgsWUFBWVksSUFBL0IsR0FBc0NYLFlBQVlZLElBQW5FOztBQUVBLG9CQUFNSSxnQkFBZ0JsQixZQUFZTSxPQUFPUyxRQUF6QztBQUNBLG9CQUFNSSxnQkFBZ0JsQixZQUFZTSxPQUFPUSxRQUF6QztBQUNBLG9CQUFNSyxnQkFBZ0JsQixZQUFZTSxPQUFPTyxRQUF6Qzs7QUFFQSxvQkFBTU0sZ0JBQWdCckIsWUFBWVMsT0FBT08sUUFBekM7QUFDQSxvQkFBTU0sZ0JBQWdCckIsWUFBWVMsT0FBT00sUUFBekM7QUFDQSxvQkFBTU8sZ0JBQWdCckIsWUFBWVMsT0FBT0ssUUFBekM7O0FBRUEsb0JBQU1RLGdCQUFnQnhCLFlBQVlZLE9BQU9LLFFBQXpDO0FBQ0Esb0JBQU1RLGdCQUFnQnhCLFlBQVlZLE9BQU9JLFFBQXpDO0FBQ0Esb0JBQU1TLGdCQUFnQnhCLFlBQVlZLE9BQU9HLFFBQXpDOztBQUVBLG9CQUFNVSxjQUFjN0osS0FBSzhKLElBQUwsQ0FBVVYsZ0JBQWdCQSxhQUFoQixHQUFnQ0MsZ0JBQWdCQSxhQUFoRCxHQUFnRUMsZ0JBQWdCQSxhQUExRixDQUFwQjtBQUNBLG9CQUFNUyxjQUFjL0osS0FBSzhKLElBQUwsQ0FBVVAsZ0JBQWdCQSxhQUFoQixHQUFnQ0MsZ0JBQWdCQSxhQUFoRCxHQUFnRUMsZ0JBQWdCQSxhQUExRixDQUFwQjtBQUNBLG9CQUFNTyxjQUFjaEssS0FBSzhKLElBQUwsQ0FBVUosZ0JBQWdCQSxhQUFoQixHQUFnQ0MsZ0JBQWdCQSxhQUFoRCxHQUFnRUMsZ0JBQWdCQSxhQUExRixDQUFwQjs7QUFFQTtBQUNBLG9CQUFNSyxZQUFZNUIsY0FBY0csSUFBZCxHQUFxQkYsY0FBY0csSUFBbkMsR0FBMENGLGNBQWNHLElBQTFFO0FBQ0Esb0JBQU13QixZQUFZN0IsY0FBY00sSUFBZCxHQUFxQkwsY0FBY00sSUFBbkMsR0FBMENMLGNBQWNNLElBQTFFO0FBQ0Esb0JBQU1zQixZQUFZOUIsY0FBY1MsSUFBZCxHQUFxQlIsY0FBY1MsSUFBbkMsR0FBMENSLGNBQWNTLElBQTFFOztBQUVBLG9CQUFNb0Isa0JBQWtCL0IsY0FBY0csT0FBT3lCLFNBQTdDO0FBQ0Esb0JBQU1JLGtCQUFrQi9CLGNBQWNHLE9BQU93QixTQUE3QztBQUNBLG9CQUFNSyxrQkFBa0IvQixjQUFjRyxPQUFPdUIsU0FBN0M7O0FBRUEsb0JBQU1NLGtCQUFrQmxDLGNBQWNNLE9BQU91QixTQUE3QztBQUNBLG9CQUFNTSxrQkFBa0JsQyxjQUFjTSxPQUFPc0IsU0FBN0M7QUFDQSxvQkFBTU8sa0JBQWtCbEMsY0FBY00sT0FBT3FCLFNBQTdDOztBQUVBLG9CQUFNUSxrQkFBa0JyQyxjQUFjUyxPQUFPcUIsU0FBN0M7QUFDQSxvQkFBTVEsa0JBQWtCckMsY0FBY1MsT0FBT29CLFNBQTdDO0FBQ0Esb0JBQU1TLGtCQUFrQnJDLGNBQWNTLE9BQU9tQixTQUE3Qzs7QUFFQSxvQkFBTVUsZ0JBQWdCN0ssS0FBSzhKLElBQUwsQ0FBVU0sa0JBQWtCQSxlQUFsQixHQUFvQ0Msa0JBQWtCQSxlQUF0RCxHQUF3RUMsa0JBQWtCQSxlQUFwRyxDQUF0QjtBQUNBLG9CQUFNUSxnQkFBZ0I5SyxLQUFLOEosSUFBTCxDQUFVUyxrQkFBa0JBLGVBQWxCLEdBQW9DQyxrQkFBa0JBLGVBQXRELEdBQXdFQyxrQkFBa0JBLGVBQXBHLENBQXRCO0FBQ0Esb0JBQU1NLGdCQUFnQi9LLEtBQUs4SixJQUFMLENBQVVZLGtCQUFrQkEsZUFBbEIsR0FBb0NDLGtCQUFrQkEsZUFBdEQsR0FBd0VDLGtCQUFrQkEsZUFBcEcsQ0FBdEI7O0FBRUE1SCx5QkFBUzBDLFFBQVQsQ0FBa0JTLEtBQUssQ0FBTCxHQUFTLENBQTNCLEtBQWlDaUQsZ0JBQWdCUyxXQUFqRDtBQUNBN0cseUJBQVMwQyxRQUFULENBQWtCUyxLQUFLLENBQUwsR0FBUyxDQUEzQixLQUFpQ2tELGdCQUFnQlEsV0FBakQ7QUFDQTdHLHlCQUFTMEMsUUFBVCxDQUFrQlMsS0FBSyxDQUFMLEdBQVMsQ0FBM0IsS0FBaUNtRCxnQkFBZ0JPLFdBQWpEOztBQUVBN0cseUJBQVMwQyxRQUFULENBQWtCVSxLQUFLLENBQUwsR0FBUyxDQUEzQixLQUFpQ21ELGdCQUFnQlEsV0FBakQ7QUFDQS9HLHlCQUFTMEMsUUFBVCxDQUFrQlUsS0FBSyxDQUFMLEdBQVMsQ0FBM0IsS0FBaUNvRCxnQkFBZ0JPLFdBQWpEO0FBQ0EvRyx5QkFBUzBDLFFBQVQsQ0FBa0JVLEtBQUssQ0FBTCxHQUFTLENBQTNCLEtBQWlDcUQsZ0JBQWdCTSxXQUFqRDs7QUFFQS9HLHlCQUFTMEMsUUFBVCxDQUFrQlcsS0FBSyxDQUFMLEdBQVMsQ0FBM0IsS0FBaUNxRCxnQkFBZ0JNLFdBQWpEO0FBQ0FoSCx5QkFBUzBDLFFBQVQsQ0FBa0JXLEtBQUssQ0FBTCxHQUFTLENBQTNCLEtBQWlDc0QsZ0JBQWdCSyxXQUFqRDtBQUNBaEgseUJBQVMwQyxRQUFULENBQWtCVyxLQUFLLENBQUwsR0FBUyxDQUEzQixLQUFpQ3VELGdCQUFnQkksV0FBakQ7O0FBRUFoSCx5QkFBUzZDLFVBQVQsQ0FBb0JNLEtBQUssQ0FBTCxHQUFTLENBQTdCLEtBQW1DaUUsa0JBQWtCUyxhQUFyRDtBQUNBN0gseUJBQVM2QyxVQUFULENBQW9CTSxLQUFLLENBQUwsR0FBUyxDQUE3QixLQUFtQ2tFLGtCQUFrQlEsYUFBckQ7QUFDQTdILHlCQUFTNkMsVUFBVCxDQUFvQk0sS0FBSyxDQUFMLEdBQVMsQ0FBN0IsS0FBbUNtRSxrQkFBa0JPLGFBQXJEOztBQUVBN0gseUJBQVM2QyxVQUFULENBQW9CTyxLQUFLLENBQUwsR0FBUyxDQUE3QixLQUFtQ21FLGtCQUFrQk8sYUFBckQ7QUFDQTlILHlCQUFTNkMsVUFBVCxDQUFvQk8sS0FBSyxDQUFMLEdBQVMsQ0FBN0IsS0FBbUNvRSxrQkFBa0JNLGFBQXJEO0FBQ0E5SCx5QkFBUzZDLFVBQVQsQ0FBb0JPLEtBQUssQ0FBTCxHQUFTLENBQTdCLEtBQW1DcUUsa0JBQWtCSyxhQUFyRDs7QUFFQTlILHlCQUFTNkMsVUFBVCxDQUFvQlEsS0FBSyxDQUFMLEdBQVMsQ0FBN0IsS0FBbUNxRSxrQkFBa0JLLGFBQXJEO0FBQ0EvSCx5QkFBUzZDLFVBQVQsQ0FBb0JRLEtBQUssQ0FBTCxHQUFTLENBQTdCLEtBQW1Dc0Usa0JBQWtCSSxhQUFyRDtBQUNBL0gseUJBQVM2QyxVQUFULENBQW9CUSxLQUFLLENBQUwsR0FBUyxDQUE3QixLQUFtQ3VFLGtCQUFrQkcsYUFBckQ7O0FBRUE7QUFDSDs7QUFFRCxpQkFBS3JGLFFBQUwsR0FBZ0IxQyxTQUFTMEMsUUFBekI7QUFDQSxpQkFBS0csVUFBTCxHQUFrQjdDLFNBQVM2QyxVQUEzQjtBQUNIOztBQUVEOzs7OztBQUtlbUYsYyxFQUFRO0FBQ25CLGdCQUFNQyxXQUFXLEtBQUt6SSxRQUFMLENBQWMwQixNQUFkLEdBQXVCLENBQXhDO0FBQ0EsZ0JBQU1nSCxTQUFTLElBQUlDLFdBQUosQ0FBZ0JILE9BQU85SyxNQUFQLEdBQWdCK0ssUUFBaEMsQ0FBZjtBQUNBQyxtQkFBT0QsUUFBUCxHQUFrQkEsUUFBbEI7QUFDQSxnQkFBTUcsV0FBVyxJQUFJQyxRQUFKLENBQWFILE1BQWIsQ0FBakI7QUFDQSxpQkFBSyxJQUFJakgsSUFBSSxDQUFSLEVBQVdxSCxlQUFlLENBQS9CLEVBQWtDckgsSUFBSWdILFFBQXRDLEVBQWdEaEgsR0FBaEQsRUFBcUQ7QUFDakRxSCwrQkFBZXJILElBQUkrRyxPQUFPOUssTUFBMUI7QUFDQTtBQUNBO0FBSGlELHVIQUlqRCxxQkFBd0I4SyxPQUFPN0wsVUFBL0IsOEhBQTJDLEtBQWhDRyxTQUFnQztBQUN2Qyw0QkFBTUYsU0FBU2tNLGVBQWVOLE9BQU8xTCxVQUFVQyxHQUFqQixFQUFzQkgsTUFBcEQ7QUFDQSxnQ0FBUUUsVUFBVUMsR0FBbEI7QUFDSSxpQ0FBSyxlQUFPZSxRQUFQLENBQWdCZixHQUFyQjtBQUNJNkwseUNBQVNHLFVBQVQsQ0FBb0JuTSxNQUFwQixFQUE0QixLQUFLb0QsUUFBTCxDQUFjeUIsSUFBSSxDQUFsQixDQUE1QixFQUFrRCxJQUFsRDtBQUNBbUgseUNBQVNHLFVBQVQsQ0FBb0JuTSxTQUFTLENBQTdCLEVBQWdDLEtBQUtvRCxRQUFMLENBQWN5QixJQUFJLENBQUosR0FBUSxDQUF0QixDQUFoQyxFQUEwRCxJQUExRDtBQUNBbUgseUNBQVNHLFVBQVQsQ0FBb0JuTSxTQUFTLENBQTdCLEVBQWdDLEtBQUtvRCxRQUFMLENBQWN5QixJQUFJLENBQUosR0FBUSxDQUF0QixDQUFoQyxFQUEwRCxJQUExRDtBQUNBO0FBQ0osaUNBQUssZUFBT3ZELEVBQVAsQ0FBVW5CLEdBQWY7QUFDSTZMLHlDQUFTRyxVQUFULENBQW9Cbk0sTUFBcEIsRUFBNEIsS0FBS3NELFFBQUwsQ0FBY3VCLElBQUksQ0FBbEIsQ0FBNUIsRUFBa0QsSUFBbEQ7QUFDQW1ILHlDQUFTRyxVQUFULENBQW9Cbk0sU0FBUyxDQUE3QixFQUFnQyxLQUFLb0QsUUFBTCxDQUFjeUIsSUFBSSxDQUFKLEdBQVEsQ0FBdEIsQ0FBaEMsRUFBMEQsSUFBMUQ7QUFDQTtBQUNKLGlDQUFLLGVBQU8xRCxNQUFQLENBQWNoQixHQUFuQjtBQUNJNkwseUNBQVNHLFVBQVQsQ0FBb0JuTSxNQUFwQixFQUE0QixLQUFLcUQsYUFBTCxDQUFtQndCLElBQUksQ0FBdkIsQ0FBNUIsRUFBdUQsSUFBdkQ7QUFDQW1ILHlDQUFTRyxVQUFULENBQW9Cbk0sU0FBUyxDQUE3QixFQUFnQyxLQUFLcUQsYUFBTCxDQUFtQndCLElBQUksQ0FBSixHQUFRLENBQTNCLENBQWhDLEVBQStELElBQS9EO0FBQ0FtSCx5Q0FBU0csVUFBVCxDQUFvQm5NLFNBQVMsQ0FBN0IsRUFBZ0MsS0FBS3FELGFBQUwsQ0FBbUJ3QixJQUFJLENBQUosR0FBUSxDQUEzQixDQUFoQyxFQUErRCxJQUEvRDtBQUNBO0FBQ0osaUNBQUssZUFBT3RELGNBQVAsQ0FBc0JwQixHQUEzQjtBQUNJNkwseUNBQVNJLFFBQVQsQ0FBa0JwTSxNQUFsQixFQUEwQixLQUFLZ0cscUJBQUwsQ0FBMkJuQixDQUEzQixDQUExQixFQUF5RCxJQUF6RDtBQUNBO0FBQ0osaUNBQUssZUFBT3BELE9BQVAsQ0FBZXRCLEdBQXBCLENBQXlCO0FBQ3JCLHdDQUFNa00sZ0JBQWdCLEtBQUtyRyxxQkFBTCxDQUEyQm5CLENBQTNCLENBQXRCO0FBQ0Esd0NBQU15SCxXQUFXLEtBQUtwRyxnQkFBTCxDQUFzQm1HLGFBQXRCLENBQWpCO0FBQ0Esd0NBQUksQ0FBQ0MsUUFBTCxFQUFlO0FBQ1hoTSxnREFBUUMsSUFBUixDQUFhLGVBQWUsS0FBSzBGLGFBQUwsQ0FBbUJvRyxhQUFuQixDQUFmLEdBQW1ELHVFQUFoRTtBQUNBO0FBQ0g7QUFDREwsNkNBQVNHLFVBQVQsQ0FBb0JuTSxNQUFwQixFQUE0QnNNLFNBQVNDLE9BQVQsQ0FBaUIsQ0FBakIsQ0FBNUIsRUFBaUQsSUFBakQ7QUFDQVAsNkNBQVNHLFVBQVQsQ0FBb0JuTSxTQUFTLENBQTdCLEVBQWdDc00sU0FBU0MsT0FBVCxDQUFpQixDQUFqQixDQUFoQyxFQUFxRCxJQUFyRDtBQUNBUCw2Q0FBU0csVUFBVCxDQUFvQm5NLFNBQVMsQ0FBN0IsRUFBZ0NzTSxTQUFTQyxPQUFULENBQWlCLENBQWpCLENBQWhDLEVBQXFELElBQXJEO0FBQ0E7QUFDSDtBQUNELGlDQUFLLGVBQU83SyxPQUFQLENBQWV2QixHQUFwQixDQUF5QjtBQUNyQix3Q0FBTWtNLGlCQUFnQixLQUFLckcscUJBQUwsQ0FBMkJuQixDQUEzQixDQUF0QjtBQUNBLHdDQUFNeUgsWUFBVyxLQUFLcEcsZ0JBQUwsQ0FBc0JtRyxjQUF0QixDQUFqQjtBQUNBLHdDQUFJLENBQUNDLFNBQUwsRUFBZTtBQUNYaE0sZ0RBQVFDLElBQVIsQ0FBYSxlQUFlLEtBQUswRixhQUFMLENBQW1Cb0csY0FBbkIsQ0FBZixHQUFtRCx1RUFBaEU7QUFDQTtBQUNIO0FBQ0RMLDZDQUFTRyxVQUFULENBQW9Cbk0sTUFBcEIsRUFBNEJzTSxVQUFTRSxPQUFULENBQWlCLENBQWpCLENBQTVCLEVBQWlELElBQWpEO0FBQ0FSLDZDQUFTRyxVQUFULENBQW9Cbk0sU0FBUyxDQUE3QixFQUFnQ3NNLFVBQVNFLE9BQVQsQ0FBaUIsQ0FBakIsQ0FBaEMsRUFBcUQsSUFBckQ7QUFDQVIsNkNBQVNHLFVBQVQsQ0FBb0JuTSxTQUFTLENBQTdCLEVBQWdDc00sVUFBU0UsT0FBVCxDQUFpQixDQUFqQixDQUFoQyxFQUFxRCxJQUFyRDtBQUNBO0FBQ0g7QUFDRCxpQ0FBSyxlQUFPN0ssUUFBUCxDQUFnQnhCLEdBQXJCLENBQTBCO0FBQ3RCLHdDQUFNa00sa0JBQWdCLEtBQUtyRyxxQkFBTCxDQUEyQm5CLENBQTNCLENBQXRCO0FBQ0Esd0NBQU15SCxhQUFXLEtBQUtwRyxnQkFBTCxDQUFzQm1HLGVBQXRCLENBQWpCO0FBQ0Esd0NBQUksQ0FBQ0MsVUFBTCxFQUFlO0FBQ1hoTSxnREFBUUMsSUFBUixDQUFhLGVBQWUsS0FBSzBGLGFBQUwsQ0FBbUJvRyxlQUFuQixDQUFmLEdBQW1ELHVFQUFoRTtBQUNBO0FBQ0g7QUFDREwsNkNBQVNHLFVBQVQsQ0FBb0JuTSxNQUFwQixFQUE0QnNNLFdBQVNHLFFBQVQsQ0FBa0IsQ0FBbEIsQ0FBNUIsRUFBa0QsSUFBbEQ7QUFDQVQsNkNBQVNHLFVBQVQsQ0FBb0JuTSxTQUFTLENBQTdCLEVBQWdDc00sV0FBU0csUUFBVCxDQUFrQixDQUFsQixDQUFoQyxFQUFzRCxJQUF0RDtBQUNBVCw2Q0FBU0csVUFBVCxDQUFvQm5NLFNBQVMsQ0FBN0IsRUFBZ0NzTSxXQUFTRyxRQUFULENBQWtCLENBQWxCLENBQWhDLEVBQXNELElBQXREO0FBQ0E7QUFDSDtBQUNELGlDQUFLLGVBQU83SyxpQkFBUCxDQUF5QnpCLEdBQTlCLENBQW1DO0FBQy9CLHdDQUFNa00sa0JBQWdCLEtBQUtyRyxxQkFBTCxDQUEyQm5CLENBQTNCLENBQXRCO0FBQ0Esd0NBQU15SCxhQUFXLEtBQUtwRyxnQkFBTCxDQUFzQm1HLGVBQXRCLENBQWpCO0FBQ0Esd0NBQUksQ0FBQ0MsVUFBTCxFQUFlO0FBQ1hoTSxnREFBUUMsSUFBUixDQUFhLGVBQWUsS0FBSzBGLGFBQUwsQ0FBbUJvRyxlQUFuQixDQUFmLEdBQW1ELHVFQUFoRTtBQUNBO0FBQ0g7QUFDREwsNkNBQVNHLFVBQVQsQ0FBb0JuTSxNQUFwQixFQUE0QnNNLFdBQVNJLGdCQUFyQyxFQUF1RCxJQUF2RDtBQUNBO0FBQ0g7QUFDRCxpQ0FBSyxlQUFPN0ssUUFBUCxDQUFnQjFCLEdBQXJCLENBQTBCO0FBQ3RCLHdDQUFNa00sa0JBQWdCLEtBQUtyRyxxQkFBTCxDQUEyQm5CLENBQTNCLENBQXRCO0FBQ0Esd0NBQU15SCxhQUFXLEtBQUtwRyxnQkFBTCxDQUFzQm1HLGVBQXRCLENBQWpCO0FBQ0Esd0NBQUksQ0FBQ0MsVUFBTCxFQUFlO0FBQ1hoTSxnREFBUUMsSUFBUixDQUFhLGVBQWUsS0FBSzBGLGFBQUwsQ0FBbUJvRyxlQUFuQixDQUFmLEdBQW1ELHVFQUFoRTtBQUNBO0FBQ0g7QUFDREwsNkNBQVNHLFVBQVQsQ0FBb0JuTSxNQUFwQixFQUE0QnNNLFdBQVNLLFFBQVQsQ0FBa0IsQ0FBbEIsQ0FBNUIsRUFBa0QsSUFBbEQ7QUFDQVgsNkNBQVNHLFVBQVQsQ0FBb0JuTSxTQUFTLENBQTdCLEVBQWdDc00sV0FBU0ssUUFBVCxDQUFrQixDQUFsQixDQUFoQyxFQUFzRCxJQUF0RDtBQUNBWCw2Q0FBU0csVUFBVCxDQUFvQm5NLFNBQVMsQ0FBN0IsRUFBZ0NzTSxXQUFTSyxRQUFULENBQWtCLENBQWxCLENBQWhDLEVBQXNELElBQXREO0FBQ0E7QUFDSDtBQUNELGlDQUFLLGVBQU83SyxtQkFBUCxDQUEyQjNCLEdBQWhDLENBQXFDO0FBQ2pDLHdDQUFNa00sa0JBQWdCLEtBQUtyRyxxQkFBTCxDQUEyQm5CLENBQTNCLENBQXRCO0FBQ0Esd0NBQU15SCxhQUFXLEtBQUtwRyxnQkFBTCxDQUFzQm1HLGVBQXRCLENBQWpCO0FBQ0Esd0NBQUksQ0FBQ0MsVUFBTCxFQUFlO0FBQ1hoTSxnREFBUUMsSUFBUixDQUFhLGVBQWUsS0FBSzBGLGFBQUwsQ0FBbUJvRyxlQUFuQixDQUFmLEdBQW1ELHVFQUFoRTtBQUNBO0FBQ0g7QUFDREwsNkNBQVNHLFVBQVQsQ0FBb0JuTSxNQUFwQixFQUE0QnNNLFdBQVNNLGtCQUFULENBQTRCLENBQTVCLENBQTVCLEVBQTRELElBQTVEO0FBQ0FaLDZDQUFTRyxVQUFULENBQW9Cbk0sU0FBUyxDQUE3QixFQUFnQ3NNLFdBQVNNLGtCQUFULENBQTRCLENBQTVCLENBQWhDLEVBQWdFLElBQWhFO0FBQ0FaLDZDQUFTRyxVQUFULENBQW9Cbk0sU0FBUyxDQUE3QixFQUFnQ3NNLFdBQVNNLGtCQUFULENBQTRCLENBQTVCLENBQWhDLEVBQWdFLElBQWhFO0FBQ0E7QUFDSDtBQUNELGlDQUFLLGVBQU83SyxRQUFQLENBQWdCNUIsR0FBckIsQ0FBMEI7QUFDdEIsd0NBQU1rTSxrQkFBZ0IsS0FBS3JHLHFCQUFMLENBQTJCbkIsQ0FBM0IsQ0FBdEI7QUFDQSx3Q0FBTXlILGFBQVcsS0FBS3BHLGdCQUFMLENBQXNCbUcsZUFBdEIsQ0FBakI7QUFDQSx3Q0FBSSxDQUFDQyxVQUFMLEVBQWU7QUFDWGhNLGdEQUFRQyxJQUFSLENBQWEsZUFBZSxLQUFLMEYsYUFBTCxDQUFtQm9HLGVBQW5CLENBQWYsR0FBbUQsdUVBQWhFO0FBQ0E7QUFDSDtBQUNETCw2Q0FBU0csVUFBVCxDQUFvQm5NLE1BQXBCLEVBQTRCc00sV0FBU08sUUFBckMsRUFBK0MsSUFBL0M7QUFDQTtBQUNIO0FBQ0QsaUNBQUssZUFBTzdLLFlBQVAsQ0FBb0I3QixHQUF6QixDQUE4QjtBQUMxQix3Q0FBTWtNLGtCQUFnQixLQUFLckcscUJBQUwsQ0FBMkJuQixDQUEzQixDQUF0QjtBQUNBLHdDQUFNeUgsYUFBVyxLQUFLcEcsZ0JBQUwsQ0FBc0JtRyxlQUF0QixDQUFqQjtBQUNBLHdDQUFJLENBQUNDLFVBQUwsRUFBZTtBQUNYaE0sZ0RBQVFDLElBQVIsQ0FBYSxlQUFlLEtBQUswRixhQUFMLENBQW1Cb0csZUFBbkIsQ0FBZixHQUFtRCx1RUFBaEU7QUFDQTtBQUNIO0FBQ0RMLDZDQUFTSSxRQUFULENBQWtCcE0sTUFBbEIsRUFBMEJzTSxXQUFTUSxZQUFuQyxFQUFpRCxJQUFqRDtBQUNBO0FBQ0g7QUFDRCxpQ0FBSyxlQUFPN0ssZ0JBQVAsQ0FBd0I5QixHQUE3QixDQUFrQztBQUM5Qix3Q0FBTWtNLGtCQUFnQixLQUFLckcscUJBQUwsQ0FBMkJuQixDQUEzQixDQUF0QjtBQUNBLHdDQUFNeUgsYUFBVyxLQUFLcEcsZ0JBQUwsQ0FBc0JtRyxlQUF0QixDQUFqQjtBQUNBLHdDQUFJLENBQUNDLFVBQUwsRUFBZTtBQUNYaE0sZ0RBQVFDLElBQVIsQ0FBYSxlQUFlLEtBQUswRixhQUFMLENBQW1Cb0csZUFBbkIsQ0FBZixHQUFtRCx1RUFBaEU7QUFDQTtBQUNIO0FBQ0RMLDZDQUFTRyxVQUFULENBQW9Cbk0sTUFBcEIsRUFBNEJzTSxXQUFTUyxlQUFyQyxFQUFzRCxJQUF0RDtBQUNBO0FBQ0g7QUFDRCxpQ0FBSyxlQUFPN0ssU0FBUCxDQUFpQi9CLEdBQXRCLENBQTJCO0FBQ3ZCLHdDQUFNa00sa0JBQWdCLEtBQUtyRyxxQkFBTCxDQUEyQm5CLENBQTNCLENBQXRCO0FBQ0Esd0NBQU15SCxhQUFXLEtBQUtwRyxnQkFBTCxDQUFzQm1HLGVBQXRCLENBQWpCO0FBQ0Esd0NBQUksQ0FBQ0MsVUFBTCxFQUFlO0FBQ1hoTSxnREFBUUMsSUFBUixDQUFhLGVBQWUsS0FBSzBGLGFBQUwsQ0FBbUJvRyxlQUFuQixDQUFmLEdBQW1ELHVFQUFoRTtBQUNBO0FBQ0g7QUFDREwsNkNBQVNHLFVBQVQsQ0FBb0JuTSxNQUFwQixFQUE0QnNNLFdBQVNVLFNBQXJDLEVBQWdELElBQWhEO0FBQ0E7QUFDSDtBQUNELGlDQUFLLGVBQU94SyxhQUFQLENBQXFCckMsR0FBMUIsQ0FBK0I7QUFDM0Isd0NBQU1rTSxtQkFBZ0IsS0FBS3JHLHFCQUFMLENBQTJCbkIsQ0FBM0IsQ0FBdEI7QUFDQSx3Q0FBTXlILGNBQVcsS0FBS3BHLGdCQUFMLENBQXNCbUcsZ0JBQXRCLENBQWpCO0FBQ0Esd0NBQUksQ0FBQ0MsV0FBTCxFQUFlO0FBQ1hoTSxnREFBUUMsSUFBUixDQUFhLGVBQWUsS0FBSzBGLGFBQUwsQ0FBbUJvRyxnQkFBbkIsQ0FBZixHQUFtRCx1RUFBaEU7QUFDQTtBQUNIO0FBQ0RMLDZDQUFTSSxRQUFULENBQWtCcE0sTUFBbEIsRUFBMEJzTSxZQUFTVyxZQUFuQyxFQUFpRCxJQUFqRDtBQUNBO0FBQ0gsaUNBeklMOztBQTJJSCxxQkFqSmdEO0FBa0pwRDtBQUNELG1CQUFPbkIsTUFBUDtBQUNILFM7O0FBRXFCO0FBQ2xCLGdCQUFNQSxTQUFTLElBQUlvQixXQUFKLENBQWdCLEtBQUszSixPQUFyQixDQUFmO0FBQ0F1SSxtQkFBT0QsUUFBUCxHQUFrQixLQUFLdEksT0FBTCxDQUFhdUIsTUFBL0I7QUFDQSxtQkFBT2dILE1BQVA7QUFDSCxTOztBQUVtQnFCLFcsRUFBSztBQUNyQixpQkFBSyxJQUFNMUosSUFBWCxJQUFtQjBKLElBQUluSyxTQUF2QixFQUFrQztBQUM5QixvQkFBSSxFQUFFUyxRQUFRLEtBQUtVLGVBQWYsQ0FBSixFQUFxQztBQUNqQztBQUNBO0FBQ0g7O0FBRUQsb0JBQU1tSSxXQUFXYSxJQUFJbkssU0FBSixDQUFjUyxJQUFkLENBQWpCOztBQUVBO0FBQ0Esb0JBQU00SSxnQkFBZ0IsS0FBS2xJLGVBQUwsQ0FBcUJtSSxTQUFTN0ksSUFBOUIsQ0FBdEI7O0FBRUE7QUFDQTtBQUNBLHFCQUFLeUMsZ0JBQUwsQ0FBc0JtRyxhQUF0QixJQUF1Q0MsUUFBdkM7QUFDSDtBQUNKLFMsdUNBanBCZ0J6SixJOzs7Ozs7O28wQkNSckI7OztBQUdhdUssUTtBQUNYOzs7c0JBRFdBLFE7QUFLWCxrQkFBWTNKLElBQVosRUFBa0I7QUFDaEI7QUFDQSxPQUFLQSxJQUFMLEdBQVlBLElBQVo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFLOEksT0FBTCxHQUFlLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLENBQWY7QUFDQTtBQUNBLE9BQUtDLE9BQUwsR0FBZSxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxDQUFmO0FBQ0E7QUFDQSxPQUFLQyxRQUFMLEdBQWdCLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLENBQWhCO0FBQ0E7QUFDQSxPQUFLRSxRQUFMLEdBQWdCLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLENBQWhCO0FBQ0E7QUFDQSxPQUFLQyxrQkFBTCxHQUEwQixDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxDQUExQjtBQUNBO0FBQ0EsT0FBS0MsUUFBTCxHQUFnQixDQUFoQjtBQUNBO0FBQ0EsT0FBS0gsZ0JBQUwsR0FBd0IsQ0FBeEI7QUFDQTtBQUNBLE9BQUtXLFlBQUwsR0FBb0IsQ0FBcEI7QUFDQTtBQUNBLE9BQUtQLFlBQUwsR0FBb0IsQ0FBcEI7QUFDQTtBQUNBLE9BQUtDLGVBQUwsR0FBdUIsQ0FBdkI7QUFDQTtBQUNBLE9BQUtDLFNBQUwsR0FBaUIsQ0FBakI7QUFDQTtBQUNBLE9BQUtNLFVBQUwsR0FBa0IsSUFBbEI7QUFDQTtBQUNBLE9BQUtDLFVBQUwsR0FBa0IsSUFBbEI7QUFDQTtBQUNBLE9BQUtDLFdBQUwsR0FBbUIsSUFBbkI7QUFDQTtBQUNBLE9BQUtDLG1CQUFMLEdBQTJCLElBQTNCO0FBQ0E7QUFDQSxPQUFLQyxXQUFMLEdBQW1CLElBQW5CO0FBQ0E7QUFDQSxPQUFLVCxZQUFMLEdBQW9CLEtBQXBCO0FBQ0E7QUFDQSxPQUFLVSxPQUFMLEdBQWUsSUFBZjtBQUNBO0FBQ0EsT0FBS0MsZUFBTCxHQUF1QixJQUF2QjtBQUNBO0FBQ0EsT0FBS0MsUUFBTCxHQUFnQixJQUFoQjtBQUNBO0FBQ0EsT0FBS0MsV0FBTCxHQUFtQixJQUFuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQUtDLGNBQUwsR0FBc0IsRUFBdEI7QUFDRCxDOzs7QUFHSDs7OztBQUlhQyxlLFdBQUFBLGU7QUFDWDs7OztBQUlBLDJCQUFZQyxPQUFaLEVBQXFCO0FBQ25CLFNBQUtDLElBQUwsR0FBWUQsT0FBWjtBQUNBLFNBQUtFLGVBQUwsR0FBdUIsSUFBdkI7QUFDQSxTQUFLbkwsU0FBTCxHQUFpQixFQUFqQjs7QUFFQSxTQUFLb0wsS0FBTDtBQUNEOztBQUVEO0FBQ0E7Ozs7QUFJQTs7OztBQUlhQyxVLEVBQVE7QUFDbkIsVUFBSTVLLE9BQU80SyxPQUFPLENBQVAsQ0FBWDtBQUNBOztBQUVBLFdBQUtGLGVBQUwsR0FBdUIsSUFBSWYsUUFBSixDQUFhM0osSUFBYixDQUF2QjtBQUNBLFdBQUtULFNBQUwsQ0FBZVMsSUFBZixJQUF1QixLQUFLMEssZUFBNUI7QUFDRDs7QUFFRDs7Ozs7Ozs7OztBQVVXRSxVLEVBQVE7QUFDakIsVUFBSUEsT0FBTyxDQUFQLEtBQWEsVUFBakIsRUFBNkI7QUFDM0IvTixnQkFBUWdPLEtBQVI7QUFDRTtBQUNBLGlFQUZGOztBQUlBO0FBQ0Q7O0FBRUQsVUFBSUQsT0FBTyxDQUFQLEtBQWEsS0FBakIsRUFBd0I7QUFDdEIvTixnQkFBUUMsSUFBUixDQUFhLDBCQUFiO0FBQ0E7QUFDRDs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxVQUFJOE4sT0FBT3ZKLE1BQVAsSUFBaUIsQ0FBckIsRUFBd0I7QUFDdEIsZUFBT3VKLE9BQU83SCxHQUFQLENBQVcrSCxVQUFYLENBQVA7QUFDRDs7QUFFRDtBQUNBO0FBQ0EsVUFBSUMsUUFBUUQsV0FBV0YsT0FBTyxDQUFQLENBQVgsQ0FBWjtBQUNBO0FBQ0EsYUFBTyxDQUFDRyxLQUFELEVBQVFBLEtBQVIsRUFBZUEsS0FBZixDQUFQO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUErQlNILFUsRUFBUTtBQUNmLFdBQUtGLGVBQUwsQ0FBcUI1QixPQUFyQixHQUErQixLQUFLa0MsVUFBTCxDQUFnQkosTUFBaEIsQ0FBL0I7QUFDRDs7QUFFRDs7Ozs7Ozs7QUFRU0EsVSxFQUFRO0FBQ2YsV0FBS0YsZUFBTCxDQUFxQjNCLE9BQXJCLEdBQStCLEtBQUtpQyxVQUFMLENBQWdCSixNQUFoQixDQUEvQjtBQUNEOztBQUVEOzs7Ozs7OztBQVFTQSxVLEVBQVE7QUFDZixXQUFLRixlQUFMLENBQXFCMUIsUUFBckIsR0FBZ0MsS0FBS2dDLFVBQUwsQ0FBZ0JKLE1BQWhCLENBQWhDO0FBQ0Q7O0FBRUQ7Ozs7Ozs7QUFPU0EsVSxFQUFRO0FBQ2YsV0FBS0YsZUFBTCxDQUFxQnhCLFFBQXJCLEdBQWdDLEtBQUs4QixVQUFMLENBQWdCSixNQUFoQixDQUFoQztBQUNEOztBQUVEOzs7Ozs7Ozs7Ozs7O0FBYVNBLFUsRUFBUTtBQUNmLFdBQUtGLGVBQUwsQ0FBcUJ2QixrQkFBckIsR0FBMEMsS0FBSzZCLFVBQUwsQ0FBZ0JKLE1BQWhCLENBQTFDO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkJRQSxVLEVBQVE7QUFDZDtBQUNBO0FBQ0EsV0FBS0YsZUFBTCxDQUFxQnRCLFFBQXJCLEdBQWdDMEIsV0FBV0YsT0FBT0ssR0FBUCxFQUFYLENBQWhDO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJZTCxVLEVBQVE7QUFDbEIsV0FBS0YsZUFBTCxDQUFxQnJCLFlBQXJCLEdBQW9DNkIsU0FBU04sT0FBTyxDQUFQLENBQVQsQ0FBcEM7QUFDRDs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7OztBQWdCU0EsVSxFQUFRO0FBQ2YsV0FBS0YsZUFBTCxDQUFxQnBCLGVBQXJCLEdBQXVDd0IsV0FBV0YsT0FBTyxDQUFQLENBQVgsQ0FBdkM7QUFDRDs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7QUFjU0EsVSxFQUFRO0FBQ2YsV0FBS0YsZUFBTCxDQUFxQnpCLGdCQUFyQixHQUF3Q2lDLFNBQVNOLE9BQU8sQ0FBUCxDQUFULENBQXhDO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQmdCQSxVLEVBQVE7QUFDdEIsV0FBS0YsZUFBTCxDQUFxQm5CLFNBQXJCLEdBQWlDMkIsU0FBU04sT0FBTyxDQUFQLENBQVQsQ0FBakM7QUFDRDs7QUFFRDs7Ozs7O0FBTVNPLFUsRUFBUTdMLE8sRUFBUztBQUN4QkEsY0FBUThMLGVBQVIsR0FBMEJELE9BQU8sQ0FBUCxLQUFhLElBQXZDO0FBQ0Q7O0FBRUQ7Ozs7OztBQU1hQSxVLEVBQVE3TCxPLEVBQVM7QUFDNUJBLGNBQVErTCxrQkFBUixHQUE2QkYsT0FBTyxDQUFQLEtBQWEsSUFBMUM7QUFDRDs7QUFFRDs7Ozs7O0FBTWFBLFUsRUFBUTdMLE8sRUFBUztBQUM1QkEsY0FBUWdNLGdCQUFSLEdBQTJCSCxPQUFPLENBQVAsS0FBYSxJQUF4QztBQUNEOztBQUVEOzs7Ozs7QUFNWUEsVSxFQUFRN0wsTyxFQUFTO0FBQzNCQSxjQUFRaU0sb0JBQVIsR0FBK0JULFdBQVdLLE9BQU8sQ0FBUCxDQUFYLENBQS9CO0FBQ0Q7O0FBRUQ7Ozs7OztBQU1TQSxVLEVBQVE3TCxPLEVBQVM7QUFDeEJBLGNBQVFrTSxnQkFBUixDQUF5QkMsVUFBekIsR0FBc0NYLFdBQVdLLE9BQU8sQ0FBUCxDQUFYLENBQXRDO0FBQ0E3TCxjQUFRa00sZ0JBQVIsQ0FBeUJFLFFBQXpCLEdBQW9DWixXQUFXSyxPQUFPLENBQVAsQ0FBWCxDQUFwQztBQUNEOztBQUVEOzs7Ozs7O0FBT1VBLFUsRUFBUVEsTSxFQUFRQyxZLEVBQWM7QUFDdEMsYUFBT1QsT0FBTzlKLE1BQVAsR0FBZ0IsQ0FBdkIsRUFBMEI7QUFDeEI4SixlQUFPdkosSUFBUCxDQUFZZ0ssWUFBWjtBQUNEOztBQUVERCxhQUFPRSxDQUFQLEdBQVdmLFdBQVdLLE9BQU8sQ0FBUCxDQUFYLENBQVg7QUFDQVEsYUFBT0csQ0FBUCxHQUFXaEIsV0FBV0ssT0FBTyxDQUFQLENBQVgsQ0FBWDtBQUNBUSxhQUFPSSxDQUFQLEdBQVdqQixXQUFXSyxPQUFPLENBQVAsQ0FBWCxDQUFYO0FBQ0Q7O0FBRUQ7Ozs7OztBQU1RQSxVLEVBQVE3TCxPLEVBQVM7QUFDdkIsV0FBSzBNLFNBQUwsQ0FBZWIsTUFBZixFQUF1QjdMLFFBQVEvQyxNQUEvQixFQUF1QyxDQUF2QztBQUNEOztBQUVEOzs7Ozs7QUFNUTRPLFUsRUFBUTdMLE8sRUFBUztBQUN2QixXQUFLME0sU0FBTCxDQUFlYixNQUFmLEVBQXVCN0wsUUFBUTJNLEtBQS9CLEVBQXNDLENBQXRDO0FBQ0Q7O0FBRUQ7Ozs7OztBQU1RZCxVLEVBQVE3TCxPLEVBQVM7QUFDdkIsV0FBSzBNLFNBQUwsQ0FBZWIsTUFBZixFQUF1QjdMLFFBQVE0TSxVQUEvQixFQUEyQyxDQUEzQztBQUNEOztBQUVEOzs7Ozs7QUFNYWYsVSxFQUFRN0wsTyxFQUFTO0FBQzVCQSxjQUFRNk0saUJBQVIsR0FBNEJyQixXQUFXSyxPQUFPLENBQVAsQ0FBWCxDQUE1QjtBQUNEOztBQUVEOzs7Ozs7QUFNWUEsVSxFQUFRN0wsTyxFQUFTO0FBQzNCQSxjQUFROE0sS0FBUixHQUFnQmpCLE9BQU8sQ0FBUCxLQUFhLElBQTdCO0FBQ0Q7O0FBRUQ7Ozs7OztBQU1TQSxVLEVBQVE3TCxPLEVBQVM7QUFDeEJBLGNBQVErTSxjQUFSLEdBQXlCdkIsV0FBV0ssT0FBTyxDQUFQLENBQVgsQ0FBekI7QUFDRDs7QUFFRDs7Ozs7O0FBTWNBLFUsRUFBUTdMLE8sRUFBUztBQUM3QkEsY0FBUWdOLE9BQVIsR0FBa0JuQixPQUFPLENBQVAsQ0FBbEI7QUFDRDs7QUFFRDs7Ozs7O0FBTVdBLFUsRUFBUTdMLE8sRUFBUztBQUMxQkEsY0FBUWlOLGNBQVIsR0FBeUJwQixPQUFPLENBQVAsQ0FBekI7QUFDRDs7QUFFRDs7Ozs7O0FBTWFQLFUsRUFBUTtBQUNuQixVQUFJdEwsVUFBVTtBQUNaOEwseUJBQWlCLEtBREw7QUFFWkMsNEJBQW9CLElBRlI7QUFHWkMsMEJBQWtCLElBSE47QUFJWkMsOEJBQXNCLENBSlY7QUFLWkMsMEJBQWtCO0FBQ2hCQyxzQkFBWSxDQURJO0FBRWhCQyxvQkFBVSxDQUZNLEVBTE47O0FBU1puUCxnQkFBUSxFQUFDc1AsR0FBRyxDQUFKLEVBQU9DLEdBQUcsQ0FBVixFQUFhQyxHQUFHLENBQWhCLEVBVEk7QUFVWkUsZUFBTyxFQUFDSixHQUFHLENBQUosRUFBT0MsR0FBRyxDQUFWLEVBQWFDLEdBQUcsQ0FBaEIsRUFWSztBQVdaRyxvQkFBWSxFQUFDTCxHQUFHLENBQUosRUFBT0MsR0FBRyxDQUFWLEVBQWFDLEdBQUcsQ0FBaEIsRUFYQTtBQVlaSyxlQUFPLEtBWks7QUFhWkQsMkJBQW1CLElBYlA7QUFjWkUsd0JBQWdCLENBZEo7QUFlWkMsaUJBQVMsSUFmRyxFQUFkOzs7QUFrQkEsVUFBSVgsZUFBSjtBQUNBLFVBQUlSLGVBQUo7QUFDQSxVQUFJcUIsa0JBQWtCLEVBQXRCOztBQUVBNUIsYUFBTzZCLE9BQVA7O0FBRUEsYUFBTzdCLE9BQU92SixNQUFkLEVBQXNCO0FBQ3BCLFlBQU1xTCxRQUFROUIsT0FBT0ssR0FBUCxFQUFkOztBQUVBLFlBQUl5QixNQUFNbEwsVUFBTixDQUFpQixHQUFqQixDQUFKLEVBQTJCO0FBQ3pCbUssbUJBQVNlLE1BQU1DLE1BQU4sQ0FBYSxDQUFiLENBQVQ7QUFDQUgsMEJBQWdCYixNQUFoQixJQUEwQixFQUExQjtBQUNELFNBSEQsTUFHTztBQUNMYSwwQkFBZ0JiLE1BQWhCLEVBQXdCL0osSUFBeEIsQ0FBNkI4SyxLQUE3QjtBQUNEO0FBQ0Y7O0FBRUQsV0FBS2YsTUFBTCxJQUFlYSxlQUFmLEVBQWdDO0FBQzlCLFlBQUksQ0FBQ0EsZ0JBQWdCSSxjQUFoQixDQUErQmpCLE1BQS9CLENBQUwsRUFBNEM7QUFDMUM7QUFDRDtBQUNEUixpQkFBU3FCLGdCQUFnQmIsTUFBaEIsQ0FBVDtBQUNBLFlBQUlrQixlQUFlLGdCQUFjbEIsTUFBZCxDQUFuQjtBQUNBLFlBQUlrQixZQUFKLEVBQWtCO0FBQ2hCQSx1QkFBYUMsSUFBYixDQUFrQixJQUFsQixFQUF3QjNCLE1BQXhCLEVBQWdDN0wsT0FBaEM7QUFDRDtBQUNGOztBQUVELGFBQU9BLE9BQVA7QUFDRDs7QUFFRDs7Ozs7O0FBTVNzTCxVLEVBQVE7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFJbUMsaUJBQUo7QUFDQSxVQUFJek4sZ0JBQUo7QUFDQSxVQUFJLENBQUNzTCxPQUFPLENBQVAsRUFBVXBKLFVBQVYsQ0FBcUIsR0FBckIsQ0FBTCxFQUFnQztBQUNMb0osY0FESyxFQUM3Qm1DLFFBRDZCLGNBQ2hCek4sT0FEZ0I7QUFFL0IsT0FGRCxNQUVPO0FBQ0x5TixtQkFBV25DLE9BQU9LLEdBQVAsRUFBWDtBQUNBM0wsa0JBQVVzTCxNQUFWO0FBQ0Q7O0FBRUR0TCxnQkFBVSxLQUFLME4sWUFBTCxDQUFrQjFOLE9BQWxCLENBQVY7QUFDQUEsY0FBUSxVQUFSLElBQXNCeU4sUUFBdEI7QUFDQSxhQUFPek4sT0FBUDtBQUNEOztBQUVEOzs7OztBQUthc0wsVSxFQUFRO0FBQ25CLFdBQUtGLGVBQUwsQ0FBcUJaLFVBQXJCLEdBQWtDLEtBQUttRCxRQUFMLENBQWNyQyxNQUFkLENBQWxDO0FBQ0Q7O0FBRUQ7Ozs7O0FBS2FBLFUsRUFBUTtBQUNuQixXQUFLRixlQUFMLENBQXFCYixVQUFyQixHQUFrQyxLQUFLb0QsUUFBTCxDQUFjckMsTUFBZCxDQUFsQztBQUNEOztBQUVEOzs7OztBQUthQSxVLEVBQVE7QUFDbkIsV0FBS0YsZUFBTCxDQUFxQlgsV0FBckIsR0FBbUMsS0FBS2tELFFBQUwsQ0FBY3JDLE1BQWQsQ0FBbkM7QUFDRDs7QUFFRDs7Ozs7QUFLYUEsVSxFQUFRO0FBQ25CLFdBQUtGLGVBQUwsQ0FBcUJMLFdBQXJCLEdBQW1DLEtBQUs0QyxRQUFMLENBQWNyQyxNQUFkLENBQW5DO0FBQ0Q7O0FBRUQ7Ozs7O0FBS2FBLFUsRUFBUTtBQUNuQixXQUFLRixlQUFMLENBQXFCVixtQkFBckIsR0FBMkMsS0FBS2lELFFBQUwsQ0FBY3JDLE1BQWQsQ0FBM0M7QUFDRDs7QUFFRDs7Ozs7QUFLWUEsVSxFQUFRO0FBQ2xCLFdBQUtGLGVBQUwsQ0FBcUJULFdBQXJCLEdBQW1DLEtBQUtnRCxRQUFMLENBQWNyQyxNQUFkLENBQW5DO0FBQ0Q7O0FBRUQ7Ozs7O0FBS2NBLFUsRUFBUTtBQUNwQixXQUFLRixlQUFMLENBQXFCbEIsWUFBckIsR0FBb0NvQixPQUFPLENBQVAsS0FBYSxJQUFqRDtBQUNEOztBQUVEOzs7OztBQUtlQSxVLEVBQVE7QUFDckIsV0FBS0YsZUFBTCxDQUFxQlIsT0FBckIsR0FBK0IsS0FBSytDLFFBQUwsQ0FBY3JDLE1BQWQsQ0FBL0I7QUFDRDs7QUFFRDs7Ozs7QUFLV0EsVSxFQUFRO0FBQ2pCLFdBQUtzQyxjQUFMLENBQW9CdEMsTUFBcEI7QUFDRDs7QUFFRDs7Ozs7QUFLV0EsVSxFQUFRO0FBQ2pCLFdBQUtGLGVBQUwsQ0FBcUJQLGVBQXJCLEdBQXVDLEtBQUs4QyxRQUFMLENBQWNyQyxNQUFkLENBQXZDO0FBQ0Q7O0FBRUQ7Ozs7O0FBS1lBLFUsRUFBUTtBQUNsQixXQUFLRixlQUFMLENBQXFCTixRQUFyQixHQUFnQyxLQUFLNkMsUUFBTCxDQUFjckMsTUFBZCxDQUFoQztBQUNEOztBQUVEOzs7OztBQUtXQSxVLEVBQVE7QUFDakIsV0FBS0YsZUFBTCxDQUFxQkosY0FBckIsQ0FBb0MxSSxJQUFwQyxDQUF5QyxLQUFLcUwsUUFBTCxDQUFjckMsTUFBZCxDQUF6QztBQUNEOztBQUVEOzs7Ozs7Ozs7Ozs7O0FBYVE7QUFDTixVQUFJMUosUUFBUSxLQUFLdUosSUFBTCxDQUFVdEosS0FBVixDQUFnQixPQUFoQixDQUFaLENBRE07QUFFTiw2QkFBaUJELEtBQWpCLDhIQUF3QixLQUFmSSxJQUFlO0FBQ3RCQSxpQkFBT0EsS0FBS0MsSUFBTCxFQUFQO0FBQ0EsY0FBSSxDQUFDRCxJQUFELElBQVNBLEtBQUtFLFVBQUwsQ0FBZ0IsR0FBaEIsQ0FBYixFQUFtQztBQUNqQztBQUNEOztBQUVELGNBQUlvSixTQUFTdEosS0FBS0gsS0FBTCxDQUFXLElBQVgsQ0FBYjtBQUNBLGNBQUlnTSxrQkFBSixDQVBzQjtBQVFHdkMsZ0JBUkgsbUNBUXJCdUMsU0FScUIsZUFRUHZDLE1BUk87O0FBVXRCLGNBQUl3QyxjQUFjLGdCQUFjRCxTQUFkLENBQWxCOztBQUVBLGNBQUksQ0FBQ0MsV0FBTCxFQUFrQjtBQUNoQnZRLG9CQUFRQyxJQUFSLCtDQUF3RHFRLFNBQXhEO0FBQ0E7QUFDRDs7QUFFRDtBQUNBQyxzQkFBWU4sSUFBWixDQUFpQixJQUFqQixFQUF1QmxDLE1BQXZCO0FBQ0Q7O0FBRUQ7QUF2Qk0sdU5Bd0JOLE9BQU8sS0FBS0gsSUFBWjtBQUNBLFdBQUtDLGVBQUwsR0FBdUIsSUFBdkI7QUFDRDs7QUFFRCxnQztBQUNELEM7Ozs7Ozs7Ozs7Ozs7OzZQQ3J0QkQsbUM7QUFDQTtBQUNBO0FBQ0Esb0M7Ozs7QUFJQTs7OztBQUlJdEwsSTtBQUNBdUssUTtBQUNBWSxlO0FBQ0FsTyxNOztBQUVBZ1IsYztBQUNBQyxjO0FBQ0FDLGU7QUFDQUMsaUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDb0ZZSCxjLEdBQUFBLGM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE2R0FDLGMsR0FBQUEsYzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1IQUMsZSxHQUFBQSxlOzs7Ozs7O0FBT0FDLGlCLEdBQUFBLGlCLENBN1VoQixtQywyQ0FDQSx1Q0FDQSxxQyw2RkFHQSxTQUFTQyxtQkFBVCxDQUE4Qi9ELEdBQTlCLEVBQW1DZ0UsSUFBbkMsRUFBeUMsQ0FDdkMsSUFBTUMsZ0JBQWdCLENBQ3BCLFlBRG9CLEVBRXBCLFlBRm9CLEVBR3BCLGFBSG9CLEVBSXBCLGFBSm9CLEVBS3BCLFNBTG9CLEVBTXBCLGlCQU5vQixFQU9wQixVQVBvQixFQVFwQixhQVJvQixDQUF0QixDQVVBLElBQUksQ0FBQ0QsS0FBS0UsUUFBTCxDQUFjLEdBQWQsQ0FBTCxFQUF5QixDQUN2QkYsUUFBUSxHQUFSLENBQ0QsQ0FDRCxJQUFJN04sV0FBVyxFQUFmLENBRUEsS0FBSyxJQUFJZ0osUUFBVCxJQUFxQmEsSUFBSW5LLFNBQXpCLEVBQW9DLENBQ2xDLElBQUksQ0FBQ21LLElBQUluSyxTQUFKLENBQWNxTixjQUFkLENBQTZCL0QsUUFBN0IsQ0FBTCxFQUE2QyxDQUMzQyxTQUNELENBQ0RBLFdBQVdhLElBQUluSyxTQUFKLENBQWNzSixRQUFkLENBQVgsQ0FKa0MsMkJBTXpCZ0YsSUFOeUIsR0FPaEMsSUFBSUMsVUFBVWpGLFNBQVNnRixJQUFULENBQWQsQ0FDQSxJQUFJLENBQUNDLE9BQUwsRUFBYyxDQUNaLGtCQUNELENBRUQsSUFBSUMsTUFBTUwsT0FBT0ksUUFBUWYsUUFBekIsQ0FDQWxOLFNBQVMrQixJQUFULENBQ0VvTSxNQUFNRCxHQUFOLEVBQ0dFLElBREgsQ0FDUSxVQUFDQyxRQUFELEVBQWMsQ0FDbEIsSUFBSSxDQUFDQSxTQUFTQyxFQUFkLEVBQWtCLENBQ2hCLE1BQU0sSUFBSUMsS0FBSixFQUFOLENBQ0QsQ0FDRCxPQUFPRixTQUFTRyxJQUFULEVBQVAsQ0FDRCxDQU5ILEVBT0dKLElBUEgsQ0FPUSxVQUFTeEQsSUFBVCxFQUFlLENBQ25CLElBQUk2RCxRQUFRLElBQUlDLEtBQUosRUFBWixDQUNBRCxNQUFNRSxHQUFOLEdBQVlDLElBQUlDLGVBQUosQ0FBb0JqRSxJQUFwQixDQUFaLENBQ0FxRCxRQUFRYSxPQUFSLEdBQWtCTCxLQUFsQixDQUNELENBWEgsRUFZR00sS0FaSCxDQVlTLFlBQU0sQ0FDWC9SLFFBQVFnTyxLQUFSLGtDQUE2Q2tELEdBQTdDLEVBQ0QsQ0FkSCxDQURGLEVBYmdDLHlHQU1sQyxxQkFBaUJKLGFBQWpCLDhIQUFnQyxLQUF2QkUsSUFBdUIsZ0NBQXZCQSxJQUF1QiwyQkFHNUIsU0FzQkgsQ0EvQmlDLGlOQWdDbkMsQ0FFRCxPQUFPZ0IsUUFBUUMsR0FBUixDQUFZalAsUUFBWixDQUFQLENBQ0QsQyxDQUdEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Nm5EQTJDTyxTQUFTd04sY0FBVCxDQUF5QjBCLE1BQXpCLEVBQWlDLENBQ3RDLElBQU1DLFdBQVcsRUFBakIsQ0FEc0MsNkJBRzNCQyxLQUgyQixHQUlwQyxJQUFNQyxTQUFTLEVBQWYsQ0FFQSxJQUFJLENBQUNELE1BQU1FLEdBQVgsRUFBZ0IsQ0FDZCxNQUFNLElBQUlmLEtBQUosQ0FDSixrRkFDQSxrQ0FGSSxDQUFOLENBSUQsQ0FFRCxJQUFJOU8sVUFBVSxFQUFkLENBQ0FBLFFBQVFHLGtCQUFSLEdBQTZCLENBQUMsQ0FBQ3dQLE1BQU14UCxrQkFBckMsQ0FDQUgsUUFBUW9ELHlCQUFSLEdBQW9DLENBQUMsQ0FBQ3VNLE1BQU12TSx5QkFBNUMsQ0Fmb0MsQ0FpQnBDO0FBQ0EsUUFBSTFDLE9BQU9pUCxNQUFNalAsSUFBakIsQ0FDQSxJQUFJLENBQUNBLElBQUwsRUFBVyxDQUNULElBQUlvUCxRQUFRSCxNQUFNRSxHQUFOLENBQVVoTyxLQUFWLENBQWdCLEdBQWhCLENBQVosQ0FDQW5CLE9BQU9vUCxNQUFNQSxNQUFNL04sTUFBTixHQUFlLENBQXJCLEVBQXdCZ08sT0FBeEIsQ0FBZ0MsTUFBaEMsRUFBd0MsRUFBeEMsQ0FBUCxDQUNELENBQ0RILE9BQU90TixJQUFQLENBQVlpTixRQUFRUyxPQUFSLENBQWdCdFAsSUFBaEIsQ0FBWixFQUVBa1AsT0FBT3ROLElBQVAsQ0FDRW9NLE1BQU1pQixNQUFNRSxHQUFaLEVBQ0dsQixJQURILENBQ1EsVUFBQ0MsUUFBRCxVQUFjQSxTQUFTcUIsSUFBVCxFQUFkLEVBRFIsRUFFR3RCLElBRkgsQ0FFUSxVQUFDeEQsSUFBRCxFQUFVLENBQ2QsT0FBTyxtQkFBU0EsSUFBVCxFQUFlbkwsT0FBZixDQUFQLENBQ0QsQ0FKSCxDQURGLEVBekJvQyxDQWlDcEM7QUFDQSxRQUFJMlAsTUFBTXZGLEdBQVYsRUFBZSxDQUNiLElBQUlBLE1BQU11RixNQUFNdkYsR0FBaEIsQ0FDQSxJQUFJLE9BQU9BLEdBQVAsS0FBZSxTQUFuQixFQUE4QixDQUM1QkEsTUFBTXVGLE1BQU1FLEdBQU4sQ0FBVUUsT0FBVixDQUFrQixRQUFsQixFQUE0QixNQUE1QixDQUFOLENBQ0QsQ0FFREgsT0FBT3ROLElBQVAsQ0FDRW9NLE1BQU10RSxHQUFOLEVBQ0d1RSxJQURILENBQ1EsVUFBQ0MsUUFBRCxVQUFjQSxTQUFTcUIsSUFBVCxFQUFkLEVBRFIsRUFFR3RCLElBRkgsQ0FFUSxVQUFDeEQsSUFBRCxFQUFVLENBQ2QsSUFBSTVCLFdBQVcsOEJBQW9CNEIsSUFBcEIsQ0FBZixDQUNBLElBQUl3RSxNQUFNeEIsbUJBQU4sS0FBOEIsS0FBbEMsRUFBeUMsQ0FDdkMsSUFBSUMsT0FBT3VCLE1BQU1PLGNBQWpCLENBQ0EsSUFBSSxDQUFDOUIsSUFBTCxFQUFXLENBQ1Q7QUFDQUEsbUJBQU9oRSxJQUFJaUQsTUFBSixDQUFXLENBQVgsRUFBY2pELElBQUkrRixXQUFKLENBQWdCLEdBQWhCLENBQWQsQ0FBUCxDQUNELENBTHNDLENBTXZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQU9aLFFBQVFDLEdBQVIsQ0FBWSxDQUNqQkQsUUFBUVMsT0FBUixDQUFnQnpHLFFBQWhCLENBRGlCLEVBRWpCNEUsb0JBQW9CNUUsUUFBcEIsRUFBOEI2RSxJQUE5QixDQUZpQixDQUFaLENBQVAsQ0FJRCxDQUNELE9BQU9tQixRQUFRQyxHQUFSLENBQVlELFFBQVFTLE9BQVIsQ0FBZ0J6RyxRQUFoQixDQUFaLENBQVAsQ0FDRCxDQXBCSCxFQXFCR29GLElBckJILENBcUJRLFVBQUNsRCxLQUFELEVBQVcsQ0FDZixPQUFPQSxNQUFNLENBQU4sQ0FBUCxDQUNELENBdkJILENBREYsRUEwQkQsQ0FFRGlFLFNBQVNwTixJQUFULENBQWNpTixRQUFRQyxHQUFSLENBQVlJLE1BQVosQ0FBZCxFQXBFb0MsNEdBR3RDLHNCQUFvQkgsTUFBcEIsbUlBQTRCLEtBQWpCRSxLQUFpQix1QkFBakJBLEtBQWlCLEVBa0UzQixDQXJFcUMsd05BdUV0QyxPQUFPSixRQUFRQyxHQUFSLENBQVlFLFFBQVosRUFDSmYsSUFESSxDQUNDLFVBQUN5QixFQUFELEVBQVEsQ0FDWjtBQUNBO0FBQ0E7QUFDQSxRQUFNWCxTQUFTLEVBQWYsQ0FKWSwwR0FNWixzQkFBb0JXLEVBQXBCLG1JQUF3QixLQUFiVCxLQUFhLDRDQUNJQSxLQURKLEtBQ2ZqUCxLQURlLGFBQ1QyUCxJQURTLGFBQ0hqRyxHQURHLGFBRXRCaUcsS0FBSzNQLElBQUwsR0FBWUEsS0FBWixDQUNBLElBQUkwSixHQUFKLEVBQVMsQ0FDUGlHLEtBQUtDLGtCQUFMLENBQXdCbEcsR0FBeEIsRUFDRCxDQUNEcUYsT0FBTy9PLEtBQVAsSUFBZTJQLElBQWYsQ0FDRCxDQWJXLHdOQWVaLE9BQU9aLE1BQVAsQ0FDRCxDQWpCSSxDQUFQLENBa0JELEMsQ0FHRDs7Ozs7Ozs7Ozs7Ozs7Ozswc0JBaUJPLFNBQVN6QixjQUFULENBQXlCdUMsV0FBekIsRUFBc0NDLGtCQUF0QyxFQUEwREMsTUFBMUQsRUFBa0UsQ0FDdkUsSUFBSUEsV0FBV0MsU0FBZixFQUEwQixDQUN4QkQsU0FBUyxFQUFULENBQ0QsQ0FFRCxJQUFNRSxZQUFZLEVBQWxCLENBTHVFLDZCQU81REMsU0FQNEQsR0FRckUsSUFBSSxDQUFDTCxZQUFZakQsY0FBWixDQUEyQnNELFNBQTNCLENBQUwsRUFBNEMsQ0FDMUMsa0JBQ0QsQ0FDRCxJQUFNbkMsTUFBTThCLFlBQVlLLFNBQVosQ0FBWixDQUNBRCxVQUFVck8sSUFBVixDQUNFb00sTUFBTUQsR0FBTixFQUNHRSxJQURILENBQ1EsVUFBQ0MsUUFBRCxVQUFjQSxTQUFTcUIsSUFBVCxFQUFkLEVBRFIsRUFFR3RCLElBRkgsQ0FFUSxVQUFDeEQsSUFBRCxFQUFVLENBQ2QsT0FBTyxDQUFDeUYsU0FBRCxFQUFZLG1CQUFTekYsSUFBVCxDQUFaLENBQVAsQ0FDRCxDQUpILENBREYsRUFacUUsRUFPdkUsS0FBSyxJQUFNeUYsU0FBWCxJQUF3QkwsV0FBeEIsRUFBcUMsb0JBQTFCSyxTQUEwQiw0QkFFakMsU0FVSCxDQUVEckIsUUFBUUMsR0FBUixDQUFZbUIsU0FBWixFQUNHaEMsSUFESCxDQUNRLFVBQUN5QixFQUFELEVBQVEsMkdBQ1osc0JBQXlCQSxFQUF6QixtSUFBNkIsaUVBQW5CMVAsTUFBbUIsZ0JBQWIyUCxJQUFhLFlBQzNCSSxPQUFPL1AsTUFBUCxJQUFlMlAsSUFBZixDQUNELENBSFcsd05BS1osT0FBT0csbUJBQW1CQyxNQUFuQixDQUFQLENBQ0QsQ0FQSCxFQVFELENBRUQsSUFBSUksZUFBZSxTQUFmQSxZQUFlLENBQVVDLEVBQVYsRUFBY3BULElBQWQsRUFBb0J5TixJQUFwQixFQUEwQjRGLFFBQTFCLEVBQW9DLENBQ3JELElBQUloSSxTQUFTK0gsR0FBR0UsWUFBSCxFQUFiLENBQ0EsSUFBSUMsWUFBWXZULFNBQVNvVCxHQUFHSSxZQUFaLEdBQTJCQyxZQUEzQixHQUEwQ2hILFdBQTFELENBQ0EyRyxHQUFHTSxVQUFILENBQWMxVCxJQUFkLEVBQW9CcUwsTUFBcEIsRUFDQStILEdBQUdPLFVBQUgsQ0FBYzNULElBQWQsRUFBb0IsSUFBSXVULFNBQUosQ0FBYzlGLElBQWQsQ0FBcEIsRUFBeUMyRixHQUFHUSxXQUE1QyxFQUNBdkksT0FBT2dJLFFBQVAsR0FBa0JBLFFBQWxCLENBQ0FoSSxPQUFPRCxRQUFQLEdBQWtCcUMsS0FBS3BKLE1BQUwsR0FBY2dQLFFBQWhDLENBQ0EsT0FBT2hJLE1BQVAsQ0FDRCxDQVJELEMsQ0FVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztndEVBMEVPLFNBQVNrRixlQUFULENBQTJCNkMsRUFBM0IsRUFBK0JULElBQS9CLEVBQXNDLENBQzNDQSxLQUFLa0IsWUFBTCxHQUFvQlYsYUFBYUMsRUFBYixFQUFpQkEsR0FBR0ksWUFBcEIsRUFBa0NiLEtBQUsvUCxhQUF2QyxFQUFzRCxDQUF0RCxDQUFwQixDQUNBK1AsS0FBS21CLGFBQUwsR0FBcUJYLGFBQWFDLEVBQWIsRUFBaUJBLEdBQUdJLFlBQXBCLEVBQWtDYixLQUFLOVAsUUFBdkMsRUFBaUQ4UCxLQUFLNVAsYUFBdEQsQ0FBckIsQ0FDQTRQLEtBQUtvQixZQUFMLEdBQW9CWixhQUFhQyxFQUFiLEVBQWlCQSxHQUFHSSxZQUFwQixFQUFrQ2IsS0FBS2hRLFFBQXZDLEVBQWlELENBQWpELENBQXBCLENBQ0FnUSxLQUFLcUIsV0FBTCxHQUFtQmIsYUFBYUMsRUFBYixFQUFpQkEsR0FBR2Esb0JBQXBCLEVBQTBDdEIsS0FBSzdQLE9BQS9DLEVBQXdELENBQXhELENBQW5CLENBQ0QsRUFFTSxTQUFTME4saUJBQVQsQ0FBNkI0QyxFQUE3QixFQUFpQ1QsSUFBakMsRUFBd0MsQ0FDN0NTLEdBQUdjLFlBQUgsQ0FBZ0J2QixLQUFLa0IsWUFBckIsRUFDQVQsR0FBR2MsWUFBSCxDQUFnQnZCLEtBQUttQixhQUFyQixFQUNBVixHQUFHYyxZQUFILENBQWdCdkIsS0FBS29CLFlBQXJCLEVBQ0FYLEdBQUdjLFlBQUgsQ0FBZ0J2QixLQUFLcUIsV0FBckIsRUFDRCxDIiwiZmlsZSI6IndlYmdsLW9iai1sb2FkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIk9CSlwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJPQkpcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiT0JKXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMmNiMDJlZGM3Y2VhN2U4NGY5ZTIiLCIvKipcbiAqIEEgY2xhc3MgdG8gcmVwcmVzZW50IHRoZSBtZW1vcnkgbGF5b3V0IGZvciBhIHZlcnRleCBhdHRyaWJ1dGUgYXJyYXkuIFVzZWQgYnlcbiAqIHtAbGluayBNZXNofSdzIFRCRCguLi4pIG1ldGhvZCB0byBnZW5lcmF0ZSBhIHBhY2tlZCBhcnJheSBmcm9tIG1lc2ggZGF0YS5cbiAqIDxwPlxuICogTGF5b3V0IGNhbiBzb3J0IG9mIGJlIHRob3VnaHQgb2YgYXMgYSBDLXN0eWxlIHN0cnVjdCBkZWNsYXJhdGlvbi5cbiAqIHtAbGluayBNZXNofSdzIFRCRCguLi4pIG1ldGhvZCB3aWxsIHVzZSB0aGUge0BsaW5rIExheW91dH0gaW5zdGFuY2UgdG9cbiAqIHBhY2sgYW4gYXJyYXkgaW4gdGhlIGdpdmVuIGF0dHJpYnV0ZSBvcmRlci5cbiAqIDxwPlxuICogTGF5b3V0IGFsc28gaXMgdmVyeSBoZWxwZnVsIHdoZW4gY2FsbGluZyBhIFdlYkdMIGNvbnRleHQnc1xuICogPGNvZGU+dmVydGV4QXR0cmliUG9pbnRlcjwvY29kZT4gbWV0aG9kLiBJZiB5b3UndmUgY3JlYXRlZCBhIGJ1ZmZlciB1c2luZ1xuICogYSBMYXlvdXQgaW5zdGFuY2UsIHRoZW4gdGhlIHNhbWUgTGF5b3V0IGluc3RhbmNlIGNhbiBiZSB1c2VkIHRvIGRldGVybWluZVxuICogdGhlIHNpemUsIHR5cGUsIG5vcm1hbGl6ZWQsIHN0cmlkZSwgYW5kIG9mZnNldCBwYXJhbWV0ZXJzIGZvclxuICogPGNvZGU+dmVydGV4QXR0cmliUG9pbnRlcjwvY29kZT4uXG4gKiA8cD5cbiAqIEZvciBleGFtcGxlOlxuICogPHByZT48Y29kZT5cbiAqXG4gKiBjb25zdCBpbmRleCA9IGdsY3R4LmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sIFwicG9zXCIpO1xuICogZ2xjdHgudmVydGV4QXR0cmliUG9pbnRlcihcbiAqICAgbGF5b3V0LnBvc2l0aW9uLnNpemUsXG4gKiAgIGdsY3R4W2xheW91dC5wb3NpdGlvbi50eXBlXSxcbiAqICAgbGF5b3V0LnBvc2l0aW9uLm5vcm1hbGl6ZWQsXG4gKiAgIGxheW91dC5wb3NpdGlvbi5zdHJpZGUsXG4gKiAgIGxheW91dC5wb3NpdGlvbi5vZmZzZXQpO1xuICogPC9jb2RlPjwvcHJlPlxuICogQHNlZSB7QGxpbmsgTWVzaH1cbiAqL1xuZXhwb3J0IGNsYXNzIExheW91dCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgTGF5b3V0IG9iamVjdC4gVGhpcyBjb25zdHJ1Y3RvciB3aWxsIHRocm93IGlmIGFueSBkdXBsaWNhdGVcbiAgICAgKiBhdHRyaWJ1dGVzIGFyZSBnaXZlbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSAuLi5hdHRyaWJ1dGVzIC0gQW4gb3JkZXJlZCBsaXN0IG9mIGF0dHJpYnV0ZXMgdGhhdFxuICAgICAqICAgICAgICBkZXNjcmliZSB0aGUgZGVzaXJlZCBtZW1vcnkgbGF5b3V0IGZvciBlYWNoIHZlcnRleCBhdHRyaWJ1dGUuXG4gICAgICogICAgICAgIDxwPlxuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgTWVzaH1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciguLi5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xuICAgICAgICBsZXQgbWF4U3RyaWRlTXVsdGlwbGUgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpc1thdHRyaWJ1dGUua2V5XSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBEdXBsaWNhdGVBdHRyaWJ1dGVFeGNlcHRpb24oYXR0cmlidXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCBwYWRkaW5nIHRvIHNhdGlzZnkgV2ViR0wncyByZXF1aXJlbWVudCB0aGF0IGFsbFxuICAgICAgICAgICAgLy8gdmVydGV4QXR0cmliUG9pbnRlciBjYWxscyBoYXZlIGFuIG9mZnNldCB0aGF0IGlzIGEgbXVsdGlwbGUgb2ZcbiAgICAgICAgICAgIC8vIHRoZSB0eXBlIHNpemUuXG4gICAgICAgICAgICBpZiAob2Zmc2V0ICUgYXR0cmlidXRlLnNpemVPZlR5cGUgIT09IDApIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gYXR0cmlidXRlLnNpemVPZlR5cGUgLSBvZmZzZXQgJSBhdHRyaWJ1dGUuc2l6ZU9mVHlwZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0xheW91dCByZXF1aXJlcyBwYWRkaW5nIGJlZm9yZSAnICsgYXR0cmlidXRlLmtleSArICcgYXR0cmlidXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzW2F0dHJpYnV0ZS5rZXldID0ge1xuICAgICAgICAgICAgICAgICdhdHRyaWJ1dGUnOiBhdHRyaWJ1dGUsXG4gICAgICAgICAgICAgICAgJ3NpemUnOiBhdHRyaWJ1dGUuc2l6ZSxcbiAgICAgICAgICAgICAgICAndHlwZSc6IGF0dHJpYnV0ZS50eXBlLFxuICAgICAgICAgICAgICAgICdub3JtYWxpemVkJzogYXR0cmlidXRlLm5vcm1hbGl6ZWQsXG4gICAgICAgICAgICAgICAgJ29mZnNldCc6IG9mZnNldCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvZmZzZXQgKz0gYXR0cmlidXRlLnNpemVJbkJ5dGVzO1xuICAgICAgICAgICAgbWF4U3RyaWRlTXVsdGlwbGUgPSBNYXRoLm1heChcbiAgICAgICAgICAgICAgICBtYXhTdHJpZGVNdWx0aXBsZSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuc2l6ZU9mVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIHBhZGRpbmcgdG8gdGhlIGVuZCB0byBzYXRpc2Z5IFdlYkdMJ3MgcmVxdWlyZW1lbnQgdGhhdCBhbGxcbiAgICAgICAgLy8gdmVydGV4QXR0cmliUG9pbnRlciBjYWxscyBoYXZlIGEgc3RyaWRlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiB0aGVcbiAgICAgICAgLy8gdHlwZSBzaXplLiBCZWNhdXNlIHdlJ3JlIHB1dHRpbmcgZGlmZmVyZW50bHkgc2l6ZWQgYXR0cmlidXRlcyBpbnRvXG4gICAgICAgIC8vIHRoZSBzYW1lIGJ1ZmZlciwgaXQgbXVzdCBiZSBwYWRkZWQgdG8gYSBtdWx0aXBsZSBvZiB0aGUgbGFyZ2VzdFxuICAgICAgICAvLyB0eXBlIHNpemUuXG4gICAgICAgIGlmIChvZmZzZXQgJSBtYXhTdHJpZGVNdWx0aXBsZSAhPT0gMCkge1xuICAgICAgICAgICAgb2Zmc2V0ICs9IG1heFN0cmlkZU11bHRpcGxlIC0gb2Zmc2V0ICUgbWF4U3RyaWRlTXVsdGlwbGU7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0xheW91dCByZXF1aXJlcyBwYWRkaW5nIGF0IHRoZSBiYWNrJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdHJpZGUgPSBvZmZzZXQ7XG4gICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHRoaXNbYXR0cmlidXRlLmtleV0uc3RyaWRlID0gdGhpcy5zdHJpZGU7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLyoqXG4gKiBBbiBleGNlcHRpb24gZm9yIHdoZW4gdHdvIG9yIG1vcmUgb2YgdGhlIHNhbWUgYXR0cmlidXRlcyBhcmUgZm91bmQgaW4gdGhlXG4gKiBzYW1lIGxheW91dC5cbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIER1cGxpY2F0ZUF0dHJpYnV0ZUV4Y2VwdGlvbiB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgRHVwbGljYXRlQXR0cmlidXRlRXhjZXB0aW9uXG4gICAgICogQHBhcmFtIHtBdHRyaWJ1dGV9IGF0dHJpYnV0ZSAtIFRoZSBhdHRyaWJ1dGUgdGhhdCB3YXMgZm91bmQgbW9yZSB0aGFuXG4gICAgICogICAgICAgIG9uY2UgaW4gdGhlIHtAbGluayBMYXlvdXR9XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9ICdmb3VuZCBkdXBsaWNhdGUgYXR0cmlidXRlOiAnICsgYXR0cmlidXRlLmtleTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBob3cgYSB2ZXJ0ZXggYXR0cmlidXRlIHNob3VsZCBiZSBwYWNrZWQgaW50byBhbiBidWZmZXIuXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBBdHRyaWJ1dGUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBhdHRyaWJ1dGUuIERvIG5vdCBjYWxsIHRoaXMgZGlyZWN0bHksIHVzZSB0aGUgcHJlZGVmaW5lZFxuICAgICAqIGNvbnN0YW50cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIG5hbWUgb2YgdGhpcyBhdHRyaWJ1dGUgYXMgaWYgaXQgd2VyZSBhIGtleSBpblxuICAgICAqICAgICAgICBhbiBPYmplY3QuIFVzZSB0aGUgY2FtZWwgY2FzZSB2ZXJzaW9uIG9mIHRoZSB1cHBlciBzbmFrZSBjYXNlXG4gICAgICogICAgICAgIGNvbnN0IG5hbWUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgLSBUaGUgbnVtYmVyIG9mIGNvbXBvbmVudHMgcGVyIHZlcnRleCBhdHRyaWJ1dGUuXG4gICAgICogICAgICAgIE11c3QgYmUgMSwgMiwgMywgb3IgNC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRoZSBkYXRhIHR5cGUgb2YgZWFjaCBjb21wb25lbnQgZm9yIHRoaXNcbiAgICAgKiAgICAgICAgYXR0cmlidXRlLiBQb3NzaWJsZSB2YWx1ZXM6PGJyLz5cbiAgICAgKiAgICAgICAgXCJCWVRFXCI6IHNpZ25lZCA4LWJpdCBpbnRlZ2VyLCB3aXRoIHZhbHVlcyBpbiBbLTEyOCwgMTI3XTxici8+XG4gICAgICogICAgICAgIFwiU0hPUlRcIjogc2lnbmVkIDE2LWJpdCBpbnRlZ2VyLCB3aXRoIHZhbHVlcyBpblxuICAgICAqICAgICAgICAgICAgWy0zMjc2OCwgMzI3NjddPGJyLz5cbiAgICAgKiAgICAgICAgXCJVTlNJR05FRF9CWVRFXCI6IHVuc2lnbmVkIDgtYml0IGludGVnZXIsIHdpdGggdmFsdWVzIGluXG4gICAgICogICAgICAgICAgICBbMCwgMjU1XTxici8+XG4gICAgICogICAgICAgIFwiVU5TSUdORURfU0hPUlRcIjogdW5zaWduZWQgMTYtYml0IGludGVnZXIsIHdpdGggdmFsdWVzIGluXG4gICAgICogICAgICAgICAgICBbMCwgNjU1MzVdPGJyLz5cbiAgICAgKiAgICAgICAgXCJGTE9BVFwiOiAzMi1iaXQgZmxvYXRpbmcgcG9pbnQgbnVtYmVyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBub3JtYWxpemVkIC0gV2hldGhlciBpbnRlZ2VyIGRhdGEgdmFsdWVzIHNob3VsZCBiZVxuICAgICAqICAgICAgICBub3JtYWxpemVkIHdoZW4gYmVpbmcgY2FzdGVkIHRvIGEgZmxvYXQuPGJyLz5cbiAgICAgKiAgICAgICAgSWYgdHJ1ZSwgc2lnbmVkIGludGVnZXJzIGFyZSBub3JtYWxpemVkIHRvIFstMSwgMV0uPGJyLz5cbiAgICAgKiAgICAgICAgSWYgdHJ1ZSwgdW5zaWduZWQgaW50ZWdlcnMgYXJlIG5vcm1hbGl6ZWQgdG8gWzAsIDFdLjxici8+XG4gICAgICogICAgICAgIEZvciB0eXBlIFwiRkxPQVRcIiwgdGhpcyBwYXJhbWV0ZXIgaGFzIG5vIGVmZmVjdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihrZXksIHNpemUsIHR5cGUsIG5vcm1hbGl6ZWQ9ZmFsc2UpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMubm9ybWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNpemVPZlR5cGUgPSBzaXplSW5CeXRlc09mVHlwZSh0eXBlKTtcbiAgICAgICAgdGhpcy5zaXplSW5CeXRlcyA9IHRoaXMuc2l6ZU9mVHlwZSAqIHNpemU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gQSB0eXBlIGFjY2VwdGVkIGJ5IHtAbGluayBBdHRyaWJ1dGV9LlxuICogQHJldHVybiBUaGUgc2l6ZSAoaW4gYnl0ZXMpIGZvciBhIGdpdmVuIHR5cGUuXG4gKiBAc2VlIHtAbGluayBBdHRyaWJ1dGV9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzaXplSW5CeXRlc09mVHlwZSh0eXBlKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ0JZVEUnOlxuICAgICAgICBjYXNlICdVTlNJR05FRF9CWVRFJzpcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICBjYXNlICdTSE9SVCc6XG4gICAgICAgIGNhc2UgJ1VOU0lHTkVEX1NIT1JUJzpcbiAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICBjYXNlICdGTE9BVCc6XG4gICAgICAgICAgICByZXR1cm4gNDtcbiAgICB9XG59XG5cbi8vIEdlb21ldHJ5IGF0dHJpYnV0ZXNcbi8qKlxuICogQXR0cmlidXRlIGxheW91dCB0byBwYWNrIGEgdmVydGV4J3MgeCwgeSwgJiB6IGFzIGZsb2F0c1xuICpcbiAqIEBzZWUge0BsaW5rIExheW91dH1cbiAqL1xuTGF5b3V0LlBPU0lUSU9OID0gbmV3IEF0dHJpYnV0ZSgncG9zaXRpb24nLCAzLCAnRkxPQVQnKTtcblxuLyoqXG4gKiBBdHRyaWJ1dGUgbGF5b3V0IHRvIHBhY2sgYSB2ZXJ0ZXgncyBub3JtYWwncyB4LCB5LCAmIHogYXMgZmxvYXRzXG4gKlxuICogQHNlZSB7QGxpbmsgTGF5b3V0fVxuICovXG5MYXlvdXQuTk9STUFMID0gbmV3IEF0dHJpYnV0ZSgnbm9ybWFsJywgMywgJ0ZMT0FUJyk7XG5cbi8qKlxuICogQXR0cmlidXRlIGxheW91dCB0byBwYWNrIGEgdmVydGV4J3Mgbm9ybWFsJ3MgeCwgeSwgJiB6IGFzIGZsb2F0cy5cbiAqIDxwPlxuICogVGhpcyB2YWx1ZSB3aWxsIGJlIGNvbXB1dGVkIG9uLXRoZS1mbHkgYmFzZWQgb24gdGhlIHRleHR1cmUgY29vcmRpbmF0ZXMuXG4gKiBJZiBubyB0ZXh0dXJlIGNvb3JkaW5hdGVzIGFyZSBhdmFpbGFibGUsIHRoZSBnZW5lcmF0ZWQgdmFsdWUgd2lsbCBkZWZhdWx0IHRvXG4gKiAwLCAwLCAwLlxuICpcbiAqIEBzZWUge0BsaW5rIExheW91dH1cbiAqL1xuTGF5b3V0LlRBTkdFTlQgPSBuZXcgQXR0cmlidXRlKCd0YW5nZW50JywgMywgJ0ZMT0FUJyk7XG5cbi8qKlxuICogQXR0cmlidXRlIGxheW91dCB0byBwYWNrIGEgdmVydGV4J3Mgbm9ybWFsJ3MgYml0YW5nZW50IHgsIHksICYgeiBhcyBmbG9hdHMuXG4gKiA8cD5cbiAqIFRoaXMgdmFsdWUgd2lsbCBiZSBjb21wdXRlZCBvbi10aGUtZmx5IGJhc2VkIG9uIHRoZSB0ZXh0dXJlIGNvb3JkaW5hdGVzLlxuICogSWYgbm8gdGV4dHVyZSBjb29yZGluYXRlcyBhcmUgYXZhaWxhYmxlLCB0aGUgZ2VuZXJhdGVkIHZhbHVlIHdpbGwgZGVmYXVsdCB0b1xuICogMCwgMCwgMC5cbiAqIEBzZWUge0BsaW5rIExheW91dH1cbiAqL1xuTGF5b3V0LkJJVEFOR0VOVCA9IG5ldyBBdHRyaWJ1dGUoJ2JpdGFuZ2VudCcsIDMsICdGTE9BVCcpO1xuXG4vKipcbiAqIEF0dHJpYnV0ZSBsYXlvdXQgdG8gcGFjayBhIHZlcnRleCdzIHRleHR1cmUgY29vcmRpbmF0ZXMnIHUgJiB2IGFzIGZsb2F0c1xuICpcbiAqIEBzZWUge0BsaW5rIExheW91dH1cbiAqL1xuTGF5b3V0LlVWID0gbmV3IEF0dHJpYnV0ZSgndXYnLCAyLCAnRkxPQVQnKTtcblxuLy8gTWF0ZXJpYWwgYXR0cmlidXRlc1xuXG4vKipcbiAqIEF0dHJpYnV0ZSBsYXlvdXQgdG8gcGFjayBhbiB1bnNpZ25lZCBzaG9ydCB0byBiZSBpbnRlcnByZXRlZCBhcyBhIHRoZSBpbmRleFxuICogaW50byBhIHtAbGluayBNZXNofSdzIG1hdGVyaWFscyBsaXN0LlxuICogPHA+XG4gKiBUaGUgaW50ZW50aW9uIG9mIHRoaXMgdmFsdWUgaXMgdG8gc2VuZCBhbGwgb2YgdGhlIHtAbGluayBNZXNofSdzIG1hdGVyaWFsc1xuICogaW50byBtdWx0aXBsZSBzaGFkZXIgdW5pZm9ybXMgYW5kIHRoZW4gcmVmZXJlbmNlIHRoZSBjdXJyZW50IG9uZSBieSB0aGlzXG4gKiB2ZXJ0ZXggYXR0cmlidXRlLlxuICogPHA+XG4gKiBleGFtcGxlIGdsc2wgY29kZTpcbiAqXG4gKiA8cHJlPjxjb2RlPlxuICogIC8vIHRoaXMgaXMgYm91bmQgdXNpbmcgTUFURVJJQUxfSU5ERVhcbiAqICBhdHRyaWJ1dGUgaW50IG1hdGVyaWFsSW5kZXg7XG4gKlxuICogIHN0cnVjdCBNYXRlcmlhbCB7XG4gKiAgICB2ZWMzIGRpZmZ1c2U7XG4gKiAgICB2ZWMzIHNwZWN1bGFyO1xuICogICAgdmVjMyBzcGVjdWxhckV4cG9uZW50O1xuICogIH07XG4gKlxuICogIHVuaWZvcm0gTWF0ZXJpYWwgbWF0ZXJpYWxzW01BWF9NQVRFUklBTFNdO1xuICpcbiAqICAvLyAuLi5cbiAqXG4gKiAgdmVjMyBkaWZmdXNlID0gbWF0ZXJpYWxzW21hdGVyaWFsSW5kZXhdO1xuICpcbiAqIDwvY29kZT48L3ByZT5cbiAqIFRPRE86IE1vcmUgZGVzY3JpcHRpb24gJiB0ZXN0IHRvIG1ha2Ugc3VyZSBzdWJzY3JpcHRpbmcgYnkgYXR0cmlidXRlcyBldmVuXG4gKiB3b3JrcyBmb3Igd2ViZ2xcbiAqXG4gKiBAc2VlIHtAbGluayBMYXlvdXR9XG4gKi9cbkxheW91dC5NQVRFUklBTF9JTkRFWCA9IG5ldyBBdHRyaWJ1dGUoJ21hdGVyaWFsSW5kZXgnLCAxLCAnU0hPUlQnKTtcbkxheW91dC5NQVRFUklBTF9FTkFCTEVEID0gbmV3IEF0dHJpYnV0ZSgnbWF0ZXJpYWxFbmFibGVkJywgMSwgJ1VOU0lHTkVEX1NIT1JUJyk7XG5MYXlvdXQuQU1CSUVOVCA9IG5ldyBBdHRyaWJ1dGUoJ2FtYmllbnQnLCAzLCAnRkxPQVQnKTtcbkxheW91dC5ESUZGVVNFID0gbmV3IEF0dHJpYnV0ZSgnZGlmZnVzZScsIDMsICdGTE9BVCcpO1xuTGF5b3V0LlNQRUNVTEFSID0gbmV3IEF0dHJpYnV0ZSgnc3BlY3VsYXInLCAzLCAnRkxPQVQnKTtcbkxheW91dC5TUEVDVUxBUl9FWFBPTkVOVCA9IG5ldyBBdHRyaWJ1dGUoJ3NwZWN1bGFyRXhwb25lbnQnLCAzLCAnRkxPQVQnKTtcbkxheW91dC5FTUlTU0lWRSA9IG5ldyBBdHRyaWJ1dGUoJ2VtaXNzaXZlJywgMywgJ0ZMT0FUJyk7XG5MYXlvdXQuVFJBTlNNSVNTSU9OX0ZJTFRFUiA9IG5ldyBBdHRyaWJ1dGUoJ3RyYW5zbWlzc2lvbkZpbHRlcicsIDMsICdGTE9BVCcpO1xuTGF5b3V0LkRJU1NPTFZFID0gbmV3IEF0dHJpYnV0ZSgnZGlzc29sdmUnLCAxLCAnRkxPQVQnKTtcbkxheW91dC5JTExVTUlOQVRJT04gPSBuZXcgQXR0cmlidXRlKCdpbGx1bWluYXRpb24nLCAxLCAnVU5TSUdORURfU0hPUlQnKTtcbkxheW91dC5SRUZSQUNUSU9OX0lOREVYID0gbmV3IEF0dHJpYnV0ZSgncmVmcmFjdGlvbkluZGV4JywgMSwgJ0ZMT0FUJyk7XG5MYXlvdXQuU0hBUlBORVNTID0gbmV3IEF0dHJpYnV0ZSgnc2hhcnBuZXNzJywgMSwgJ0ZMT0FUJyk7XG5MYXlvdXQuTUFQX0RJRkZVU0UgPSBuZXcgQXR0cmlidXRlKCdtYXBEaWZmdXNlJywgMSwgJ1NIT1JUJyk7XG5MYXlvdXQuTUFQX0FNQklFTlQgPSBuZXcgQXR0cmlidXRlKCdtYXBBbWJpZW50JywgMSwgJ1NIT1JUJyk7XG5MYXlvdXQuTUFQX1NQRUNVTEFSID0gbmV3IEF0dHJpYnV0ZSgnbWFwU3BlY3VsYXInLCAxLCAnU0hPUlQnKTtcbkxheW91dC5NQVBfU1BFQ1VMQVJfRVhQT05FTlQgPSBuZXcgQXR0cmlidXRlKCdtYXBTcGVjdWxhckV4cG9uZW50JywgMSwgJ1NIT1JUJyk7XG5MYXlvdXQuTUFQX0RJU1NPTFZFID0gbmV3IEF0dHJpYnV0ZSgnbWFwRGlzc29sdmUnLCAxLCAnU0hPUlQnKTtcbkxheW91dC5BTlRJX0FMSUFTSU5HID0gbmV3IEF0dHJpYnV0ZSgnYW50aUFsaWFzaW5nJywgMSwgJ1VOU0lHTkVEX1NIT1JUJyk7XG5MYXlvdXQuTUFQX0JVTVAgPSBuZXcgQXR0cmlidXRlKCdtYXBCdW1wJywgMSwgJ1NIT1JUJyk7XG5MYXlvdXQuTUFQX0RJU1BMQUNFTUVOVCA9IG5ldyBBdHRyaWJ1dGUoJ21hcERpc3BsYWNlbWVudCcsIDEsICdTSE9SVCcpO1xuTGF5b3V0Lk1BUF9ERUNBTCA9IG5ldyBBdHRyaWJ1dGUoJ21hcERlY2FsJywgMSwgJ1NIT1JUJyk7XG5MYXlvdXQuTUFQX0VNSVNTSVZFID0gbmV3IEF0dHJpYnV0ZSgnbWFwRW1pc3NpdmUnLCAxLCAnU0hPUlQnKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9sYXlvdXQuanMiLCJpbXBvcnQge0xheW91dH0gZnJvbSBcIi4vbGF5b3V0XCJcblxuLyoqXG4gKiBUaGUgbWFpbiBNZXNoIGNsYXNzLiBUaGUgY29uc3RydWN0b3Igd2lsbCBwYXJzZSB0aHJvdWdoIHRoZSBPQkogZmlsZSBkYXRhXG4gKiBhbmQgY29sbGVjdCB0aGUgdmVydGV4LCB2ZXJ0ZXggbm9ybWFsLCB0ZXh0dXJlLCBhbmQgZmFjZSBpbmZvcm1hdGlvbi4gVGhpc1xuICogaW5mb3JtYXRpb24gY2FuIHRoZW4gYmUgdXNlZCBsYXRlciBvbiB3aGVuIGNyZWF0aW5nIHlvdXIgVkJPcy4gU2VlXG4gKiBPQkouaW5pdE1lc2hCdWZmZXJzIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byB1c2UgdGhlIG5ld2x5IGNyZWF0ZWQgTWVzaFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXNoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBNZXNoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9iamVjdERhdGEgLSBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhbiBPQkogZmlsZSB3aXRoXG4gICAgICogICAgIG5ld2xpbmVzIHByZXNlcnZlZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGEgSlMgb2JqZWN0IGNvbnRhaW5pbmcgdmFsaWQgb3B0aW9ucy4gU2VlIGNsYXNzXG4gICAgICogICAgIGRvY3VtZW50YXRpb24gZm9yIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHtib29sfSBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQgLSBUZXh0dXJlIGNvb3JkaW5hdGVzIGNhbiBoYXZlXG4gICAgICogICAgIGFuIG9wdGlvbmFsIFwid1wiIGNvb3JkaW5hdGUgYWZ0ZXIgdGhlIHUgYW5kIHYgY29vcmRpbmF0ZXMuIFRoaXMgZXh0cmFcbiAgICAgKiAgICAgdmFsdWUgY2FuIGJlIHVzZWQgaW4gb3JkZXIgdG8gcGVyZm9ybSBmYW5jeSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlXG4gICAgICogICAgIHRleHR1cmVzIHRoZW1zZWx2ZXMuIERlZmF1bHQgaXMgdG8gdHJ1bmNhdGUgdG8gb25seSB0aGUgdSBhbiB2XG4gICAgICogICAgIGNvb3JkaW5hdGVzLiBQYXNzaW5nIHRydWUgd2lsbCBwcm92aWRlIGEgZGVmYXVsdCB2YWx1ZSBvZiAwIGluIHRoZVxuICAgICAqICAgICBldmVudCB0aGF0IGFueSBvciBhbGwgdGV4dHVyZSBjb29yZGluYXRlcyBkb24ndCBwcm92aWRlIGEgdyB2YWx1ZS5cbiAgICAgKiAgICAgQWx3YXlzIHVzZSB0aGUgdGV4dHVyZVN0cmlkZSBhdHRyaWJ1dGUgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHRoZVxuICAgICAqICAgICBzdHJpZGUgbGVuZ3RoIG9mIHRoZSB0ZXh0dXJlIGNvb3JkaW5hdGVzIHdoZW4gcmVuZGVyaW5nIHRoZSBlbGVtZW50XG4gICAgICogICAgIGFycmF5LlxuICAgICAqIEBwYXJhbSB7Ym9vbH0gb3B0aW9ucy5jYWxjVGFuZ2VudHNBbmRCaXRhbmdlbnRzIC0gQ2FsY3VsYXRlIHRoZSB0YW5nZW50c1xuICAgICAqICAgICBhbmQgYml0YW5nZW50cyB3aGVuIGxvYWRpbmcgb2YgdGhlIE9CSiBpcyBjb21wbGV0ZWQuIFRoaXMgYWRkcyB0d28gbmV3XG4gICAgICogICAgIGF0dHJpYnV0ZXMgdG8gdGhlIE1lc2ggaW5zdGFuY2U6IGB0YW5nZW50c2AgYW5kIGBiaXRhbmdlbnRzYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvYmplY3REYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm1hdGVyaWFscyA9IG9wdGlvbnMubWF0ZXJpYWxzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQgPSAhIW9wdGlvbnMuZW5hYmxlV1RleHR1cmVDb29yZDtcbiAgICAgICAgb3B0aW9ucy5pbmRpY2VzUGVyTWF0ZXJpYWwgPSAhIW9wdGlvbnMuaW5kaWNlc1Blck1hdGVyaWFsO1xuXG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcbiAgICAgICAgLy8gdGhlIGxpc3Qgb2YgdW5pcXVlIHZlcnRleCwgbm9ybWFsLCB0ZXh0dXJlLCBhdHRyaWJ1dGVzXG4gICAgICAgIHNlbGYudmVydGljZXMgPSBbXTtcbiAgICAgICAgc2VsZi52ZXJ0ZXhOb3JtYWxzID0gW107XG4gICAgICAgIHNlbGYudGV4dHVyZXMgPSBbXTtcbiAgICAgICAgLy8gdGhlIGluZGljaWVzIHRvIGRyYXcgdGhlIGZhY2VzXG4gICAgICAgIHNlbGYuaW5kaWNlcyA9IFtdO1xuICAgICAgICBzZWxmLnRleHR1cmVTdHJpZGUgPSBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQ/IDMgOiAyO1xuXG4gICAgICAgIC8qXG4gICAgICAgIFRoZSBPQkogZmlsZSBmb3JtYXQgZG9lcyBhIHNvcnQgb2YgY29tcHJlc3Npb24gd2hlbiBzYXZpbmcgYSBtb2RlbCBpbiBhXG4gICAgICAgIHByb2dyYW0gbGlrZSBCbGVuZGVyLiBUaGVyZSBhcmUgYXQgbGVhc3QgMyBzZWN0aW9ucyAoNCBpbmNsdWRpbmcgdGV4dHVyZXMpXG4gICAgICAgIHdpdGhpbiB0aGUgZmlsZS4gRWFjaCBsaW5lIGluIGEgc2VjdGlvbiBiZWdpbnMgd2l0aCB0aGUgc2FtZSBzdHJpbmc6XG4gICAgICAgICAgKiAndic6IGluZGljYXRlcyB2ZXJ0ZXggc2VjdGlvblxuICAgICAgICAgICogJ3ZuJzogaW5kaWNhdGVzIHZlcnRleCBub3JtYWwgc2VjdGlvblxuICAgICAgICAgICogJ2YnOiBpbmRpY2F0ZXMgdGhlIGZhY2VzIHNlY3Rpb25cbiAgICAgICAgICAqICd2dCc6IGluZGljYXRlcyB2ZXJ0ZXggdGV4dHVyZSBzZWN0aW9uIChpZiB0ZXh0dXJlcyB3ZXJlIHVzZWQgb24gdGhlIG1vZGVsKVxuICAgICAgICBFYWNoIG9mIHRoZSBhYm92ZSBzZWN0aW9ucyAoZXhjZXB0IGZvciB0aGUgZmFjZXMgc2VjdGlvbikgaXMgYSBsaXN0L3NldCBvZlxuICAgICAgICB1bmlxdWUgdmVydGljZXMuXG5cbiAgICAgICAgRWFjaCBsaW5lIG9mIHRoZSBmYWNlcyBzZWN0aW9uIGNvbnRhaW5zIGEgbGlzdCBvZlxuICAgICAgICAodmVydGV4LCBbdGV4dHVyZV0sIG5vcm1hbCkgZ3JvdXBzLlxuXG4gICAgICAgICoqTm90ZToqKiBUaGUgZm9sbG93aW5nIGRvY3VtZW50YXRpb24gd2lsbCB1c2UgYSBjYXBpdGFsIFwiVlwiIFZlcnRleCB0b1xuICAgICAgICBkZW5vdGUgdGhlIGFib3ZlICh2ZXJ0ZXgsIFt0ZXh0dXJlXSwgbm9ybWFsKSBncm91cHMgd2hlcmVhcyBhIGxvd2VyY2FzZVxuICAgICAgICBcInZcIiB2ZXJ0ZXggaXMgdXNlZCB0byBkZW5vdGUgYW4gWCwgWSwgWiBjb29yZGluYXRlLlxuXG4gICAgICAgIFNvbWUgZXhhbXBsZXM6XG4gICAgICAgICAgICAvLyB0aGUgdGV4dHVyZSBpbmRleCBpcyBvcHRpb25hbCwgYm90aCBmb3JtYXRzIGFyZSBwb3NzaWJsZSBmb3IgbW9kZWxzXG4gICAgICAgICAgICAvLyB3aXRob3V0IGEgdGV4dHVyZSBhcHBsaWVkXG4gICAgICAgICAgICBmIDEvMjUgMTgvNDYgMTIvMzFcbiAgICAgICAgICAgIGYgMS8vMjUgMTgvLzQ2IDEyLy8zMVxuXG4gICAgICAgICAgICAvLyBBIDMgdmVydGV4IGZhY2Ugd2l0aCB0ZXh0dXJlIGluZGljZXNcbiAgICAgICAgICAgIGYgMTYvOTIvMTEgMTQvMTAxLzIyIDEvNjkvMVxuXG4gICAgICAgICAgICAvLyBBIDQgdmVydGV4IGZhY2VcbiAgICAgICAgICAgIGYgMTYvOTIvMTEgNDAvMTA5LzQwIDM4LzExNC8zOCAxNC8xMDEvMjJcblxuICAgICAgICBUaGUgZmlyc3QgdHdvIGxpbmVzIGFyZSBleGFtcGxlcyBvZiBhIDMgdmVydGV4IGZhY2Ugd2l0aG91dCBhIHRleHR1cmUgYXBwbGllZC5cbiAgICAgICAgVGhlIHNlY29uZCBpcyBhbiBleGFtcGxlIG9mIGEgMyB2ZXJ0ZXggZmFjZSB3aXRoIGEgdGV4dHVyZSBhcHBsaWVkLlxuICAgICAgICBUaGUgdGhpcmQgaXMgYW4gZXhhbXBsZSBvZiBhIDQgdmVydGV4IGZhY2UuIE5vdGU6IGEgZmFjZSBjYW4gY29udGFpbiBOXG4gICAgICAgIG51bWJlciBvZiB2ZXJ0aWNlcy5cblxuICAgICAgICBFYWNoIG51bWJlciB0aGF0IGFwcGVhcnMgaW4gb25lIG9mIHRoZSBncm91cHMgaXMgYSAxLWJhc2VkIGluZGV4XG4gICAgICAgIGNvcnJlc3BvbmRpbmcgdG8gYW4gaXRlbSBmcm9tIHRoZSBvdGhlciBzZWN0aW9ucyAobWVhbmluZyB0aGF0IGluZGV4aW5nXG4gICAgICAgIHN0YXJ0cyBhdCBvbmUgYW5kICpub3QqIHplcm8pLlxuXG4gICAgICAgIEZvciBleGFtcGxlOlxuICAgICAgICAgICAgYGYgMTYvOTIvMTFgIGlzIHNheWluZyB0b1xuICAgICAgICAgICAgICAtIHRha2UgdGhlIDE2dGggZWxlbWVudCBmcm9tIHRoZSBbdl0gdmVydGV4IGFycmF5XG4gICAgICAgICAgICAgIC0gdGFrZSB0aGUgOTJuZCBlbGVtZW50IGZyb20gdGhlIFt2dF0gdGV4dHVyZSBhcnJheVxuICAgICAgICAgICAgICAtIHRha2UgdGhlIDExdGggZWxlbWVudCBmcm9tIHRoZSBbdm5dIG5vcm1hbCBhcnJheVxuICAgICAgICAgICAgYW5kIHRvZ2V0aGVyIHRoZXkgbWFrZSBhIHVuaXF1ZSB2ZXJ0ZXguXG4gICAgICAgIFVzaW5nIGFsbCAzKyB1bmlxdWUgVmVydGljZXMgZnJvbSB0aGUgZmFjZSBsaW5lIHdpbGwgcHJvZHVjZSBhIHBvbHlnb24uXG5cbiAgICAgICAgTm93LCB5b3UgY291bGQganVzdCBnbyB0aHJvdWdoIHRoZSBPQkogZmlsZSBhbmQgY3JlYXRlIGEgbmV3IHZlcnRleCBmb3JcbiAgICAgICAgZWFjaCBmYWNlIGxpbmUgYW5kIFdlYkdMIHdpbGwgZHJhdyB3aGF0IGFwcGVhcnMgdG8gYmUgdGhlIHNhbWUgbW9kZWwuXG4gICAgICAgIEhvd2V2ZXIsIHZlcnRpY2VzIHdpbGwgYmUgb3ZlcmxhcHBlZCBhbmQgZHVwbGljYXRlZCBhbGwgb3ZlciB0aGUgcGxhY2UuXG5cbiAgICAgICAgQ29uc2lkZXIgYSBjdWJlIGluIDNEIHNwYWNlIGNlbnRlcmVkIGFib3V0IHRoZSBvcmlnaW4gYW5kIGVhY2ggc2lkZSBpc1xuICAgICAgICAyIHVuaXRzIGxvbmcuIFRoZSBmcm9udCBmYWNlICh3aXRoIHRoZSBwb3NpdGl2ZSBaLWF4aXMgcG9pbnRpbmcgdG93YXJkc1xuICAgICAgICB5b3UpIHdvdWxkIGhhdmUgYSBUb3AgUmlnaHQgdmVydGV4IChsb29raW5nIG9ydGhvZ29uYWwgdG8gaXRzIG5vcm1hbClcbiAgICAgICAgbWFwcGVkIGF0ICgxLDEsMSkgVGhlIHJpZ2h0IGZhY2Ugd291bGQgaGF2ZSBhIFRvcCBMZWZ0IHZlcnRleCAobG9va2luZ1xuICAgICAgICBvcnRob2dvbmFsIHRvIGl0cyBub3JtYWwpIGF0ICgxLDEsMSkgYW5kIHRoZSB0b3AgZmFjZSB3b3VsZCBoYXZlIGEgQm90dG9tXG4gICAgICAgIFJpZ2h0IHZlcnRleCAobG9va2luZyBvcnRob2dvbmFsIHRvIGl0cyBub3JtYWwpIGF0ICgxLDEsMSkuIEVhY2ggZmFjZVxuICAgICAgICBoYXMgYSB2ZXJ0ZXggYXQgdGhlIHNhbWUgY29vcmRpbmF0ZXMsIGhvd2V2ZXIsIHRocmVlIGRpc3RpbmN0IHZlcnRpY2VzXG4gICAgICAgIHdpbGwgYmUgZHJhd24gYXQgdGhlIHNhbWUgc3BvdC5cblxuICAgICAgICBUbyBzb2x2ZSB0aGUgaXNzdWUgb2YgZHVwbGljYXRlIFZlcnRpY2VzICh0aGUgYCh2ZXJ0ZXgsIFt0ZXh0dXJlXSwgbm9ybWFsKWBcbiAgICAgICAgZ3JvdXBzKSwgd2hpbGUgaXRlcmF0aW5nIHRocm91Z2ggdGhlIGZhY2UgbGluZXMsIHdoZW4gYSBncm91cCBpcyBlbmNvdW50ZXJlZFxuICAgICAgICB0aGUgd2hvbGUgZ3JvdXAgc3RyaW5nICgnMTYvOTIvMTEnKSBpcyBjaGVja2VkIHRvIHNlZSBpZiBpdCBleGlzdHMgaW4gdGhlXG4gICAgICAgIHBhY2tlZC5oYXNoaW5kaWNlcyBvYmplY3QsIGFuZCBpZiBpdCBkb2Vzbid0LCB0aGUgaW5kaWNlcyBpdCBzcGVjaWZpZXNcbiAgICAgICAgYXJlIHVzZWQgdG8gbG9vayB1cCBlYWNoIGF0dHJpYnV0ZSBpbiB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUgYXJyYXlzXG4gICAgICAgIGFscmVhZHkgY3JlYXRlZC4gVGhlIHZhbHVlcyBhcmUgdGhlbiBjb3BpZWQgdG8gdGhlIGNvcnJlc3BvbmRpbmcgdW5wYWNrZWRcbiAgICAgICAgYXJyYXkgKGZsYXR0ZW5lZCB0byBwbGF5IG5pY2Ugd2l0aCBXZWJHTCdzIEVMRU1FTlRfQVJSQVlfQlVGRkVSIGluZGV4aW5nKSxcbiAgICAgICAgdGhlIGdyb3VwIHN0cmluZyBpcyBhZGRlZCB0byB0aGUgaGFzaGluZGljZXMgc2V0IGFuZCB0aGUgY3VycmVudCB1bnBhY2tlZFxuICAgICAgICBpbmRleCBpcyB1c2VkIGFzIHRoaXMgaGFzaGluZGljZXMgdmFsdWUgc28gdGhhdCB0aGUgZ3JvdXAgb2YgZWxlbWVudHMgY2FuXG4gICAgICAgIGJlIHJldXNlZC4gVGhlIHVucGFja2VkIGluZGV4IGlzIGluY3JlbWVudGVkLiBJZiB0aGUgZ3JvdXAgc3RyaW5nIGFscmVhZHlcbiAgICAgICAgZXhpc3RzIGluIHRoZSBoYXNoaW5kaWNlcyBvYmplY3QsIGl0cyBjb3JyZXNwb25kaW5nIHZhbHVlIGlzIHRoZSBpbmRleCBvZlxuICAgICAgICB0aGF0IGdyb3VwIGFuZCBpcyBhcHBlbmRlZCB0byB0aGUgdW5wYWNrZWQgaW5kaWNlcyBhcnJheS5cbiAgICAgICAqL1xuICAgICAgICB0aGlzLm5hbWUgPSAnJztcbiAgICAgICAgY29uc3QgdmVydHMgPSBbXTtcbiAgICAgICAgY29uc3QgdmVydE5vcm1hbHMgPSBbXTtcbiAgICAgICAgY29uc3QgdGV4dHVyZXMgPSBbXTtcbiAgICAgICAgY29uc3QgdW5wYWNrZWQgPSB7fTtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxOYW1lc0J5SW5kZXggPSBbXTtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRpY2VzQnlOYW1lID0ge307XG4gICAgICAgIC8vIGtlZXAgdHJhY2sgb2Ygd2hhdCBtYXRlcmlhbCB3ZSd2ZSBzZWVuIGxhc3RcbiAgICAgICAgbGV0IGN1cnJlbnRNYXRlcmlhbEluZGV4ID0gLTE7XG4gICAgICAgIC8vIGtlZXAgdHJhY2sgaWYgcHVzaGluZyBpbmRpY2VzIGJ5IG1hdGVyaWFscyAtIG90aGVyd2lzZSBub3QgdXNlZFxuICAgICAgICBsZXQgY3VycmVudE9iamVjdEJ5TWF0ZXJpYWxJbmRleCA9IDA7XG4gICAgICAgIC8vIHVucGFja2luZyBzdHVmZlxuICAgICAgICB1bnBhY2tlZC52ZXJ0cyA9IFtdO1xuICAgICAgICB1bnBhY2tlZC5ub3JtcyA9IFtdO1xuICAgICAgICB1bnBhY2tlZC50ZXh0dXJlcyA9IFtdO1xuICAgICAgICB1bnBhY2tlZC5oYXNoaW5kaWNlcyA9IHt9O1xuICAgICAgICB1bnBhY2tlZC5pbmRpY2VzID0gW1tdXTtcbiAgICAgICAgdW5wYWNrZWQubWF0ZXJpYWxJbmRpY2VzID0gW107XG4gICAgICAgIHVucGFja2VkLmluZGV4ID0gMDtcblxuICAgICAgICBjb25zdCBWRVJURVhfUkUgPSAvXnZcXHMvO1xuICAgICAgICBjb25zdCBOT1JNQUxfUkUgPSAvXnZuXFxzLztcbiAgICAgICAgY29uc3QgVEVYVFVSRV9SRSA9IC9ednRcXHMvO1xuICAgICAgICBjb25zdCBGQUNFX1JFID0gL15mXFxzLztcbiAgICAgICAgY29uc3QgV0hJVEVTUEFDRV9SRSA9IC9cXHMrLztcbiAgICAgICAgY29uc3QgVVNFX01BVEVSSUFMX1JFID0gL151c2VtdGwvO1xuXG4gICAgICAgIC8vIGFycmF5IG9mIGxpbmVzIHNlcGFyYXRlZCBieSB0aGUgbmV3bGluZVxuICAgICAgICBjb25zdCBsaW5lcyA9IG9iamVjdERhdGEuc3BsaXQoJ1xcbicpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG4gICAgICAgICAgICBpZiAoIWxpbmUgfHwgbGluZS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gbGluZS5zcGxpdChXSElURVNQQUNFX1JFKTtcbiAgICAgICAgICAgIGVsZW1lbnRzLnNoaWZ0KCk7XG5cbiAgICAgICAgICAgIGlmIChWRVJURVhfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB2ZXJ0ZXhcbiAgICAgICAgICAgICAgICB2ZXJ0cy5wdXNoKC4uLmVsZW1lbnRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoTk9STUFMX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdmVydGV4IG5vcm1hbFxuICAgICAgICAgICAgICAgIHZlcnROb3JtYWxzLnB1c2goLi4uZWxlbWVudHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChURVhUVVJFX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29vcmRzID0gZWxlbWVudHM7XG4gICAgICAgICAgICAgICAgLy8gYnkgZGVmYXVsdCwgdGhlIGxvYWRlciB3aWxsIG9ubHkgbG9vayBhdCB0aGUgVSBhbmQgVlxuICAgICAgICAgICAgICAgIC8vIGNvb3JkaW5hdGVzIG9mIHRoZSB2dCBkZWNsYXJhdGlvbi4gU28sIHRoaXMgdHJ1bmNhdGVzIHRoZVxuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnRzIHRvIG9ubHkgdGhvc2UgMiB2YWx1ZXMuIElmIFcgdGV4dHVyZSBjb29yZGluYXRlXG4gICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBpcyBlbmFibGVkLCB0aGVuIHRoZSB0ZXh0dXJlIGNvb3JkaW5hdGUgaXNcbiAgICAgICAgICAgICAgICAvLyBleHBlY3RlZCB0byBoYXZlIHRocmVlIHZhbHVlcyBpbiBpdC5cbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoID4gMiAmJiAhb3B0aW9ucy5lbmFibGVXVGV4dHVyZUNvb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvb3JkcyA9IGVsZW1lbnRzLnNsaWNlKDAsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiBmb3Igc29tZSByZWFzb24gVyB0ZXh0dXJlIGNvb3JkaW5hdGUgc3VwcG9ydCBpcyBlbmFibGVkXG4gICAgICAgICAgICAgICAgLy8gYW5kIG9ubHkgdGhlIFUgYW5kIFYgY29vcmRpbmF0ZXMgYXJlIGdpdmVuLCB0aGVuIHdlIHN1cHBseVxuICAgICAgICAgICAgICAgIC8vIHRoZSBkZWZhdWx0IHZhbHVlIG9mIDAgc28gdGhhdCB0aGUgc3RyaWRlIGxlbmd0aCBpcyBjb3JyZWN0XG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgdGV4dHVyZXMgYXJlIHVucGFja2VkIGJlbG93LlxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVsZW1lbnRzLmxlbmd0aCA9PT0gMiAmJiBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29vcmRzLnB1c2goMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRleHR1cmVzLnB1c2goLi4uY29vcmRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoVVNFX01BVEVSSUFMX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbE5hbWUgPSBlbGVtZW50c1swXTtcblxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB3ZSd2ZSBldmVyIHNlZW4gaXQgYmVmb3JlXG4gICAgICAgICAgICAgICAgaWYgKCEobWF0ZXJpYWxOYW1lIGluIG1hdGVyaWFsSW5kaWNlc0J5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbmV3IG1hdGVyaWFsIHdlJ3ZlIG5ldmVyIHNlZW5cbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxOYW1lc0J5SW5kZXgucHVzaChtYXRlcmlhbE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbEluZGljZXNCeU5hbWVbbWF0ZXJpYWxOYW1lXSA9IG1hdGVyaWFsTmFtZXNCeUluZGV4Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIC8vIHB1c2ggbmV3IGFycmF5IGludG8gaW5kaWNlc1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbmRpY2VzUGVyTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgY29udGFpbnMgYW4gYXJyYXkgYXQgaW5kZXggemVybywgZG9uJ3QgYWRkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0ZXJpYWxJbmRpY2VzQnlOYW1lW21hdGVyaWFsTmFtZV0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaW5kaWNlcy5wdXNoKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgLy8ga2VlcCB0cmFjayBvZiB0aGUgY3VycmVudCBtYXRlcmlhbCBpbmRleFxuICAgICAgICAgICAgICAgIGN1cnJlbnRNYXRlcmlhbEluZGV4ID0gbWF0ZXJpYWxJbmRpY2VzQnlOYW1lW21hdGVyaWFsTmFtZV07XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGN1cnJlbnQgaW5kZXggYXJyYXlcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbmRpY2VzUGVyTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE9iamVjdEJ5TWF0ZXJpYWxJbmRleCA9IGN1cnJlbnRNYXRlcmlhbEluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoRkFDRV9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGZhY2VcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIHNwbGl0IHRoaXMgZmFjZSBpbnRvIGFuIGFycmF5IG9mIFZlcnRleCBncm91cHNcbiAgICAgICAgICAgICAgICBmb3IgZXhhbXBsZTpcbiAgICAgICAgICAgICAgICAgICBmIDE2LzkyLzExIDE0LzEwMS8yMiAxLzY5LzFcbiAgICAgICAgICAgICAgICBiZWNvbWVzOlxuICAgICAgICAgICAgICAgICAgWycxNi85Mi8xMScsICcxNC8xMDEvMjInLCAnMS82OS8xJ107XG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBsZXQgcXVhZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBlbGVMZW4gPSBlbGVtZW50cy5sZW5ndGg7IGogPCBlbGVMZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBUcmlhbmd1bGF0aW5nIHF1YWRzXG4gICAgICAgICAgICAgICAgICAgIC8vIHF1YWQ6ICdmIHYwL3QwL3ZuMCB2MS90MS92bjEgdjIvdDIvdm4yIHYzL3QzL3ZuMy8nXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvcnJlc3BvbmRpbmcgdHJpYW5nbGVzOlxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICdmIHYwL3QwL3ZuMCB2MS90MS92bjEgdjIvdDIvdm4yJ1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICdmIHYyL3QyL3ZuMiB2My90My92bjMgdjAvdDAvdm4wJ1xuICAgICAgICAgICAgICAgICAgICBpZiAoaiA9PT0gMyAmJiAhcXVhZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHYyL3QyL3ZuMiBpbiBhZ2FpbiBiZWZvcmUgY29udGludWluZyB0byAzXG4gICAgICAgICAgICAgICAgICAgICAgICBqID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1YWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2gwID0gZWxlbWVudHNbMF0gKyAnLCcgKyBjdXJyZW50TWF0ZXJpYWxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IGVsZW1lbnRzW2pdICsgJywnICsgY3VycmVudE1hdGVyaWFsSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNoIGluIHVucGFja2VkLmhhc2hpbmRpY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC5pbmRpY2VzW2N1cnJlbnRPYmplY3RCeU1hdGVyaWFsSW5kZXhdLnB1c2godW5wYWNrZWQuaGFzaGluZGljZXNbaGFzaF0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgIEVhY2ggZWxlbWVudCBvZiB0aGUgZmFjZSBsaW5lIGFycmF5IGlzIGEgVmVydGV4IHdoaWNoIGhhcyBpdHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMgZGVsaW1pdGVkIGJ5IGEgZm9yd2FyZCBzbGFzaC4gVGhpcyB3aWxsIHNlcGFyYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoIGF0dHJpYnV0ZSBpbnRvIGFub3RoZXIgYXJyYXk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzE5LzkyLzExJ1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVjb21lczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZXJ0ZXggPSBbJzE5JywgJzkyJywgJzExJ107XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlcnRleFswXSBpcyB0aGUgdmVydGV4IGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVydGV4WzFdIGlzIHRoZSB0ZXh0dXJlIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVydGV4WzJdIGlzIHRoZSBub3JtYWwgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICBUaGluayBvZiBmYWNlcyBoYXZpbmcgVmVydGljZXMgd2hpY2ggYXJlIGNvbXByaXNlZCBvZiB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzIGxvY2F0aW9uICh2KSwgdGV4dHVyZSAodnQpLCBhbmQgbm9ybWFsICh2bikuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2ZXJ0ZXggPSBlbGVtZW50c1tqXS5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBwb3NzaWJsZSBmb3IgZmFjZXMgdG8gb25seSBzcGVjaWZ5IHRoZSB2ZXJ0ZXhcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCB0aGUgbm9ybWFsLiBJbiB0aGlzIGNhc2UsIHZlcnRleCB3aWxsIG9ubHkgaGF2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBsZW5ndGggb2YgMiBhbmQgbm90IDMgYW5kIHRoZSBub3JtYWwgd2lsbCBiZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlY29uZCBpdGVtIGluIHRoZSBsaXN0IHdpdGggYW4gaW5kZXggb2YgMS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBub3JtYWxJbmRleCA9IHZlcnRleC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgdmVydHMsIHRleHR1cmVzLCBhbmQgdmVydE5vcm1hbHMgYXJyYXlzIGVhY2ggY29udGFpbiBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgZmxhdHRlbmQgYXJyYXkgb2YgY29vcmRpbmF0ZXMuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICBCZWNhdXNlIGl0IGdldHMgY29uZnVzaW5nIGJ5IHJlZmVycmluZyB0byBWZXJ0ZXggYW5kIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXggKGJvdGggYXJlIGRpZmZlcmVudCBpbiBteSBkZXNjcmlwdGlvbnMpIEkgd2lsbCBleHBsYWluXG4gICAgICAgICAgICAgICAgICAgICAgICAgd2hhdCdzIGdvaW5nIG9uIHVzaW5nIHRoZSB2ZXJ0ZXhOb3JtYWxzIGFycmF5OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4WzJdIHdpbGwgY29udGFpbiB0aGUgb25lLWJhc2VkIGluZGV4IG9mIHRoZSB2ZXJ0ZXhOb3JtYWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbiAodm4pLiBPbmUgaXMgc3VidHJhY3RlZCBmcm9tIHRoaXMgaW5kZXggbnVtYmVyIHRvIHBsYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICBuaWNlIHdpdGggamF2YXNjcmlwdCdzIHplcm8tYmFzZWQgYXJyYXkgaW5kZXhpbmcuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICBCZWNhdXNlIHZlcnRleE5vcm1hbCBpcyBhIGZsYXR0ZW5lZCBhcnJheSBvZiB4LCB5LCB6IHZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICBzaW1wbGUgcG9pbnRlciBhcml0aG1ldGljIGlzIHVzZWQgdG8gc2tpcCB0byB0aGUgc3RhcnQgb2YgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4Tm9ybWFsLCB0aGVuIHRoZSBvZmZzZXQgaXMgYWRkZWQgdG8gZ2V0IHRoZSBjb3JyZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiArMCBpcyB4LCArMSBpcyB5LCArMiBpcyB6LlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgVGhpcyBzYW1lIHByb2Nlc3MgaXMgcmVwZWF0ZWQgZm9yIHZlcnRzIGFuZCB0ZXh0dXJlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVydGV4IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC52ZXJ0cy5wdXNoKCt2ZXJ0c1sodmVydGV4WzBdIC0gMSkgKiAzICsgMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQudmVydHMucHVzaCgrdmVydHNbKHZlcnRleFswXSAtIDEpICogMyArIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLnZlcnRzLnB1c2goK3ZlcnRzWyh2ZXJ0ZXhbMF0gLSAxKSAqIDMgKyAyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJ0ZXggdGV4dHVyZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RyaWRlID0gb3B0aW9ucy5lbmFibGVXVGV4dHVyZUNvb3JkPyAzIDogMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC50ZXh0dXJlcy5wdXNoKCt0ZXh0dXJlc1sodmVydGV4WzFdIC0gMSkgKiBzdHJpZGUgKyAwXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQudGV4dHVyZXMucHVzaCgrdGV4dHVyZXNbKHZlcnRleFsxXSAtIDEpICogc3RyaWRlICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQudGV4dHVyZXMucHVzaCgrdGV4dHVyZXNbKHZlcnRleFsxXSAtIDEpICogc3RyaWRlICsgMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcnRleCBub3JtYWxzXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC5ub3Jtcy5wdXNoKCt2ZXJ0Tm9ybWFsc1sodmVydGV4W25vcm1hbEluZGV4XSAtIDEpICogMyArIDBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLm5vcm1zLnB1c2goK3ZlcnROb3JtYWxzWyh2ZXJ0ZXhbbm9ybWFsSW5kZXhdIC0gMSkgKiAzICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQubm9ybXMucHVzaCgrdmVydE5vcm1hbHNbKHZlcnRleFtub3JtYWxJbmRleF0gLSAxKSAqIDMgKyAyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJ0ZXggbWF0ZXJpYWwgaW5kaWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQubWF0ZXJpYWxJbmRpY2VzLnB1c2goY3VycmVudE1hdGVyaWFsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBuZXdseSBjcmVhdGVkIFZlcnRleCB0byB0aGUgbGlzdCBvZiBpbmRpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC5oYXNoaW5kaWNlc1toYXNoXSA9IHVucGFja2VkLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaW5kaWNlc1tjdXJyZW50T2JqZWN0QnlNYXRlcmlhbEluZGV4XS5wdXNoKHVucGFja2VkLmhhc2hpbmRpY2VzW2hhc2hdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluY3JlbWVudCB0aGUgY291bnRlclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaW5kZXggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA9PT0gMyAmJiBxdWFkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdjAvdDAvdm4wIG9udG8gdGhlIHNlY29uZCB0cmlhbmdsZVxuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaW5kaWNlc1tjdXJyZW50T2JqZWN0QnlNYXRlcmlhbEluZGV4XS5wdXNoKHVucGFja2VkLmhhc2hpbmRpY2VzW2hhc2gwXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi52ZXJ0aWNlcyA9IHVucGFja2VkLnZlcnRzO1xuICAgICAgICBzZWxmLnZlcnRleE5vcm1hbHMgPSB1bnBhY2tlZC5ub3JtcztcbiAgICAgICAgc2VsZi50ZXh0dXJlcyA9IHVucGFja2VkLnRleHR1cmVzO1xuICAgICAgICBzZWxmLnZlcnRleE1hdGVyaWFsSW5kaWNlcyA9IHVucGFja2VkLm1hdGVyaWFsSW5kaWNlcztcbiAgICAgICAgc2VsZi5pbmRpY2VzID0gb3B0aW9ucy5pbmRpY2VzUGVyTWF0ZXJpYWwgPyB1bnBhY2tlZC5pbmRpY2VzIDogdW5wYWNrZWQuaW5kaWNlc1tjdXJyZW50T2JqZWN0QnlNYXRlcmlhbEluZGV4XTtcblxuICAgICAgICBzZWxmLm1hdGVyaWFsTmFtZXMgPSBtYXRlcmlhbE5hbWVzQnlJbmRleDtcbiAgICAgICAgc2VsZi5tYXRlcmlhbEluZGljZXMgPSBtYXRlcmlhbEluZGljZXNCeU5hbWU7XG4gICAgICAgIHNlbGYubWF0ZXJpYWxzQnlJbmRleCA9IHt9O1xuXG4gICAgICAgIGlmIChvcHRpb25zLmNhbGNUYW5nZW50c0FuZEJpdGFuZ2VudHMpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVGFuZ2VudHNBbmRCaXRhbmdlbnRzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSB0YW5nZW50cyBhbmQgYml0YW5nZW50cyBvZiB0aGUgbWVzaCB0aGF0IGZvcm1zIGFuIG9ydGhvZ29uYWwgYmFzaXMgdG9nZXRoZXIgd2l0aCB0aGVcbiAgICAgKiBub3JtYWwgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgdGV4dHVyZSBjb29yZGluYXRlcy4gVGhlc2UgYXJlIHVzZWZ1bCBmb3Igc2V0dGluZyB1cCB0aGUgVEJOIG1hdHJpeFxuICAgICAqIHdoZW4gZGlzdG9ydGluZyB0aGUgbm9ybWFscyB0aHJvdWdoIG5vcm1hbCBtYXBzLlxuICAgICAqIE1ldGhvZCBkZXJpdmVkIGZyb206IGh0dHA6Ly93d3cub3BlbmdsLXR1dG9yaWFsLm9yZy9pbnRlcm1lZGlhdGUtdHV0b3JpYWxzL3R1dG9yaWFsLTEzLW5vcm1hbC1tYXBwaW5nL1xuICAgICAqIFxuICAgICAqIFRoaXMgbWV0aG9kIHJlcXVpcmVzIHRoZSBub3JtYWxzIGFuZCB0ZXh0dXJlIGNvb3JkaW5hdGVzIHRvIGJlIHBhcnNlZCBhbmQgc2V0IHVwIGNvcnJlY3RseS5cbiAgICAgKiBBZGRzIHRoZSB0YW5nZW50cyBhbmQgYml0YW5nZW50cyBhcyBtZW1iZXJzIG9mIHRoZSBjbGFzcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBjYWxjdWxhdGVUYW5nZW50c0FuZEJpdGFuZ2VudHMoKSB7XG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KHRoaXMudmVydGljZXMgJiYgdGhpcy52ZXJ0aWNlcy5sZW5ndGggJiZcbiAgICAgICAgICAgIHRoaXMudmVydGV4Tm9ybWFscyAmJiB0aGlzLnZlcnRleE5vcm1hbHMubGVuZ3RoICYmXG4gICAgICAgICAgICB0aGlzLnRleHR1cmVzICYmIHRoaXMudGV4dHVyZXMubGVuZ3RoLCBcIk1pc3NpbmcgYXR0cmlidXRlcyBmb3IgY2FsY3VsYXRpbmcgdGFuZ2VudHMgYW5kIGJpdGFuZ2VudHNcIik7XG5cbiAgICAgICAgY29uc3QgdW5wYWNrZWQgPSB7fTtcbiAgICAgICAgdW5wYWNrZWQudGFuZ2VudHMgPSBbLi4ubmV3IEFycmF5KHRoaXMudmVydGljZXMubGVuZ3RoKV0ubWFwKHYgPT4gMCk7IFxuICAgICAgICB1bnBhY2tlZC5iaXRhbmdlbnRzID0gWy4uLm5ldyBBcnJheSh0aGlzLnZlcnRpY2VzLmxlbmd0aCldLm1hcCh2ID0+IDApOyBcblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIGZhY2VzIGluIHRoZSB3aG9sZSBtZXNoXG4gICAgICAgIGxldCBpbmRpY2VzO1xuICAgICAgICAvLyBJZiBzb3J0ZWQgYnkgbWF0ZXJpYWxcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5pbmRpY2VzWzBdKSkge1xuICAgICAgICAgICAgaW5kaWNlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgdGhpcy5pbmRpY2VzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZGljZXMgPSB0aGlzLmluZGljZXM7XG4gICAgICAgIH0gICBcbiAgICBcbiAgICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgICAgICBjb25zdCBub3JtYWxzID0gdGhpcy52ZXJ0ZXhOb3JtYWxzO1xuICAgICAgICBjb25zdCB1dnMgPSB0aGlzLnRleHR1cmVzO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSs9IDMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkwID0gaW5kaWNlc1tpICsgMF07XG4gICAgICAgICAgICBjb25zdCBpMSA9IGluZGljZXNbaSArIDFdO1xuICAgICAgICAgICAgY29uc3QgaTIgPSBpbmRpY2VzW2kgKyAyXTtcblxuICAgICAgICAgICAgY29uc3QgeF92MCA9IHZlcnRpY2VzW2kwICogMyArIDBdOyBcbiAgICAgICAgICAgIGNvbnN0IHlfdjAgPSB2ZXJ0aWNlc1tpMCAqIDMgKyAxXTtcbiAgICAgICAgICAgIGNvbnN0IHpfdjAgPSB2ZXJ0aWNlc1tpMCAqIDMgKyAyXTtcblxuICAgICAgICAgICAgY29uc3QgeF91djAgPSB1dnNbaTAgKiAyICsgMF07XG4gICAgICAgICAgICBjb25zdCB5X3V2MCA9IHV2c1tpMCAqIDIgKyAxXTtcblxuICAgICAgICAgICAgY29uc3QgeF92MSA9IHZlcnRpY2VzW2kxICogMyArIDBdO1xuICAgICAgICAgICAgY29uc3QgeV92MSA9IHZlcnRpY2VzW2kxICogMyArIDFdO1xuICAgICAgICAgICAgY29uc3Qgel92MSA9IHZlcnRpY2VzW2kxICogMyArIDJdO1xuXG4gICAgICAgICAgICBjb25zdCB4X3V2MSA9IHV2c1tpMSAqIDIgKyAwXTtcbiAgICAgICAgICAgIGNvbnN0IHlfdXYxID0gdXZzW2kxICogMiArIDFdO1xuXG4gICAgICAgICAgICBjb25zdCB4X3YyID0gdmVydGljZXNbaTIgKiAzICsgMF07XG4gICAgICAgICAgICBjb25zdCB5X3YyID0gdmVydGljZXNbaTIgKiAzICsgMV07XG4gICAgICAgICAgICBjb25zdCB6X3YyID0gdmVydGljZXNbaTIgKiAzICsgMl07XG5cbiAgICAgICAgICAgIGNvbnN0IHhfdXYyID0gdXZzW2kyICogMiArIDBdO1xuICAgICAgICAgICAgY29uc3QgeV91djIgPSB1dnNbaTIgKiAyICsgMV07XG5cbiAgICAgICAgICAgIGNvbnN0IHhfZGVsdGFQb3MxID0geF92MSAtIHhfdjA7XG4gICAgICAgICAgICBjb25zdCB5X2RlbHRhUG9zMSA9IHlfdjEgLSB5X3YwO1xuICAgICAgICAgICAgY29uc3Qgel9kZWx0YVBvczEgPSB6X3YxIC0gel92MDtcblxuICAgICAgICAgICAgY29uc3QgeF9kZWx0YVBvczIgPSB4X3YyIC0geF92MDtcbiAgICAgICAgICAgIGNvbnN0IHlfZGVsdGFQb3MyID0geV92MiAtIHlfdjA7XG4gICAgICAgICAgICBjb25zdCB6X2RlbHRhUG9zMiA9IHpfdjIgLSB6X3YwO1xuXG4gICAgICAgICAgICBjb25zdCB4X3V2RGVsdGFQb3MxID0geF91djEgLSB4X3V2MDtcbiAgICAgICAgICAgIGNvbnN0IHlfdXZEZWx0YVBvczEgPSB5X3V2MSAtIHlfdXYwO1xuXG4gICAgICAgICAgICBjb25zdCB4X3V2RGVsdGFQb3MyID0geF91djIgLSB4X3V2MDtcbiAgICAgICAgICAgIGNvbnN0IHlfdXZEZWx0YVBvczIgPSB5X3V2MiAtIHlfdXYwO1xuXG4gICAgICAgICAgICBjb25zdCBySW52ID0geF91dkRlbHRhUG9zMSAqIHlfdXZEZWx0YVBvczIgLSB5X3V2RGVsdGFQb3MxICogeF91dkRlbHRhUG9zMjtcbiAgICAgICAgICAgIGNvbnN0IHIgPSAxLjAgLyAoTWF0aC5hYnMockludiA8IDAuMDAwMSkgPyAxLjAgOiBySW52KVxuXG4gICAgICAgICAgICAvLyBUYW5nZW50XG4gICAgICAgICAgICBjb25zdCB4X3RhbmdlbnQgPSAoeF9kZWx0YVBvczEgKiB5X3V2RGVsdGFQb3MyIC0geF9kZWx0YVBvczIgKiB5X3V2RGVsdGFQb3MxKSAqIHI7XG4gICAgICAgICAgICBjb25zdCB5X3RhbmdlbnQgPSAoeV9kZWx0YVBvczEgKiB5X3V2RGVsdGFQb3MyIC0geV9kZWx0YVBvczIgKiB5X3V2RGVsdGFQb3MxKSAqIHI7XG4gICAgICAgICAgICBjb25zdCB6X3RhbmdlbnQgPSAoel9kZWx0YVBvczEgKiB5X3V2RGVsdGFQb3MyIC0gel9kZWx0YVBvczIgKiB5X3V2RGVsdGFQb3MxKSAqIHI7XG5cbiAgICAgICAgICAgIC8vIEJpdGFuZ2VudFxuICAgICAgICAgICAgY29uc3QgeF9iaXRhbmdlbnQgPSAoeF9kZWx0YVBvczIgKiB4X3V2RGVsdGFQb3MxIC0geF9kZWx0YVBvczEgKiB4X3V2RGVsdGFQb3MyKSAqIHI7XG4gICAgICAgICAgICBjb25zdCB5X2JpdGFuZ2VudCA9ICh5X2RlbHRhUG9zMiAqIHhfdXZEZWx0YVBvczEgLSB5X2RlbHRhUG9zMSAqIHhfdXZEZWx0YVBvczIpICogcjtcbiAgICAgICAgICAgIGNvbnN0IHpfYml0YW5nZW50ID0gKHpfZGVsdGFQb3MyICogeF91dkRlbHRhUG9zMSAtIHpfZGVsdGFQb3MxICogeF91dkRlbHRhUG9zMikgKiByO1xuXG4gICAgICAgICAgICAvLyBHcmFtLVNjaG1pZHQgb3J0aG9nb25hbGl6ZVxuICAgICAgICAgICAgLy90ID0gZ2xtOjpub3JtYWxpemUodCAtIG4gKiBnbG06OiBkb3QobiwgdCkpO1xuICAgICAgICAgICAgY29uc3QgeF9uMCA9IG5vcm1hbHNbaTAgKiAzICsgMF07XG4gICAgICAgICAgICBjb25zdCB5X24wID0gbm9ybWFsc1tpMCAqIDMgKyAxXTtcbiAgICAgICAgICAgIGNvbnN0IHpfbjAgPSBub3JtYWxzW2kwICogMyArIDJdO1xuXG4gICAgICAgICAgICBjb25zdCB4X24xID0gbm9ybWFsc1tpMSAqIDMgKyAwXTtcbiAgICAgICAgICAgIGNvbnN0IHlfbjEgPSBub3JtYWxzW2kxICogMyArIDFdO1xuICAgICAgICAgICAgY29uc3Qgel9uMSA9IG5vcm1hbHNbaTEgKiAzICsgMl07XG5cbiAgICAgICAgICAgIGNvbnN0IHhfbjIgPSBub3JtYWxzW2kyICogMyArIDBdO1xuICAgICAgICAgICAgY29uc3QgeV9uMiA9IG5vcm1hbHNbaTIgKiAzICsgMV07XG4gICAgICAgICAgICBjb25zdCB6X24yID0gbm9ybWFsc1tpMiAqIDMgKyAyXTtcblxuICAgICAgICAgICAgLy8gVGFuZ2VudFxuICAgICAgICAgICAgY29uc3QgbjBfZG90X3QgPSB4X3RhbmdlbnQgKiB4X24wICsgeV90YW5nZW50ICogeV9uMCArIHpfdGFuZ2VudCAqIHpfbjA7XG4gICAgICAgICAgICBjb25zdCBuMV9kb3RfdCA9IHhfdGFuZ2VudCAqIHhfbjEgKyB5X3RhbmdlbnQgKiB5X24xICsgel90YW5nZW50ICogel9uMTtcbiAgICAgICAgICAgIGNvbnN0IG4yX2RvdF90ID0geF90YW5nZW50ICogeF9uMiArIHlfdGFuZ2VudCAqIHlfbjIgKyB6X3RhbmdlbnQgKiB6X24yO1xuXG4gICAgICAgICAgICBjb25zdCB4X3Jlc1RhbmdlbnQwID0geF90YW5nZW50IC0geF9uMCAqIG4wX2RvdF90OyBcbiAgICAgICAgICAgIGNvbnN0IHlfcmVzVGFuZ2VudDAgPSB5X3RhbmdlbnQgLSB5X24wICogbjBfZG90X3Q7XG4gICAgICAgICAgICBjb25zdCB6X3Jlc1RhbmdlbnQwID0gel90YW5nZW50IC0gel9uMCAqIG4wX2RvdF90O1xuXG4gICAgICAgICAgICBjb25zdCB4X3Jlc1RhbmdlbnQxID0geF90YW5nZW50IC0geF9uMSAqIG4xX2RvdF90O1xuICAgICAgICAgICAgY29uc3QgeV9yZXNUYW5nZW50MSA9IHlfdGFuZ2VudCAtIHlfbjEgKiBuMV9kb3RfdDtcbiAgICAgICAgICAgIGNvbnN0IHpfcmVzVGFuZ2VudDEgPSB6X3RhbmdlbnQgLSB6X24xICogbjFfZG90X3Q7XG5cbiAgICAgICAgICAgIGNvbnN0IHhfcmVzVGFuZ2VudDIgPSB4X3RhbmdlbnQgLSB4X24yICogbjJfZG90X3Q7XG4gICAgICAgICAgICBjb25zdCB5X3Jlc1RhbmdlbnQyID0geV90YW5nZW50IC0geV9uMiAqIG4yX2RvdF90O1xuICAgICAgICAgICAgY29uc3Qgel9yZXNUYW5nZW50MiA9IHpfdGFuZ2VudCAtIHpfbjIgKiBuMl9kb3RfdDtcblxuICAgICAgICAgICAgY29uc3QgbWFnVGFuZ2VudDAgPSBNYXRoLnNxcnQoeF9yZXNUYW5nZW50MCAqIHhfcmVzVGFuZ2VudDAgKyB5X3Jlc1RhbmdlbnQwICogeV9yZXNUYW5nZW50MCArIHpfcmVzVGFuZ2VudDAgKiB6X3Jlc1RhbmdlbnQwKTtcbiAgICAgICAgICAgIGNvbnN0IG1hZ1RhbmdlbnQxID0gTWF0aC5zcXJ0KHhfcmVzVGFuZ2VudDEgKiB4X3Jlc1RhbmdlbnQxICsgeV9yZXNUYW5nZW50MSAqIHlfcmVzVGFuZ2VudDEgKyB6X3Jlc1RhbmdlbnQxICogel9yZXNUYW5nZW50MSk7XG4gICAgICAgICAgICBjb25zdCBtYWdUYW5nZW50MiA9IE1hdGguc3FydCh4X3Jlc1RhbmdlbnQyICogeF9yZXNUYW5nZW50MiArIHlfcmVzVGFuZ2VudDIgKiB5X3Jlc1RhbmdlbnQyICsgel9yZXNUYW5nZW50MiAqIHpfcmVzVGFuZ2VudDIpO1xuXG4gICAgICAgICAgICAvLyBCaXRhbmdlbnRcbiAgICAgICAgICAgIGNvbnN0IG4wX2RvdF9idCA9IHhfYml0YW5nZW50ICogeF9uMCArIHlfYml0YW5nZW50ICogeV9uMCArIHpfYml0YW5nZW50ICogel9uMDtcbiAgICAgICAgICAgIGNvbnN0IG4xX2RvdF9idCA9IHhfYml0YW5nZW50ICogeF9uMSArIHlfYml0YW5nZW50ICogeV9uMSArIHpfYml0YW5nZW50ICogel9uMTtcbiAgICAgICAgICAgIGNvbnN0IG4yX2RvdF9idCA9IHhfYml0YW5nZW50ICogeF9uMiArIHlfYml0YW5nZW50ICogeV9uMiArIHpfYml0YW5nZW50ICogel9uMjtcblxuICAgICAgICAgICAgY29uc3QgeF9yZXNCaXRhbmdlbnQwID0geF9iaXRhbmdlbnQgLSB4X24wICogbjBfZG90X2J0O1xuICAgICAgICAgICAgY29uc3QgeV9yZXNCaXRhbmdlbnQwID0geV9iaXRhbmdlbnQgLSB5X24wICogbjBfZG90X2J0O1xuICAgICAgICAgICAgY29uc3Qgel9yZXNCaXRhbmdlbnQwID0gel9iaXRhbmdlbnQgLSB6X24wICogbjBfZG90X2J0O1xuXG4gICAgICAgICAgICBjb25zdCB4X3Jlc0JpdGFuZ2VudDEgPSB4X2JpdGFuZ2VudCAtIHhfbjEgKiBuMV9kb3RfYnQ7XG4gICAgICAgICAgICBjb25zdCB5X3Jlc0JpdGFuZ2VudDEgPSB5X2JpdGFuZ2VudCAtIHlfbjEgKiBuMV9kb3RfYnQ7XG4gICAgICAgICAgICBjb25zdCB6X3Jlc0JpdGFuZ2VudDEgPSB6X2JpdGFuZ2VudCAtIHpfbjEgKiBuMV9kb3RfYnQ7XG5cbiAgICAgICAgICAgIGNvbnN0IHhfcmVzQml0YW5nZW50MiA9IHhfYml0YW5nZW50IC0geF9uMiAqIG4yX2RvdF9idDtcbiAgICAgICAgICAgIGNvbnN0IHlfcmVzQml0YW5nZW50MiA9IHlfYml0YW5nZW50IC0geV9uMiAqIG4yX2RvdF9idDtcbiAgICAgICAgICAgIGNvbnN0IHpfcmVzQml0YW5nZW50MiA9IHpfYml0YW5nZW50IC0gel9uMiAqIG4yX2RvdF9idDtcblxuICAgICAgICAgICAgY29uc3QgbWFnQml0YW5nZW50MCA9IE1hdGguc3FydCh4X3Jlc0JpdGFuZ2VudDAgKiB4X3Jlc0JpdGFuZ2VudDAgKyB5X3Jlc0JpdGFuZ2VudDAgKiB5X3Jlc0JpdGFuZ2VudDAgKyB6X3Jlc0JpdGFuZ2VudDAgKiB6X3Jlc0JpdGFuZ2VudDApO1xuICAgICAgICAgICAgY29uc3QgbWFnQml0YW5nZW50MSA9IE1hdGguc3FydCh4X3Jlc0JpdGFuZ2VudDEgKiB4X3Jlc0JpdGFuZ2VudDEgKyB5X3Jlc0JpdGFuZ2VudDEgKiB5X3Jlc0JpdGFuZ2VudDEgKyB6X3Jlc0JpdGFuZ2VudDEgKiB6X3Jlc0JpdGFuZ2VudDEpO1xuICAgICAgICAgICAgY29uc3QgbWFnQml0YW5nZW50MiA9IE1hdGguc3FydCh4X3Jlc0JpdGFuZ2VudDIgKiB4X3Jlc0JpdGFuZ2VudDIgKyB5X3Jlc0JpdGFuZ2VudDIgKiB5X3Jlc0JpdGFuZ2VudDIgKyB6X3Jlc0JpdGFuZ2VudDIgKiB6X3Jlc0JpdGFuZ2VudDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB1bnBhY2tlZC50YW5nZW50c1tpMCAqIDMgKyAwXSArPSB4X3Jlc1RhbmdlbnQwIC8gbWFnVGFuZ2VudDA7XG4gICAgICAgICAgICB1bnBhY2tlZC50YW5nZW50c1tpMCAqIDMgKyAxXSArPSB5X3Jlc1RhbmdlbnQwIC8gbWFnVGFuZ2VudDA7XG4gICAgICAgICAgICB1bnBhY2tlZC50YW5nZW50c1tpMCAqIDMgKyAyXSArPSB6X3Jlc1RhbmdlbnQwIC8gbWFnVGFuZ2VudDA7XG5cbiAgICAgICAgICAgIHVucGFja2VkLnRhbmdlbnRzW2kxICogMyArIDBdICs9IHhfcmVzVGFuZ2VudDEgLyBtYWdUYW5nZW50MTtcbiAgICAgICAgICAgIHVucGFja2VkLnRhbmdlbnRzW2kxICogMyArIDFdICs9IHlfcmVzVGFuZ2VudDEgLyBtYWdUYW5nZW50MTtcbiAgICAgICAgICAgIHVucGFja2VkLnRhbmdlbnRzW2kxICogMyArIDJdICs9IHpfcmVzVGFuZ2VudDEgLyBtYWdUYW5nZW50MTtcblxuICAgICAgICAgICAgdW5wYWNrZWQudGFuZ2VudHNbaTIgKiAzICsgMF0gKz0geF9yZXNUYW5nZW50MiAvIG1hZ1RhbmdlbnQyO1xuICAgICAgICAgICAgdW5wYWNrZWQudGFuZ2VudHNbaTIgKiAzICsgMV0gKz0geV9yZXNUYW5nZW50MiAvIG1hZ1RhbmdlbnQyO1xuICAgICAgICAgICAgdW5wYWNrZWQudGFuZ2VudHNbaTIgKiAzICsgMl0gKz0gel9yZXNUYW5nZW50MiAvIG1hZ1RhbmdlbnQyO1xuXG4gICAgICAgICAgICB1bnBhY2tlZC5iaXRhbmdlbnRzW2kwICogMyArIDBdICs9IHhfcmVzQml0YW5nZW50MCAvIG1hZ0JpdGFuZ2VudDA7XG4gICAgICAgICAgICB1bnBhY2tlZC5iaXRhbmdlbnRzW2kwICogMyArIDFdICs9IHlfcmVzQml0YW5nZW50MCAvIG1hZ0JpdGFuZ2VudDA7XG4gICAgICAgICAgICB1bnBhY2tlZC5iaXRhbmdlbnRzW2kwICogMyArIDJdICs9IHpfcmVzQml0YW5nZW50MCAvIG1hZ0JpdGFuZ2VudDA7XG5cbiAgICAgICAgICAgIHVucGFja2VkLmJpdGFuZ2VudHNbaTEgKiAzICsgMF0gKz0geF9yZXNCaXRhbmdlbnQxIC8gbWFnQml0YW5nZW50MTtcbiAgICAgICAgICAgIHVucGFja2VkLmJpdGFuZ2VudHNbaTEgKiAzICsgMV0gKz0geV9yZXNCaXRhbmdlbnQxIC8gbWFnQml0YW5nZW50MTtcbiAgICAgICAgICAgIHVucGFja2VkLmJpdGFuZ2VudHNbaTEgKiAzICsgMl0gKz0gel9yZXNCaXRhbmdlbnQxIC8gbWFnQml0YW5nZW50MTtcblxuICAgICAgICAgICAgdW5wYWNrZWQuYml0YW5nZW50c1tpMiAqIDMgKyAwXSArPSB4X3Jlc0JpdGFuZ2VudDIgLyBtYWdCaXRhbmdlbnQyO1xuICAgICAgICAgICAgdW5wYWNrZWQuYml0YW5nZW50c1tpMiAqIDMgKyAxXSArPSB5X3Jlc0JpdGFuZ2VudDIgLyBtYWdCaXRhbmdlbnQyO1xuICAgICAgICAgICAgdW5wYWNrZWQuYml0YW5nZW50c1tpMiAqIDMgKyAyXSArPSB6X3Jlc0JpdGFuZ2VudDIgLyBtYWdCaXRhbmdlbnQyOyAgICBcblxuICAgICAgICAgICAgLy8gVE9ETzogY2hlY2sgaGFuZGVkbmVzc1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRhbmdlbnRzID0gdW5wYWNrZWQudGFuZ2VudHM7XG4gICAgICAgIHRoaXMuYml0YW5nZW50cyA9IHVucGFja2VkLmJpdGFuZ2VudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXlvdXR9IGxheW91dCAtIEEge0BsaW5rIExheW91dH0gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIHRoZVxuICAgICAqIGRlc2lyZWQgbWVtb3J5IGxheW91dCBvZiB0aGUgZ2VuZXJhdGVkIGJ1ZmZlclxuICAgICAqIEByZXR1cm4ge0FycmF5QnVmZmVyfSBUaGUgcGFja2VkIGFycmF5IGluIHRoZSAuLi4gVE9ET1xuICAgICAqL1xuICAgIG1ha2VCdWZmZXJEYXRhKGxheW91dCkge1xuICAgICAgICBjb25zdCBudW1JdGVtcyA9IHRoaXMudmVydGljZXMubGVuZ3RoIC8gMztcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGxheW91dC5zdHJpZGUgKiBudW1JdGVtcyk7XG4gICAgICAgIGJ1ZmZlci5udW1JdGVtcyA9IG51bUl0ZW1zO1xuICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgdmVydGV4T2Zmc2V0ID0gMDsgaSA8IG51bUl0ZW1zOyBpKyspIHtcbiAgICAgICAgICAgIHZlcnRleE9mZnNldCA9IGkgKiBsYXlvdXQuc3RyaWRlO1xuICAgICAgICAgICAgLy8gY29weSBpbiB0aGUgdmVydGV4IGRhdGEgaW4gdGhlIG9yZGVyIGFuZCBmb3JtYXQgZ2l2ZW4gYnkgdGhlXG4gICAgICAgICAgICAvLyBsYXlvdXQgcGFyYW1cbiAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGxheW91dC5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdmVydGV4T2Zmc2V0ICsgbGF5b3V0W2F0dHJpYnV0ZS5rZXldLm9mZnNldDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnV0ZS5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuUE9TSVRJT04ua2V5OlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIHRoaXMudmVydGljZXNbaSAqIDNdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgNCwgdGhpcy52ZXJ0aWNlc1tpICogMyArIDFdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgOCwgdGhpcy52ZXJ0aWNlc1tpICogMyArIDJdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5VVi5rZXk6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgdGhpcy50ZXh0dXJlc1tpICogMl0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA0LCB0aGlzLnZlcnRpY2VzW2kgKiAyICsgMV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0Lk5PUk1BTC5rZXk6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgdGhpcy52ZXJ0ZXhOb3JtYWxzW2kgKiAzXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDQsIHRoaXMudmVydGV4Tm9ybWFsc1tpICogMyArIDFdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgOCwgdGhpcy52ZXJ0ZXhOb3JtYWxzW2kgKiAzICsgMl0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0Lk1BVEVSSUFMX0lOREVYLmtleTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDE2KG9mZnNldCwgdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LkFNQklFTlQua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01hdGVyaWFsIFwiJyArIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLmFtYmllbnRbMF0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA0LCBtYXRlcmlhbC5hbWJpZW50WzFdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgOCwgbWF0ZXJpYWwuYW1iaWVudFsyXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5ESUZGVVNFLmtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMudmVydGV4TWF0ZXJpYWxJbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNYXRlcmlhbCBcIicgKyB0aGlzLm1hdGVyaWFsTmFtZXNbbWF0ZXJpYWxJbmRleF0gKyAnXCIgbm90IGZvdW5kIGluIG1lc2guIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYWRkTWF0ZXJpYWxMaWJyYXJ5KC4uLik/XCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0LCBtYXRlcmlhbC5kaWZmdXNlWzBdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgNCwgbWF0ZXJpYWwuZGlmZnVzZVsxXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDgsIG1hdGVyaWFsLmRpZmZ1c2VbMl0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuU1BFQ1VMQVIua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01hdGVyaWFsIFwiJyArIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLnNwZWN1bGFyWzBdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgNCwgbWF0ZXJpYWwuc3BlY3VsYXJbMV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA4LCBtYXRlcmlhbC5zcGVjdWxhclsyXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5TUEVDVUxBUl9FWFBPTkVOVC5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWF0ZXJpYWwgXCInICsgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICsgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwuc3BlY3VsYXJFeHBvbmVudCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5FTUlTU0lWRS5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWF0ZXJpYWwgXCInICsgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICsgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwuZW1pc3NpdmVbMF0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA0LCBtYXRlcmlhbC5lbWlzc2l2ZVsxXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDgsIG1hdGVyaWFsLmVtaXNzaXZlWzJdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LlRSQU5TTUlTU0lPTl9GSUxURVIua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01hdGVyaWFsIFwiJyArIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLnRyYW5zbWlzc2lvbkZpbHRlclswXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDQsIG1hdGVyaWFsLnRyYW5zbWlzc2lvbkZpbHRlclsxXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDgsIG1hdGVyaWFsLnRyYW5zbWlzc2lvbkZpbHRlclsyXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5ESVNTT0xWRS5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWF0ZXJpYWwgXCInICsgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICsgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwuZGlzc29sdmUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuSUxMVU1JTkFUSU9OLmtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMudmVydGV4TWF0ZXJpYWxJbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNYXRlcmlhbCBcIicgKyB0aGlzLm1hdGVyaWFsTmFtZXNbbWF0ZXJpYWxJbmRleF0gKyAnXCIgbm90IGZvdW5kIGluIG1lc2guIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYWRkTWF0ZXJpYWxMaWJyYXJ5KC4uLik/XCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDE2KG9mZnNldCwgbWF0ZXJpYWwuaWxsdW1pbmF0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LlJFRlJBQ1RJT05fSU5ERVgua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01hdGVyaWFsIFwiJyArIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLnJlZnJhY3Rpb25JbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5TSEFSUE5FU1Mua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01hdGVyaWFsIFwiJyArIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLnNoYXJwbmVzcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5BTlRJX0FMSUFTSU5HLmtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMudmVydGV4TWF0ZXJpYWxJbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNYXRlcmlhbCBcIicgKyB0aGlzLm1hdGVyaWFsTmFtZXNbbWF0ZXJpYWxJbmRleF0gKyAnXCIgbm90IGZvdW5kIGluIG1lc2guIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYWRkTWF0ZXJpYWxMaWJyYXJ5KC4uLik/XCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDE2KG9mZnNldCwgbWF0ZXJpYWwuYW50aUFsaWFzaW5nLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfVxuXG4gICAgbWFrZUluZGV4QnVmZmVyRGF0YSgpIHtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQxNkFycmF5KHRoaXMuaW5kaWNlcyk7XG4gICAgICAgIGJ1ZmZlci5udW1JdGVtcyA9IHRoaXMuaW5kaWNlcy5sZW5ndGg7XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfVxuXG4gICAgYWRkTWF0ZXJpYWxMaWJyYXJ5IChtdGwpIHtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIG10bC5tYXRlcmlhbHMpIHtcbiAgICAgICAgICAgIGlmICghKG5hbWUgaW4gdGhpcy5tYXRlcmlhbEluZGljZXMpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBtYXRlcmlhbCBpcyBub3QgcmVmZXJlbmNlZCBieSB0aGUgbWVzaFxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG10bC5tYXRlcmlhbHNbbmFtZV07XG5cbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIG1hdGVyaWFsIGluZGV4IGZvciB0aGlzIG1hdGVyaWFsXG4gICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy5tYXRlcmlhbEluZGljZXNbbWF0ZXJpYWwubmFtZV1cblxuICAgICAgICAgICAgLy8gUHV0IHRoZSBtYXRlcmlhbCBpbnRvIHRoZSBtYXRlcmlhbHNCeUluZGV4IG9iamVjdCBhdCB0aGUgcmlnaHRcbiAgICAgICAgICAgIC8vIHNwb3QgYXMgZGV0ZXJtaW5lZCB3aGVuIHRoZSBvYmogZmlsZSB3YXMgcGFyc2VkXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF0gPSBtYXRlcmlhbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9tZXNoLmpzIiwiLyoqXG4gKiBUaGUgTWF0ZXJpYWwgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXRlcmlhbCB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgdW5pcXVlIG5hbWUgb2YgdGhlIG1hdGVyaWFsXG4gICAqL1xuICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgLy8gdGhlIHVuaXF1ZSBtYXRlcmlhbCBJRC5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIC8vIFRoZSB2YWx1ZXMgZm9yIHRoZSBmb2xsb3dpbmcgYXR0aWJ1dGVzXG4gICAgLy8gYXJlIGFuIGFycmF5IG9mIFIsIEcsIEIgbm9ybWFsaXplZCB2YWx1ZXMuXG4gICAgLy8gS2EgLSBBbWJpZW50IFJlZmxlY3Rpdml0eVxuICAgIHRoaXMuYW1iaWVudCA9IFswLCAwLCAwXTtcbiAgICAvLyBLZCAtIERlZnVzZSBSZWZsZWN0aXZpdHlcbiAgICB0aGlzLmRpZmZ1c2UgPSBbMCwgMCwgMF07XG4gICAgLy8gS3NcbiAgICB0aGlzLnNwZWN1bGFyID0gWzAsIDAsIDBdO1xuICAgIC8vIEtlXG4gICAgdGhpcy5lbWlzc2l2ZSA9IFswLCAwLCAwXTtcbiAgICAvLyBUZlxuICAgIHRoaXMudHJhbnNtaXNzaW9uRmlsdGVyID0gWzAsIDAsIDBdO1xuICAgIC8vIGRcbiAgICB0aGlzLmRpc3NvbHZlID0gMDtcbiAgICAvLyB2YWxpZCByYW5nZSBpcyBiZXR3ZWVuIDAgYW5kIDEwMDBcbiAgICB0aGlzLnNwZWN1bGFyRXhwb25lbnQgPSAwO1xuICAgIC8vIGVpdGhlciBkIG9yIFRyOyB2YWxpZCB2YWx1ZXMgYXJlIG5vcm1hbGl6ZWRcbiAgICB0aGlzLnRyYW5zcGFyZW5jeSA9IDA7XG4gICAgLy8gaWxsdW0gLSB0aGUgZW51bSBvZiB0aGUgaWxsdW1pbmF0aW9uIG1vZGVsIHRvIHVzZVxuICAgIHRoaXMuaWxsdW1pbmF0aW9uID0gMDtcbiAgICAvLyBOaSAtIFNldCB0byBcIm5vcm1hbFwiIChhaXIpLlxuICAgIHRoaXMucmVmcmFjdGlvbkluZGV4ID0gMTtcbiAgICAvLyBzaGFycG5lc3NcbiAgICB0aGlzLnNoYXJwbmVzcyA9IDA7XG4gICAgLy8gbWFwX0tkXG4gICAgdGhpcy5tYXBEaWZmdXNlID0gbnVsbDtcbiAgICAvLyBtYXBfS2FcbiAgICB0aGlzLm1hcEFtYmllbnQgPSBudWxsO1xuICAgIC8vIG1hcF9Lc1xuICAgIHRoaXMubWFwU3BlY3VsYXIgPSBudWxsO1xuICAgIC8vIG1hcF9Oc1xuICAgIHRoaXMubWFwU3BlY3VsYXJFeHBvbmVudCA9IG51bGw7XG4gICAgLy8gbWFwX2RcbiAgICB0aGlzLm1hcERpc3NvbHZlID0gbnVsbDtcbiAgICAvLyBtYXBfYWF0XG4gICAgdGhpcy5hbnRpQWxpYXNpbmcgPSBmYWxzZTtcbiAgICAvLyBtYXBfYnVtcCBvciBidW1wXG4gICAgdGhpcy5tYXBCdW1wID0gbnVsbDtcbiAgICAvLyBkaXNwXG4gICAgdGhpcy5tYXBEaXNwbGFjZW1lbnQgPSBudWxsO1xuICAgIC8vIGRlY2FsXG4gICAgdGhpcy5tYXBEZWNhbCA9IG51bGw7XG4gICAgLy8gbWFwX0tlXG4gICAgdGhpcy5tYXBFbWlzc2l2ZSA9IG51bGw7XG4gICAgLy8gcmVmbCAtIHdoZW4gdGhlIHJlZmxlY3Rpb24gdHlwZSBpcyBhIGN1YmUsIHRoZXJlIHdpbGwgYmUgbXVsdGlwbGUgcmVmbFxuICAgIC8vICAgICAgICBzdGF0ZW1lbnRzIGZvciBlYWNoIHNpZGUgb2YgdGhlIGN1YmUuIElmIGl0J3MgYSBzcGhlcmljYWxcbiAgICAvLyAgICAgICAgcmVmbGVjdGlvbiwgdGhlcmUgc2hvdWxkIG9ubHkgZXZlciBiZSBvbmUuXG4gICAgdGhpcy5tYXBSZWZsZWN0aW9ucyA9IFtdO1xuICB9XG59XG5cbi8qKlxuICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvV2F2ZWZyb250Xy5vYmpfZmlsZVxuICogaHR0cDovL3BhdWxib3Vya2UubmV0L2RhdGFmb3JtYXRzL210bC9cbiAqL1xuZXhwb3J0IGNsYXNzIE1hdGVyaWFsTGlicmFyeSB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIHRoZSBNYXRlcmlhbCBQYXJzZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG10bERhdGEgdGhlIE1UTCBmaWxlIGNvbnRlbnRzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtdGxEYXRhKSB7XG4gICAgdGhpcy5kYXRhID0gbXRsRGF0YTtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbCA9IG51bGw7XG4gICAgdGhpcy5tYXRlcmlhbHMgPSB7fTtcblxuICAgIHRoaXMucGFyc2UoKTtcbiAgfVxuXG4gIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuICAvKiB0aGUgZnVuY3Rpb24gbmFtZXMgaGVyZSBkaXNvYmV5IGNhbWVsQ2FzZSBjb252ZW50aW9uc1xuICAgICB0byBtYWtlIHBhcnNpbmcvcm91dGluZyBlYXNpZXIuIHNlZSB0aGUgcGFyc2UgZnVuY3Rpb25cbiAgICAgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbi4gKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBNYXRlcmlhbCBvYmplY3QgYW5kIGFkZHMgdG8gdGhlIHJlZ2lzdHJ5LlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgKi9cbiAgcGFyc2VfbmV3bXRsKHRva2Vucykge1xuICAgIGxldCBuYW1lID0gdG9rZW5zWzBdO1xuICAgIC8vIGNvbnNvbGUuaW5mbygnUGFyc2luZyBuZXcgTWF0ZXJpYWw6JywgbmFtZSk7XG5cbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChuYW1lKTtcbiAgICB0aGlzLm1hdGVyaWFsc1tuYW1lXSA9IHRoaXMuY3VycmVudE1hdGVyaWFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlZSB0aGUgZG9jdW1lbmF0aW9uIGZvciBwYXJzZV9LYSBiZWxvdyBmb3IgYSBiZXR0ZXIgdW5kZXJzdGFuZGluZy5cbiAgICpcbiAgICogR2l2ZW4gYSBsaXN0IG9mIHBvc3NpYmxlIGNvbG9yIHRva2VucywgcmV0dXJucyBhbiBhcnJheSBvZiBSLCBHLCBhbmQgQlxuICAgKiBjb2xvciB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAqIEByZXR1cm4geyp9IGEgMyBlbGVtZW50IGFycmF5IGNvbnRhaW5pbmcgdGhlIFIsIEcsIGFuZCBCIHZhbHVlc1xuICAgKiBvZiB0aGUgY29sb3IuXG4gICAqL1xuICBwYXJzZUNvbG9yKHRva2Vucykge1xuICAgIGlmICh0b2tlbnNbMF0gPT0gJ3NwZWN0cmFsJykge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ1RoZSBNVEwgcGFyc2VyIGRvZXMgbm90IHN1cHBvcnQgc3BlY3RyYWwgY3VydmUgZmlsZXMuIFlvdSB3aWxsICcgK1xuICAgICAgICAnbmVlZCB0byBjb252ZXJ0IHRoZSBNVEwgY29sb3JzIHRvIGVpdGhlciBSR0Igb3IgQ0lFWFlaLidcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRva2Vuc1swXSA9PSAneHl6Jykge1xuICAgICAgY29uc29sZS53YXJuKCdUT0RPOiBjb252ZXJ0IFhZWiB0byBSR0InKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBmcm9tIG15IHVuZGVyc3RhbmRpbmcgb2YgdGhlIHNwZWMsIFJHQiB2YWx1ZXMgYXQgdGhpcyBwb2ludFxuICAgIC8vIHdpbGwgZWl0aGVyIGJlIDMgZmxvYXRzIG9yIGV4YWN0bHkgMSBmbG9hdCwgc28gdGhhdCdzIHRoZSBjaGVja1xuICAgIC8vIHRoYXQgaSdtIGdvaW5nIHRvIHBlcmZvcm0gaGVyZVxuICAgIGlmICh0b2tlbnMubGVuZ3RoID09IDMpIHtcbiAgICAgIHJldHVybiB0b2tlbnMubWFwKHBhcnNlRmxvYXQpO1xuICAgIH1cblxuICAgIC8vIFNpbmNlIHRva2VucyBhdCB0aGlzIHBvaW50IGhhcyBhIGxlbmd0aCBvZiAzLCB3ZSdyZSBnb2luZyB0byBhc3N1bWVcbiAgICAvLyBpdCdzIGV4YWN0bHkgMSwgc2tpcHBpbmcgdGhlIGNoZWNrIGZvciAyLlxuICAgIGxldCB2YWx1ZSA9IHBhcnNlRmxvYXQodG9rZW5zWzBdKTtcbiAgICAvLyBpbiB0aGlzIGNhc2UsIGFsbCB2YWx1ZXMgYXJlIGVxdWl2YWxlbnRcbiAgICByZXR1cm4gW3ZhbHVlLCB2YWx1ZSwgdmFsdWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHRoZSBhbWJpZW50IHJlZmxlY3Rpdml0eVxuICAgKlxuICAgKiBBIEthIGRpcmVjdGl2ZSBjYW4gdGFrZSBvbmUgb2YgdGhyZWUgZm9ybXM6XG4gICAqICAgLSBLYSByIGcgYlxuICAgKiAgIC0gS2Egc3BlY3RyYWwgZmlsZS5yZmxcbiAgICogICAtIEthIHh5eiB4IHkgelxuICAgKiBUaGVzZSB0aHJlZSBmb3JtcyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlIGluIHRoYXQgb25seSBvbmVcbiAgICogZGVjbGFyYXRpb24gY2FuIGV4aXN0IHBlciBtYXRlcmlhbC4gSXQgaXMgY29uc2lkZXJlZCBhIHN5bnRheFxuICAgKiBlcnJvciBvdGhlcndpc2UuXG4gICAqXG4gICAqIFRoZSBcIkthXCIgZm9ybSBzcGVjaWZpZXMgdGhlIGFtYmllbnQgcmVmbGVjdGl2aXR5IHVzaW5nIFJHQiB2YWx1ZXMuXG4gICAqIFRoZSBcImdcIiBhbmQgXCJiXCIgdmFsdWVzIGFyZSBvcHRpb25hbC4gSWYgb25seSB0aGUgXCJyXCIgdmFsdWUgaXNcbiAgICogc3BlY2lmaWVkLCB0aGVuIHRoZSBcImdcIiBhbmQgXCJiXCIgdmFsdWVzIGFyZSBhc3NpZ25lZCB0aGUgdmFsdWUgb2ZcbiAgICogXCJyXCIuIFZhbHVlcyBhcmUgbm9ybWFsbHkgaW4gdGhlIHJhbmdlIDAuMCB0byAxLjAuIFZhbHVlcyBvdXRzaWRlXG4gICAqIG9mIHRoaXMgcmFuZ2UgaW5jcmVhc2Ugb3IgZGVjcmVhc2UgdGhlIHJlZmxlY3Rpdml0eSBhY2NvcmRpbmdseS5cbiAgICpcbiAgICogVGhlIFwiS2Egc3BlY3RyYWxcIiBmb3JtIHNwZWNpZmllcyB0aGUgYW1iaWVudCByZWZsZWN0aXZpdHkgdXNpbmcgYVxuICAgKiBzcGVjdHJhbCBjdXJ2ZS4gXCJmaWxlLnJmbFwiIGlzIHRoZSBuYW1lIG9mIHRoZSBcIi5yZmxcIiBmaWxlIGNvbnRhaW5pbmdcbiAgICogdGhlIGN1cnZlIGRhdGEuIFwiZmFjdG9yXCIgaXMgYW4gb3B0aW9uYWwgYXJndW1lbnQgd2hpY2ggaXMgYSBtdWx0aXBsaWVyXG4gICAqIGZvciB0aGUgdmFsdWVzIGluIHRoZSAucmZsIGZpbGUgYW5kIGRlZmF1bHRzIHRvIDEuMCBpZiBub3Qgc3BlY2lmaWVkLlxuICAgKlxuICAgKiBUaGUgXCJLYSB4eXpcIiBmb3JtIHNwZWNpZmllcyB0aGUgYW1iaWVudCByZWZsZWN0aXZpdHkgdXNpbmcgQ0lFWFlaIHZhbHVlcy5cbiAgICogXCJ4IHkgelwiIGFyZSB0aGUgdmFsdWVzIG9mIHRoZSBDSUVYWVogY29sb3Igc3BhY2UuIFRoZSBcInlcIiBhbmQgXCJ6XCIgYXJndW1lbnRzXG4gICAqIGFyZSBvcHRpb25hbCBhbmQgdGFrZSBvbiB0aGUgdmFsdWUgb2YgdGhlIFwieFwiIGNvbXBvbmVudCBpZiBvbmx5IFwieFwiIGlzXG4gICAqIHNwZWNpZmllZC4gVGhlIFwieCB5IHpcIiB2YWx1ZXMgYXJlIG5vcm1hbGx5IGluIHRoZSByYW5nZSBvZiAwLjAgdG8gMS4wIGFuZFxuICAgKiBpbmNyZWFzZSBvciBkZWNyZWFzZSBhbWJpZW50IHJlZmxlY3Rpdml0eSBhY2NvcmRpbmdseSBvdXRzaWRlIG9mIHRoYXRcbiAgICogcmFuZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAqL1xuICBwYXJzZV9LYSh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5hbWJpZW50ID0gdGhpcy5wYXJzZUNvbG9yKHRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogRGlmZnVzZSBSZWZsZWN0aXZpdHlcbiAgICpcbiAgICogU2ltaWxhciB0byB0aGUgS2EgZGlyZWN0aXZlLiBTaW1wbHkgcmVwbGFjZSBcIkthXCIgd2l0aCBcIktkXCIgYW5kIHRoZSBydWxlc1xuICAgKiBhcmUgdGhlIHNhbWVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICovXG4gIHBhcnNlX0tkKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLmRpZmZ1c2UgPSB0aGlzLnBhcnNlQ29sb3IodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVjdHJhbCBSZWZsZWN0aXZpdHlcbiAgICpcbiAgICogU2ltaWxhciB0byB0aGUgS2EgZGlyZWN0aXZlLiBTaW1wbHkgcmVwbGFjZSBcIktzXCIgd2l0aCBcIktkXCIgYW5kIHRoZSBydWxlc1xuICAgKiBhcmUgdGhlIHNhbWVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICovXG4gIHBhcnNlX0tzKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLnNwZWN1bGFyID0gdGhpcy5wYXJzZUNvbG9yKHRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogRW1pc3NpdmVcbiAgICpcbiAgICogVGhlIGFtb3VudCBhbmQgY29sb3Igb2YgbGlnaHQgZW1pdHRlZCBieSB0aGUgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgKi9cbiAgcGFyc2VfS2UodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwuZW1pc3NpdmUgPSB0aGlzLnBhcnNlQ29sb3IodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc21pc3Npb24gRmlsdGVyXG4gICAqXG4gICAqIEFueSBsaWdodCBwYXNzaW5nIHRocm91Z2ggdGhlIG9iamVjdCBpcyBmaWx0ZXJlZCBieSB0aGUgdHJhbnNtaXNzaW9uXG4gICAqIGZpbHRlciwgd2hpY2ggb25seSBhbGxvd3Mgc3BlY2lmaWMgY29sb3JzIHRvIHBhc3MgdGhyb3VnaC4gRm9yIGV4YW1wbGUsIFRmXG4gICAqIDAgMSAwIGFsbG93cyBhbGwgb2YgdGhlIGdyZWVuIHRvIHBhc3MgdGhyb3VnaCBhbmQgZmlsdGVycyBvdXQgYWxsIG9mIHRoZVxuICAgKiByZWQgYW5kIGJsdWUuXG4gICAqXG4gICAqIFNpbWlsYXIgdG8gdGhlIEthIGRpcmVjdGl2ZS4gU2ltcGx5IHJlcGxhY2UgXCJLc1wiIHdpdGggXCJUZlwiIGFuZCB0aGUgcnVsZXNcbiAgICogYXJlIHRoZSBzYW1lXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAqL1xuICBwYXJzZV9UZih0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC50cmFuc21pc3Npb25GaWx0ZXIgPSB0aGlzLnBhcnNlQ29sb3IodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgdGhlIGRpc3NvbHZlIGZvciB0aGUgY3VycmVudCBtYXRlcmlhbC5cbiAgICpcbiAgICogU3RhdGVtZW50OiBkIFstaGFsb10gYGZhY3RvcmBcbiAgICpcbiAgICogRXhhbXBsZTogXCJkIDAuNVwiXG4gICAqXG4gICAqIFRoZSBmYWN0b3IgaXMgdGhlIGFtb3VudCB0aGlzIG1hdGVyaWFsIGRpc3NvbHZlcyBpbnRvIHRoZSBiYWNrZ3JvdW5kLiBBXG4gICAqIGZhY3RvciBvZiAxLjAgaXMgZnVsbHkgb3BhcXVlLiBUaGlzIGlzIHRoZSBkZWZhdWx0IHdoZW4gYSBuZXcgbWF0ZXJpYWwgaXNcbiAgICogY3JlYXRlZC4gQSBmYWN0b3Igb2YgMC4wIGlzIGZ1bGx5IGRpc3NvbHZlZCAoY29tcGxldGVseSB0cmFuc3BhcmVudCkuXG4gICAqXG4gICAqIFVubGlrZSBhIHJlYWwgdHJhbnNwYXJlbnQgbWF0ZXJpYWwsIHRoZSBkaXNzb2x2ZSBkb2VzIG5vdCBkZXBlbmQgdXBvblxuICAgKiBtYXRlcmlhbCB0aGlja25lc3Mgbm9yIGRvZXMgaXQgaGF2ZSBhbnkgc3BlY3RyYWwgY2hhcmFjdGVyLiBEaXNzb2x2ZSB3b3Jrc1xuICAgKiBvbiBhbGwgaWxsdW1pbmF0aW9uIG1vZGVscy5cbiAgICpcbiAgICogVGhlIGRpc3NvbHZlIHN0YXRlbWVudCBhbGxvd3MgZm9yIGFuIG9wdGlvbmFsIFwiLWhhbG9cIiBmbGFnIHdoaWNoIGluZGljYXRlc1xuICAgKiB0aGF0IGEgZGlzc29sdmUgaXMgZGVwZW5kZW50IG9uIHRoZSBzdXJmYWNlIG9yaWVudGF0aW9uIHJlbGF0aXZlIHRvIHRoZVxuICAgKiB2aWV3ZXIuIEZvciBleGFtcGxlLCBhIHNwaGVyZSB3aXRoIHRoZSBmb2xsb3dpbmcgZGlzc29sdmUsIFwiZCAtaGFsbyAwLjBcIixcbiAgICogd2lsbCBiZSBmdWxseSBkaXNzb2x2ZWQgYXQgaXRzIGNlbnRlciBhbmQgd2lsbCBhcHBlYXIgZ3JhZHVhbGx5IG1vcmUgb3BhcXVlXG4gICAqIHRvd2FyZCBpdHMgZWRnZS5cbiAgICpcbiAgICogXCJmYWN0b3JcIiBpcyB0aGUgbWluaW11bSBhbW91bnQgb2YgZGlzc29sdmUgYXBwbGllZCB0byB0aGUgbWF0ZXJpYWwuIFRoZVxuICAgKiBhbW91bnQgb2YgZGlzc29sdmUgd2lsbCB2YXJ5IGJldHdlZW4gMS4wIChmdWxseSBvcGFxdWUpIGFuZCB0aGUgc3BlY2lmaWVkXG4gICAqIFwiZmFjdG9yXCIuIFRoZSBmb3JtdWxhIGlzOlxuICAgKlxuICAgKiAgICBkaXNzb2x2ZSA9IDEuMCAtIChOKnYpKDEuMC1mYWN0b3IpXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAqL1xuICBwYXJzZV9kKHRva2Vucykge1xuICAgIC8vIHRoaXMgaWdub3JlcyB0aGUgLWhhbG8gb3B0aW9uIGFzIEkgY2FuJ3QgZmluZCBhbnkgZG9jdW1lbnRhdGlvbiBvbiB3aGF0XG4gICAgLy8gaXQncyBzdXBwb3NlZCB0byBiZS5cbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5kaXNzb2x2ZSA9IHBhcnNlRmxvYXQodG9rZW5zLnBvcCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgXCJpbGx1bVwiIHN0YXRlbWVudCBzcGVjaWZpZXMgdGhlIGlsbHVtaW5hdGlvbiBtb2RlbCB0byB1c2UgaW4gdGhlXG4gICAqIG1hdGVyaWFsLiBJbGx1bWluYXRpb24gbW9kZWxzIGFyZSBtYXRoZW1hdGljYWwgZXF1YXRpb25zIHRoYXQgcmVwcmVzZW50XG4gICAqIHZhcmlvdXMgbWF0ZXJpYWwgbGlnaHRpbmcgYW5kIHNoYWRpbmcgZWZmZWN0cy5cbiAgICpcbiAgICogVGhlIGlsbHVtaW5hdGlvbiBudW1iZXIgY2FuIGJlIGEgbnVtYmVyIGZyb20gMCB0byAxMC4gVGhlIGZvbGxvd2luZyBhcmVcbiAgICogdGhlIGxpc3Qgb2YgaWxsdW1pbmF0aW9uIGVudW1lcmF0aW9ucyBhbmQgdGhlaXIgc3VtbWFyaWVzOlxuICAgKiAwLiBDb2xvciBvbiBhbmQgQW1iaWVudCBvZmZcbiAgICogMS4gQ29sb3Igb24gYW5kIEFtYmllbnQgb25cbiAgICogMi4gSGlnaGxpZ2h0IG9uXG4gICAqIDMuIFJlZmxlY3Rpb24gb24gYW5kIFJheSB0cmFjZSBvblxuICAgKiA0LiBUcmFuc3BhcmVuY3k6IEdsYXNzIG9uLCBSZWZsZWN0aW9uOiBSYXkgdHJhY2Ugb25cbiAgICogNS4gUmVmbGVjdGlvbjogRnJlc25lbCBvbiBhbmQgUmF5IHRyYWNlIG9uXG4gICAqIDYuIFRyYW5zcGFyZW5jeTogUmVmcmFjdGlvbiBvbiwgUmVmbGVjdGlvbjogRnJlc25lbCBvZmYgYW5kIFJheSB0cmFjZSBvblxuICAgKiA3LiBUcmFuc3BhcmVuY3k6IFJlZnJhY3Rpb24gb24sIFJlZmxlY3Rpb246IEZyZXNuZWwgb24gYW5kIFJheSB0cmFjZSBvblxuICAgKiA4LiBSZWZsZWN0aW9uIG9uIGFuZCBSYXkgdHJhY2Ugb2ZmXG4gICAqIDkuIFRyYW5zcGFyZW5jeTogR2xhc3Mgb24sIFJlZmxlY3Rpb246IFJheSB0cmFjZSBvZmZcbiAgICogMTAuIENhc3RzIHNoYWRvd3Mgb250byBpbnZpc2libGUgc3VyZmFjZXNcbiAgICpcbiAgICogRXhhbXBsZTogXCJpbGx1bSAyXCIgdG8gc3BlY2lmeSB0aGUgXCJIaWdobGlnaHQgb25cIiBtb2RlbFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgKi9cbiAgcGFyc2VfaWxsdW0odG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwuaWxsdW1pbmF0aW9uID0gcGFyc2VJbnQodG9rZW5zWzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcHRpY2FsIERlbnNpdHkgKEFLQSBJbmRleCBvZiBSZWZyYWN0aW9uKVxuICAgKlxuICAgKiBTdGF0ZW1lbnQ6IE5pIGBpbmRleGBcbiAgICpcbiAgICogRXhhbXBsZTogTmkgMS4wXG4gICAqXG4gICAqIFNwZWNpZmllcyB0aGUgb3B0aWNhbCBkZW5zaXR5IGZvciB0aGUgc3VyZmFjZS4gYGluZGV4YCBpcyB0aGUgdmFsdWVcbiAgICogZm9yIHRoZSBvcHRpY2FsIGRlbnNpdHkuIFRoZSB2YWx1ZXMgY2FuIHJhbmdlIGZyb20gMC4wMDEgdG8gMTAuICBBIHZhbHVlIG9mXG4gICAqIDEuMCBtZWFucyB0aGF0IGxpZ2h0IGRvZXMgbm90IGJlbmQgYXMgaXQgcGFzc2VzIHRocm91Z2ggYW4gb2JqZWN0LlxuICAgKiBJbmNyZWFzaW5nIHRoZSBvcHRpY2FsX2RlbnNpdHkgaW5jcmVhc2VzIHRoZSBhbW91bnQgb2YgYmVuZGluZy4gR2xhc3MgaGFzXG4gICAqIGFuIGluZGV4IG9mIHJlZnJhY3Rpb24gb2YgYWJvdXQgMS41LiBWYWx1ZXMgb2YgbGVzcyB0aGFuIDEuMCBwcm9kdWNlXG4gICAqIGJpemFycmUgcmVzdWx0cyBhbmQgYXJlIG5vdCByZWNvbW1lbmRlZFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgKi9cbiAgcGFyc2VfTmkodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwucmVmcmFjdGlvbkluZGV4ID0gcGFyc2VGbG9hdCh0b2tlbnNbMF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB0aGUgc3BlY3VsYXIgZXhwb25lbnQgZm9yIHRoZSBjdXJyZW50IG1hdGVyaWFsLiBUaGlzIGRlZmluZXMgdGhlXG4gICAqIGZvY3VzIG9mIHRoZSBzcGVjdWxhciBoaWdobGlnaHQuXG4gICAqXG4gICAqIFN0YXRlbWVudDogTnMgYGV4cG9uZW50YFxuICAgKlxuICAgKiBFeGFtcGxlOiBcIk5zIDI1MFwiXG4gICAqXG4gICAqIGBleHBvbmVudGAgaXMgdGhlIHZhbHVlIGZvciB0aGUgc3BlY3VsYXIgZXhwb25lbnQuIEEgaGlnaCBleHBvbmVudCByZXN1bHRzXG4gICAqIGluIGEgdGlnaHQsIGNvbmNlbnRyYXRlZCBoaWdobGlnaHQuIE5zIFZhbHVlcyBub3JtYWxseSByYW5nZSBmcm9tIDAgdG9cbiAgICogMTAwMC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICovXG4gIHBhcnNlX05zKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLnNwZWN1bGFyRXhwb25lbnQgPSBwYXJzZUludCh0b2tlbnNbMF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB0aGUgc2hhcnBuZXNzIG9mIHRoZSByZWZsZWN0aW9ucyBmcm9tIHRoZSBsb2NhbCByZWZsZWN0aW9uIG1hcC5cbiAgICpcbiAgICogU3RhdGVtZW50OiBzaGFycG5lc3MgYHZhbHVlYFxuICAgKlxuICAgKiBFeGFtcGxlOiBcInNoYXJwbmVzcyAxMDBcIlxuICAgKlxuICAgKiBJZiBhIG1hdGVyaWFsIGRvZXMgbm90IGhhdmUgYSBsb2NhbCByZWZsZWN0aW9uIG1hcCBkZWZpbmVkIGluIGl0cyBtYXRlcmlhbFxuICAgKiBkZWZpbnRpb25zLCBzaGFycG5lc3Mgd2lsbCBhcHBseSB0byB0aGUgZ2xvYmFsIHJlZmxlY3Rpb24gbWFwIGRlZmluZWQgaW5cbiAgICogUHJlVmlldy5cbiAgICpcbiAgICogYHZhbHVlYCBjYW4gYmUgYSBudW1iZXIgZnJvbSAwIHRvIDEwMDAuIFRoZSBkZWZhdWx0IGlzIDYwLiBBIGhpZ2ggdmFsdWVcbiAgICogcmVzdWx0cyBpbiBhIGNsZWFyIHJlZmxlY3Rpb24gb2Ygb2JqZWN0cyBpbiB0aGUgcmVmbGVjdGlvbiBtYXAuXG4gICAqXG4gICAqIFRpcDogc2hhcnBuZXNzIHZhbHVlcyBncmVhdGVyIHRoYW4gMTAwIGludHJvZHVjZSBhbGlhc2luZyBlZmZlY3RzIGluXG4gICAqIGZsYXQgc3VyZmFjZXMgdGhhdCBhcmUgdmlld2VkIGF0IGEgc2hhcnAgYW5nbGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAqL1xuICBwYXJzZV9zaGFycG5lc3ModG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwuc2hhcnBuZXNzID0gcGFyc2VJbnQodG9rZW5zWzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC1jYyBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLWNjIGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2VfY2ModmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5jb2xvckNvcnJlY3Rpb24gPSB2YWx1ZXNbMF0gPT0gJ29uJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC1ibGVuZHUgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1ibGVuZHUgZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV9ibGVuZHUodmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5ob3Jpem9udGFsQmxlbmRpbmcgPSB2YWx1ZXNbMF0gPT0gJ29uJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC1ibGVuZHYgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1ibGVuZHYgZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV9ibGVuZHYodmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy52ZXJ0aWNhbEJsZW5kaW5nID0gdmFsdWVzWzBdID09ICdvbic7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSAtYm9vc3QgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1ib29zdCBmbGFnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICovXG4gIHBhcnNlX2Jvb3N0KHZhbHVlcywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMuYm9vc3RNaXBNYXBTaGFycG5lc3MgPSBwYXJzZUZsb2F0KHZhbHVlc1swXSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSAtbW0gZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1tbSBmbGFnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICovXG4gIHBhcnNlX21tKHZhbHVlcywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMubW9kaWZ5VGV4dHVyZU1hcC5icmlnaHRuZXNzID0gcGFyc2VGbG9hdCh2YWx1ZXNbMF0pO1xuICAgIG9wdGlvbnMubW9kaWZ5VGV4dHVyZU1hcC5jb250cmFzdCA9IHBhcnNlRmxvYXQodmFsdWVzWzFdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgYW5kIHNldHMgdGhlIC1vLCAtcywgYW5kIC10ICB1LCB2LCBhbmQgdyB2YWx1ZXNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtbywgLXMsIC10IGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbiB0aGUgT2JqZWN0IG9mIGVpdGhlciB0aGUgLW8sIC1zLCAtdCBvcHRpb25cbiAgICogQHBhcmFtIHtJbnRlZ2VyfSBkZWZhdWx0VmFsdWUgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2Vfb3N0KHZhbHVlcywgb3B0aW9uLCBkZWZhdWx0VmFsdWUpIHtcbiAgICB3aGlsZSAodmFsdWVzLmxlbmd0aCA8IDMpIHtcbiAgICAgIHZhbHVlcy5wdXNoKGRlZmF1bHRWYWx1ZSk7XG4gICAgfVxuXG4gICAgb3B0aW9uLnUgPSBwYXJzZUZsb2F0KHZhbHVlc1swXSk7XG4gICAgb3B0aW9uLnYgPSBwYXJzZUZsb2F0KHZhbHVlc1sxXSk7XG4gICAgb3B0aW9uLncgPSBwYXJzZUZsb2F0KHZhbHVlc1syXSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSAtbyBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLW8gZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV9vKHZhbHVlcywgb3B0aW9ucykge1xuICAgIHRoaXMucGFyc2Vfb3N0KHZhbHVlcywgb3B0aW9ucy5vZmZzZXQsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgLXMgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1zIGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2Vfcyh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnBhcnNlX29zdCh2YWx1ZXMsIG9wdGlvbnMuc2NhbGUsIDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgLXQgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC10IGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2VfdCh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnBhcnNlX29zdCh2YWx1ZXMsIG9wdGlvbnMudHVyYnVsZW5jZSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSAtdGV4cmVzIGZsYWcgYW5kIHVwZGF0ZXMgdGhlIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtdGV4cmVzIGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2VfdGV4cmVzKHZhbHVlcywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMudGV4dHVyZVJlc29sdXRpb24gPSBwYXJzZUZsb2F0KHZhbHVlc1swXSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSAtY2xhbXAgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1jbGFtcCBmbGFnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICovXG4gIHBhcnNlX2NsYW1wKHZhbHVlcywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMuY2xhbXAgPSB2YWx1ZXNbMF0gPT0gJ29uJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC1ibSBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLWJtIGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2VfYm0odmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5idW1wTXVsdGlwbGllciA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC1pbWZjaGFuIGZsYWcgYW5kIHVwZGF0ZXMgdGhlIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtaW1mY2hhbiBmbGFnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICovXG4gIHBhcnNlX2ltZmNoYW4odmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5pbWZDaGFuID0gdmFsdWVzWzBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgb25seSBleGlzdHMgZm9yIHJlbGVjdGlvbiBtYXBzIGFuZCBkZW5vdGVzIHRoZSB0eXBlIG9mIHJlZmxlY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLXR5cGUgZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV90eXBlKHZhbHVlcywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMucmVmbGVjdGlvblR5cGUgPSB2YWx1ZXNbMF07XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSB0ZXh0dXJlJ3Mgb3B0aW9ucyBhbmQgcmV0dXJucyBhbiBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSBpbmZvXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBhbGwgb2YgdGhlIG9wdGlvbiB0b2tlbnMgdG8gcGFzcyB0byB0aGUgdGV4dHVyZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9IGEgY29tcGxldGUgb2JqZWN0IG9mIG9iamVjdHMgdG8gYXBwbHkgdG8gdGhlIHRleHR1cmVcbiAgICovXG4gIHBhcnNlT3B0aW9ucyh0b2tlbnMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgIGNvbG9yQ29ycmVjdGlvbjogZmFsc2UsXG4gICAgICBob3Jpem9udGFsQmxlbmRpbmc6IHRydWUsXG4gICAgICB2ZXJ0aWNhbEJsZW5kaW5nOiB0cnVlLFxuICAgICAgYm9vc3RNaXBNYXBTaGFycG5lc3M6IDAsXG4gICAgICBtb2RpZnlUZXh0dXJlTWFwOiB7XG4gICAgICAgIGJyaWdodG5lc3M6IDAsXG4gICAgICAgIGNvbnRyYXN0OiAxLFxuICAgICAgfSxcbiAgICAgIG9mZnNldDoge3U6IDAsIHY6IDAsIHc6IDB9LFxuICAgICAgc2NhbGU6IHt1OiAxLCB2OiAxLCB3OiAxfSxcbiAgICAgIHR1cmJ1bGVuY2U6IHt1OiAwLCB2OiAwLCB3OiAwfSxcbiAgICAgIGNsYW1wOiBmYWxzZSxcbiAgICAgIHRleHR1cmVSZXNvbHV0aW9uOiBudWxsLFxuICAgICAgYnVtcE11bHRpcGxpZXI6IDEsXG4gICAgICBpbWZDaGFuOiBudWxsLFxuICAgIH07XG5cbiAgICBsZXQgb3B0aW9uO1xuICAgIGxldCB2YWx1ZXM7XG4gICAgbGV0IG9wdGlvbnNUb1ZhbHVlcyA9IHt9O1xuXG4gICAgdG9rZW5zLnJldmVyc2UoKTtcblxuICAgIHdoaWxlICh0b2tlbnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IHRva2Vucy5wb3AoKTtcblxuICAgICAgaWYgKHRva2VuLnN0YXJ0c1dpdGgoJy0nKSkge1xuICAgICAgICBvcHRpb24gPSB0b2tlbi5zdWJzdHIoMSk7XG4gICAgICAgIG9wdGlvbnNUb1ZhbHVlc1tvcHRpb25dID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zVG9WYWx1ZXNbb3B0aW9uXS5wdXNoKHRva2VuKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKG9wdGlvbiBpbiBvcHRpb25zVG9WYWx1ZXMpIHtcbiAgICAgIGlmICghb3B0aW9uc1RvVmFsdWVzLmhhc093blByb3BlcnR5KG9wdGlvbikpe1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhbHVlcyA9IG9wdGlvbnNUb1ZhbHVlc1tvcHRpb25dO1xuICAgICAgbGV0IG9wdGlvbk1ldGhvZCA9IHRoaXNbYHBhcnNlXyR7b3B0aW9ufWBdO1xuICAgICAgaWYgKG9wdGlvbk1ldGhvZCkge1xuICAgICAgICBvcHRpb25NZXRob2QuYmluZCh0aGlzKSh2YWx1ZXMsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgZ2l2ZW4gdGV4dHVyZSBtYXAgbGluZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGFsbCBvZiB0aGUgdG9rZW5zIHJlcHJlc2VudGluZyB0aGUgdGV4dHVyZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9IGEgY29tcGxldGUgb2JqZWN0IG9mIG9iamVjdHMgdG8gYXBwbHkgdG8gdGhlIHRleHR1cmVcbiAgICovXG4gIHBhcnNlTWFwKHRva2Vucykge1xuICAgIC8vIGFjY29yZGluZyB0byB3aWtpcGVkaWE6XG4gICAgLy8gKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1dhdmVmcm9udF8ub2JqX2ZpbGUjVmVuZG9yX3NwZWNpZmljX2FsdGVyYXRpb25zKVxuICAgIC8vIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSB2ZW5kb3IgdGhhdCBwbGFjZXMgdGhlIGZpbGVuYW1lIGJlZm9yZSB0aGUgb3B0aW9uc1xuICAgIC8vIHJhdGhlciB0aGFuIGFmdGVyICh3aGljaCBpcyB0byBzcGVjKS4gQWxsIG9wdGlvbnMgc3RhcnQgd2l0aCBhICctJ1xuICAgIC8vIHNvIGlmIHRoZSBmaXJzdCB0b2tlbiBkb2Vzbid0IHN0YXJ0IHdpdGggYSAnLScsIHdlJ3JlIGdvaW5nIHRvIGFzc3VtZVxuICAgIC8vIGl0J3MgdGhlIG5hbWUgb2YgdGhlIG1hcCBmaWxlLlxuICAgIGxldCBmaWxlbmFtZTtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBpZiAoIXRva2Vuc1swXS5zdGFydHNXaXRoKCctJykpIHtcbiAgICAgIFtmaWxlbmFtZSwgLi4ub3B0aW9uc10gPSB0b2tlbnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbGVuYW1lID0gdG9rZW5zLnBvcCgpO1xuICAgICAgb3B0aW9ucyA9IHRva2VucztcbiAgICB9XG5cbiAgICBvcHRpb25zID0gdGhpcy5wYXJzZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgb3B0aW9uc1snZmlsZW5hbWUnXSA9IGZpbGVuYW1lO1xuICAgIHJldHVybiBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgYW1iaWVudCBtYXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIG1hcF9LYSBkaXJlY2l2ZVxuICAgKi9cbiAgcGFyc2VfbWFwX0thKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLm1hcEFtYmllbnQgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSBkaWZmdXNlIG1hcC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGUgbWFwX0tkIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9tYXBfS2QodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwRGlmZnVzZSA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIHNwZWN1bGFyIG1hcC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGUgbWFwX0tzIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9tYXBfS3ModG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwU3BlY3VsYXIgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSBlbWlzc2l2ZSBtYXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIG1hcF9LZSBkaXJlY2l2ZVxuICAgKi9cbiAgcGFyc2VfbWFwX0tlKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLm1hcEVtaXNzaXZlID0gdGhpcy5wYXJzZU1hcCh0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgc3BlY3VsYXIgZXhwb25lbnQgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfTnMgZGlyZWNpdmVcbiAgICovXG4gIHBhcnNlX21hcF9Ocyh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBTcGVjdWxhckV4cG9uZW50ID0gdGhpcy5wYXJzZU1hcCh0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgZGlzc29sdmUgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfZCBkaXJlY2l2ZVxuICAgKi9cbiAgcGFyc2VfbWFwX2QodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwRGlzc29sdmUgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSBhbnRpLWFsaWFzaW5nIG9wdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGUgbWFwX2FhdCBkaXJlY2l2ZVxuICAgKi9cbiAgcGFyc2VfbWFwX2FhdCh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5hbnRpQWxpYXNpbmcgPSB0b2tlbnNbMF0gPT0gJ29uJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGJ1bXAgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfYnVtcCBkaXJlY2l2ZVxuICAgKi9cbiAgcGFyc2VfbWFwX2J1bXAodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwQnVtcCA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGJ1bXAgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBidW1wIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9idW1wKHRva2Vucykge1xuICAgIHRoaXMucGFyc2VfbWFwX2J1bXAodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGRpc3AgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBkaXNwIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9kaXNwKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLm1hcERpc3BsYWNlbWVudCA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGRlY2FsIG1hcC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGUgbWFwX2RlY2FsIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9kZWNhbCh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBEZWNhbCA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIHJlZmwgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSByZWZsIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9yZWZsKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLm1hcFJlZmxlY3Rpb25zLnB1c2godGhpcy5wYXJzZU1hcCh0b2tlbnMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIE1UTCBmaWxlLlxuICAgKiBcbiAgICogSXRlcmF0ZXMgbGluZSBieSBsaW5lIHBhcnNpbmcgZWFjaCBNVEwgZGlyZWN0aXZlLlxuICAgKiBcbiAgICogVGhpcyBmdW5jdGlvbiBleHBlY3RzIHRoZSBmaXJzdCB0b2tlbiBpbiB0aGUgbGluZVxuICAgKiB0byBiZSBhIHZhbGlkIE1UTCBkaXJlY3RpdmUuIFRoYXQgdG9rZW4gaXMgdGhlbiB1c2VkXG4gICAqIHRvIHRyeSBhbmQgcnVuIGEgbWV0aG9kIG9uIHRoaXMgY2xhc3MuIHBhcnNlX1tkaXJlY3RpdmVdXG4gICAqIEUuZy4sIHRoZSBgbmV3bXRsYCBkaXJlY3RpdmUgd291bGQgdHJ5IHRvIGNhbGwgdGhlIG1ldGhvZFxuICAgKiBwYXJzZV9uZXdtdGwuIEVhY2ggcGFyc2luZyBmdW5jdGlvbiB0YWtlcyBpbiB0aGUgcmVtYWluaW5nXG4gICAqIGxpc3Qgb2YgdG9rZW5zIGFuZCB1cGRhdGVzIHRoZSBjdXJyZW50TWF0ZXJpYWwgY2xhc3Mgd2l0aFxuICAgKiB0aGUgYXR0cmlidXRlcyBwcm92aWRlZC5cbiAgICovXG4gIHBhcnNlKCkge1xuICAgIGxldCBsaW5lcyA9IHRoaXMuZGF0YS5zcGxpdCgvXFxyP1xcbi8pO1xuICAgIGZvciAobGV0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIGxpbmUgPSBsaW5lLnRyaW0oKTtcbiAgICAgIGlmICghbGluZSB8fCBsaW5lLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IHRva2VucyA9IGxpbmUuc3BsaXQoL1xccy8pO1xuICAgICAgbGV0IGRpcmVjdGl2ZTtcbiAgICAgIFtkaXJlY3RpdmUsIC4uLnRva2Vuc10gPSB0b2tlbnM7XG5cbiAgICAgIGxldCBwYXJzZU1ldGhvZCA9IHRoaXNbYHBhcnNlXyR7ZGlyZWN0aXZlfWBdO1xuXG4gICAgICBpZiAoIXBhcnNlTWV0aG9kKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgdGhlIGRpcmVjdGl2ZTogXCIke2RpcmVjdGl2ZX1cImApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gY29uc29sZS5sb2coYFBhcnNpbmcgXCIke2RpcmVjdGl2ZX1cIiB3aXRoIHRva2VuczogJHt0b2tlbnN9YCk7XG4gICAgICBwYXJzZU1ldGhvZC5iaW5kKHRoaXMpKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLy8gc29tZSBjbGVhbnVwLiBUaGVzZSBkb24ndCBuZWVkIHRvIGJlIGV4cG9zZWQgYXMgcHVibGljIGRhdGEuXG4gICAgZGVsZXRlIHRoaXMuZGF0YTtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbCA9IG51bGw7XG4gIH1cblxuICAvKiBlc2xpbnQtZW5hYmxlIGNhbWVsY2FzZSovXG59O1xuXG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9tYXRlcmlhbC5qcyIsImltcG9ydCBNZXNoIGZyb20gJy4vbWVzaCc7XG5pbXBvcnQge01hdGVyaWFsLCBNYXRlcmlhbExpYnJhcnl9IGZyb20gJy4vbWF0ZXJpYWwnO1xuaW1wb3J0IHtMYXlvdXR9IGZyb20gJy4vbGF5b3V0JztcbmltcG9ydCB7ZG93bmxvYWRNb2RlbHMsIGRvd25sb2FkTWVzaGVzLFxuICAgICAgICBpbml0TWVzaEJ1ZmZlcnMsIGRlbGV0ZU1lc2hCdWZmZXJzfSBmcm9tICcuL3V0aWxzJztcblxuXG4vKipcbiAqIEBuYW1lc3BhY2VcbiAqL1xuZXhwb3J0IHtcbiAgICBNZXNoLFxuICAgIE1hdGVyaWFsLFxuICAgIE1hdGVyaWFsTGlicmFyeSxcbiAgICBMYXlvdXQsXG5cbiAgICBkb3dubG9hZE1vZGVscyxcbiAgICBkb3dubG9hZE1lc2hlcyxcbiAgICBpbml0TWVzaEJ1ZmZlcnMsXG4gICAgZGVsZXRlTWVzaEJ1ZmZlcnNcblxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC5qcyIsIlxuaW1wb3J0IE1lc2ggZnJvbSAnLi9tZXNoJztcbmltcG9ydCB7TWF0ZXJpYWwsIE1hdGVyaWFsTGlicmFyeX0gZnJvbSAnLi9tYXRlcmlhbCc7XG5pbXBvcnQge0xheW91dH0gZnJvbSAnLi9sYXlvdXQnO1xuXG5cbmZ1bmN0aW9uIGRvd25sb2FkTXRsVGV4dHVyZXMgKG10bCwgcm9vdCkge1xuICBjb25zdCBtYXBBdHRyaWJ1dGVzID0gW1xuICAgICdtYXBEaWZmdXNlJyxcbiAgICAnbWFwQW1iaWVudCcsXG4gICAgJ21hcFNwZWN1bGFyJyxcbiAgICAnbWFwRGlzc29sdmUnLFxuICAgICdtYXBCdW1wJyxcbiAgICAnbWFwRGlzcGxhY2VtZW50JyxcbiAgICAnbWFwRGVjYWwnLFxuICAgICdtYXBFbWlzc2l2ZScsXG4gIF07XG4gIGlmICghcm9vdC5lbmRzV2l0aCgnLycpKSB7XG4gICAgcm9vdCArPSAnLyc7XG4gIH1cbiAgbGV0IHRleHR1cmVzID0gW107XG5cbiAgZm9yIChsZXQgbWF0ZXJpYWwgaW4gbXRsLm1hdGVyaWFscykge1xuICAgIGlmICghbXRsLm1hdGVyaWFscy5oYXNPd25Qcm9wZXJ0eShtYXRlcmlhbCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBtYXRlcmlhbCA9IG10bC5tYXRlcmlhbHNbbWF0ZXJpYWxdO1xuXG4gICAgZm9yIChsZXQgYXR0ciBvZiBtYXBBdHRyaWJ1dGVzKSB7XG4gICAgICBsZXQgbWFwRGF0YSA9IG1hdGVyaWFsW2F0dHJdO1xuICAgICAgaWYgKCFtYXBEYXRhKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgdXJsID0gcm9vdCArIG1hcERhdGEuZmlsZW5hbWU7XG4gICAgICB0ZXh0dXJlcy5wdXNoKFxuICAgICAgICBmZXRjaCh1cmwpXG4gICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEpO1xuICAgICAgICAgICAgbWFwRGF0YS50ZXh0dXJlID0gaW1hZ2U7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGRvd25sb2FkIHRleHR1cmU6ICR7dXJsfWApO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFByb21pc2UuYWxsKHRleHR1cmVzKTtcbn1cblxuXG4vKipcbiAqIEFjY2VwdHMgYSBsaXN0IG9mIG1vZGVsIHJlcXVlc3Qgb2JqZWN0cyBhbmQgcmV0dXJucyBhIFByb21pc2UgdGhhdFxuICogcmVzb2x2ZXMgd2hlbiBhbGwgbW9kZWxzIGhhdmUgYmVlbiBkb3dubG9hZGVkIGFuZCBwYXJzZWQuXG4gKlxuICogVGhlIGxpc3Qgb2YgbW9kZWwgb2JqZWN0cyBmb2xsb3cgdGhpcyBpbnRlcmZhY2U6XG4gKiB7XG4gKiAgb2JqOiAncGF0aC90by9tb2RlbC5vYmonLFxuICogIG10bDogdHJ1ZSB8ICdwYXRoL3RvL21vZGVsLm10bCcsXG4gKiAgZG93bmxvYWRNdGxUZXh0dXJlczogdHJ1ZSB8IGZhbHNlXG4gKiAgbXRsVGV4dHVyZVJvb3Q6ICcvbW9kZWxzL3N1emFubmUvbWFwcydcbiAqICBuYW1lOiAnc3V6YW5uZSdcbiAqIH1cbiAqXG4gKiBUaGUgYG9iamAgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGFuZCBzaG91bGQgYmUgdGhlIHBhdGggdG8gdGhlXG4gKiBtb2RlbCdzIC5vYmogZmlsZSByZWxhdGl2ZSB0byB0aGUgY3VycmVudCByZXBvIChhYnNvbHV0ZSBVUkxzIGFyZVxuICogc3VnZ2VzdGVkKS5cbiAqXG4gKiBUaGUgYG10bGAgYXR0cmlidXRlIGlzIG9wdGlvbmFsIGFuZCBjYW4gZWl0aGVyIGJlIGEgYm9vbGVhbiBvclxuICogYSBwYXRoIHRvIHRoZSBtb2RlbCdzIC5tdGwgZmlsZSByZWxhdGl2ZSB0byB0aGUgY3VycmVudCBVUkwuIElmXG4gKiB0aGUgdmFsdWUgaXMgYHRydWVgLCB0aGVuIHRoZSBwYXRoIGFuZCBiYXNlbmFtZSBnaXZlbiBmb3IgdGhlIGBvYmpgXG4gKiBhdHRyaWJ1dGUgaXMgdXNlZCByZXBsYWNpbmcgdGhlIC5vYmogc3VmZml4IGZvciAubXRsXG4gKiBFLmcuOiB7b2JqOiAnbW9kZWxzL2Zvby5vYmonLCBtdGw6IHRydWV9IHdvdWxkIHNlYXJjaCBmb3IgJ21vZGVscy9mb28ubXRsJ1xuICpcbiAqIFRoZSBgbmFtZWAgYXR0cmlidXRlIGlzIG9wdGlvbmFsIGFuZCBpcyBhIGh1bWFuIGZyaWVuZGx5IG5hbWUgdG8gYmVcbiAqIGluY2x1ZGVkIHdpdGggdGhlIHBhcnNlZCBPQkogYW5kIE1UTCBmaWxlcy4gSWYgbm90IGdpdmVuLCB0aGUgYmFzZSAub2JqXG4gKiBmaWxlbmFtZSB3aWxsIGJlIHVzZWQuXG4gKlxuICogVGhlIGBkb3dubG9hZE10bFRleHR1cmVzYCBhdHRyaWJ1dGUgaXMgYSBmbGFnIGZvciBhdXRvbWF0aWNhbGx5IGRvd25sb2FkaW5nXG4gKiBhbnkgaW1hZ2VzIGZvdW5kIGluIHRoZSBNVEwgZmlsZSBhbmQgYXR0YWNoaW5nIHRoZW0gdG8gZWFjaCBNYXRlcmlhbFxuICogY3JlYXRlZCBmcm9tIHRoYXQgZmlsZS4gRm9yIGV4YW1wbGUsIGlmIG1hdGVyaWFsLm1hcERpZmZ1c2UgaXMgc2V0ICh0aGVyZVxuICogd2FzIGRhdGEgaW4gdGhlIE1UTCBmaWxlKSwgdGhlbiBtYXRlcmlhbC5tYXBEaWZmdXNlLnRleHR1cmUgd2lsbCBjb250YWluXG4gKiB0aGUgZG93bmxvYWRlZCBpbWFnZS4gVGhpcyBvcHRpb24gZGVmYXVsdHMgdG8gYHRydWVgLiBCeSBkZWZhdWx0LCB0aGUgTVRMJ3NcbiAqIFVSTCB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBsb2NhdGlvbiBvZiB0aGUgaW1hZ2VzLlxuICpcbiAqIFRoZSBgbXRsVGV4dHVyZVJvb3RgIGF0dHJpYnV0ZSBpcyBvcHRpb25hbCBhbmQgc2hvdWxkIHBvaW50IHRvIHRoZSBsb2NhdGlvblxuICogb24gdGhlIHNlcnZlciB0aGF0IHRoaXMgTVRMJ3MgdGV4dHVyZSBmaWxlcyBhcmUgbG9jYXRlZC4gVGhlIGRlZmF1bHQgaXMgdG9cbiAqIHVzZSB0aGUgTVRMIGZpbGUncyBsb2NhdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gdGhlIHJlc3VsdCBvZiBkb3dubG9hZGluZyB0aGUgZ2l2ZW4gbGlzdCBvZiBtb2RlbHMuIFRoZVxuICogcHJvbWlzZSB3aWxsIHJlc29sdmUgd2l0aCBhbiBvYmplY3Qgd2hvc2Uga2V5cyBhcmUgdGhlIG5hbWVzIG9mIHRoZSBtb2RlbHNcbiAqIGFuZCB0aGUgdmFsdWUgaXMgaXRzIE1lc2ggb2JqZWN0LiBFYWNoIE1lc2ggb2JqZWN0IHdpbGwgYXV0b21hdGljYWxseVxuICogaGF2ZSBpdHMgYWRkTWF0ZXJpYWxMaWJyYXJ5KCkgbWV0aG9kIGNhbGxlZCB0byBzZXQgdGhlIGdpdmVuIE1UTCBkYXRhIChpZiBnaXZlbikuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZE1vZGVscyAobW9kZWxzKSB7XG4gIGNvbnN0IGZpbmlzaGVkID0gW107XG5cbiAgZm9yIChjb25zdCBtb2RlbCBvZiBtb2RlbHMpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBbXTtcblxuICAgIGlmICghbW9kZWwub2JqKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdcIm9ialwiIGF0dHJpYnV0ZSBvZiBtb2RlbCBvYmplY3Qgbm90IHNldC4gVGhlIC5vYmogZmlsZSBpcyByZXF1aXJlZCB0byBiZSBzZXQgJyArXG4gICAgICAgICdpbiBvcmRlciB0byB1c2UgZG93bmxvYWRNb2RlbHMoKSdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IG9wdGlvbnMgPSB7fTtcbiAgICBvcHRpb25zLmluZGljZXNQZXJNYXRlcmlhbCA9ICEhbW9kZWwuaW5kaWNlc1Blck1hdGVyaWFsOyAgICBcbiAgICBvcHRpb25zLmNhbGNUYW5nZW50c0FuZEJpdGFuZ2VudHMgPSAhIW1vZGVsLmNhbGNUYW5nZW50c0FuZEJpdGFuZ2VudHM7XG5cbiAgICAvLyBpZiB0aGUgbmFtZSBpcyBub3QgcHJvdmlkZWQsIGRlcnZpdmUgaXQgZnJvbSB0aGUgZ2l2ZW4gT0JKXG4gICAgbGV0IG5hbWUgPSBtb2RlbC5uYW1lO1xuICAgIGlmICghbmFtZSkge1xuICAgICAgbGV0IHBhcnRzID0gbW9kZWwub2JqLnNwbGl0KCcvJyk7XG4gICAgICBuYW1lID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV0ucmVwbGFjZSgnLm9iaicsICcnKTtcbiAgICB9XG4gICAgcGFyc2VkLnB1c2goUHJvbWlzZS5yZXNvbHZlKG5hbWUpKVxuXG4gICAgcGFyc2VkLnB1c2goXG4gICAgICBmZXRjaChtb2RlbC5vYmopXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIHJldHVybiBuZXcgTWVzaChkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgLy8gRG93bmxvYWQgTWF0ZXJpYWxMaWJyYXJ5IGZpbGU/XG4gICAgaWYgKG1vZGVsLm10bCkge1xuICAgICAgbGV0IG10bCA9IG1vZGVsLm10bDtcbiAgICAgIGlmICh0eXBlb2YgbXRsID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgbXRsID0gbW9kZWwub2JqLnJlcGxhY2UoL1xcLm9iaiQvLCAnLm10bCcpO1xuICAgICAgfVxuXG4gICAgICBwYXJzZWQucHVzaChcbiAgICAgICAgZmV0Y2gobXRsKVxuICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBsZXQgbWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWxMaWJyYXJ5KGRhdGEpO1xuICAgICAgICAgICAgaWYgKG1vZGVsLmRvd25sb2FkTXRsVGV4dHVyZXMgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGxldCByb290ID0gbW9kZWwubXRsVGV4dHVyZVJvb3Q7XG4gICAgICAgICAgICAgIGlmICghcm9vdCkge1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgZGlyZWN0b3J5IG9mIHRoZSBNVEwgZmlsZSBhcyBkZWZhdWx0XG4gICAgICAgICAgICAgICAgcm9vdCA9IG10bC5zdWJzdHIoMCwgbXRsLmxhc3RJbmRleE9mKFwiL1wiKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gZG93bmxvYWRNdGxUZXh0dXJlcyByZXR1cm5zIGEgUHJvbWlzZSB0aGF0XG4gICAgICAgICAgICAgIC8vIGlzIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSBpbWFnZXMgaXRcbiAgICAgICAgICAgICAgLy8gY29udGFpbnMgYXJlIGRvd25sb2FkZWQuIFRoZXNlIGFyZSB0aGVuXG4gICAgICAgICAgICAgIC8vIGF0dGFjaGVkIHRvIHRoZSBtYXAgZGF0YSBvYmplY3RzXG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG1hdGVyaWFsKSxcbiAgICAgICAgICAgICAgICBkb3dubG9hZE10bFRleHR1cmVzKG1hdGVyaWFsLCByb290KVxuICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChQcm9taXNlLnJlc29sdmUobWF0ZXJpYWwpKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlWzBdO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIGZpbmlzaGVkLnB1c2goUHJvbWlzZS5hbGwocGFyc2VkKSk7XG4gIH1cblxuICByZXR1cm4gUHJvbWlzZS5hbGwoZmluaXNoZWQpXG4gICAgLnRoZW4oKG1zKSA9PiB7XG4gICAgICAvLyB0aGUgXCJmaW5pc2hlZFwiIHByb21pc2UgaXMgYSBsaXN0IG9mIG5hbWUsIE1lc2ggaW5zdGFuY2UsXG4gICAgICAvLyBhbmQgTWF0ZXJpYWxMaWJhcnkgaW5zdGFuY2UuIFRoaXMgdW5wYWNrcyBhbmQgcmV0dXJucyBhblxuICAgICAgLy8gb2JqZWN0IG1hcHBpbmcgbmFtZSB0byBNZXNoIChNZXNoIHBvaW50cyB0byBNVEwpLlxuICAgICAgY29uc3QgbW9kZWxzID0ge307XG5cbiAgICAgIGZvciAoY29uc3QgbW9kZWwgb2YgbXMpIHtcbiAgICAgICAgY29uc3QgW25hbWUsIG1lc2gsIG10bF0gPSBtb2RlbDtcbiAgICAgICAgbWVzaC5uYW1lID0gbmFtZTtcbiAgICAgICAgaWYgKG10bCkge1xuICAgICAgICAgIG1lc2guYWRkTWF0ZXJpYWxMaWJyYXJ5KG10bCk7XG4gICAgICAgIH1cbiAgICAgICAgbW9kZWxzW25hbWVdID0gbWVzaDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1vZGVscztcbiAgICB9KTtcbn1cblxuXG4vKipcbiAqIFRha2VzIGluIGFuIG9iamVjdCBvZiBgbWVzaF9uYW1lYCwgYCcvdXJsL3RvL09CSi9maWxlJ2AgcGFpcnMgYW5kIGEgY2FsbGJhY2tcbiAqIGZ1bmN0aW9uLiBFYWNoIE9CSiBmaWxlIHdpbGwgYmUgYWpheGVkIGluIGFuZCBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0b1xuICogYW4gT0JKLk1lc2guIFdoZW4gYWxsIGZpbGVzIGhhdmUgc3VjY2Vzc2Z1bGx5IGRvd25sb2FkZWQgdGhlIGNhbGxiYWNrXG4gKiBmdW5jdGlvbiBwcm92aWRlZCB3aWxsIGJlIGNhbGxlZCBhbmQgcGFzc2VkIGluIGFuIG9iamVjdCBjb250YWluaW5nXG4gKiB0aGUgbmV3bHkgY3JlYXRlZCBtZXNoZXMuXG4gKlxuICogKipOb3RlOioqIEluIG9yZGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIGFzIGEgd2F5IHRvIGRvd25sb2FkIG1lc2hlcywgYVxuICogd2Vic2VydmVyIG9mIHNvbWUgc29ydCBtdXN0IGJlIHVzZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5hbWVBbmRBdHRycyBhbiBvYmplY3Qgd2hlcmUgdGhlIGtleSBpcyB0aGUgbmFtZSBvZiB0aGUgbWVzaCBhbmQgdGhlIHZhbHVlIGlzIHRoZSB1cmwgdG8gdGhhdCBtZXNoJ3MgT0JKIGZpbGVcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wbGV0aW9uQ2FsbGJhY2sgc2hvdWxkIGNvbnRhaW4gYSBmdW5jdGlvbiB0aGF0IHdpbGwgdGFrZSBvbmUgcGFyYW1ldGVyOiBhbiBvYmplY3QgYXJyYXkgd2hlcmUgdGhlIGtleXMgd2lsbCBiZSB0aGUgdW5pcXVlIG9iamVjdCBuYW1lIGFuZCB0aGUgdmFsdWUgd2lsbCBiZSBhIE1lc2ggb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG1lc2hlcyBJbiBjYXNlIG90aGVyIG1lc2hlcyBhcmUgbG9hZGVkIHNlcGFyYXRlbHkgb3IgaWYgYSBwcmV2aW91c2x5IGRlY2xhcmVkIHZhcmlhYmxlIGlzIGRlc2lyZWQgdG8gYmUgdXNlZCwgcGFzcyBpbiBhIChwb3NzaWJseSBlbXB0eSkganNvbiBvYmplY3Qgb2YgdGhlIHBhdHRlcm46IHsgJzxtZXNoX25hbWU+JzogT0JKLk1lc2ggfVxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkTWVzaGVzIChuYW1lQW5kVVJMcywgY29tcGxldGlvbkNhbGxiYWNrLCBtZXNoZXMpIHtcbiAgaWYgKG1lc2hlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbWVzaGVzID0ge307XG4gIH1cblxuICBjb25zdCBjb21wbGV0ZWQgPSBbXTtcblxuICBmb3IgKGNvbnN0IG1lc2hfbmFtZSBpbiBuYW1lQW5kVVJMcykge1xuICAgIGlmICghbmFtZUFuZFVSTHMuaGFzT3duUHJvcGVydHkobWVzaF9uYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IG5hbWVBbmRVUkxzW21lc2hfbmFtZV07XG4gICAgY29tcGxldGVkLnB1c2goXG4gICAgICBmZXRjaCh1cmwpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIHJldHVybiBbbWVzaF9uYW1lLCBuZXcgTWVzaChkYXRhKV07XG4gICAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIFByb21pc2UuYWxsKGNvbXBsZXRlZClcbiAgICAudGhlbigobXMpID0+IHtcbiAgICAgIGZvciAobGV0IFtuYW1lLCBtZXNoXSBvZiBtcykge1xuICAgICAgICBtZXNoZXNbbmFtZV0gPSBtZXNoO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29tcGxldGlvbkNhbGxiYWNrKG1lc2hlcyk7XG4gICAgfSk7XG59XG5cbnZhciBfYnVpbGRCdWZmZXIgPSBmdW5jdGlvbiggZ2wsIHR5cGUsIGRhdGEsIGl0ZW1TaXplICl7XG4gIHZhciBidWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgdmFyIGFycmF5VmlldyA9IHR5cGUgPT09IGdsLkFSUkFZX0JVRkZFUiA/IEZsb2F0MzJBcnJheSA6IFVpbnQxNkFycmF5O1xuICBnbC5iaW5kQnVmZmVyKHR5cGUsIGJ1ZmZlcik7XG4gIGdsLmJ1ZmZlckRhdGEodHlwZSwgbmV3IGFycmF5VmlldyhkYXRhKSwgZ2wuU1RBVElDX0RSQVcpO1xuICBidWZmZXIuaXRlbVNpemUgPSBpdGVtU2l6ZTtcbiAgYnVmZmVyLm51bUl0ZW1zID0gZGF0YS5sZW5ndGggLyBpdGVtU2l6ZTtcbiAgcmV0dXJuIGJ1ZmZlcjtcbn07XG5cbi8qKlxuICogVGFrZXMgaW4gdGhlIFdlYkdMIGNvbnRleHQgYW5kIGEgTWVzaCwgdGhlbiBjcmVhdGVzIGFuZCBhcHBlbmRzIHRoZSBidWZmZXJzXG4gKiB0byB0aGUgbWVzaCBvYmplY3QgYXMgYXR0cmlidXRlcy5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIGBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKWAgY29udGV4dCBpbnN0YW5jZVxuICogQHBhcmFtIHtNZXNofSBtZXNoIGEgc2luZ2xlIGBPQkouTWVzaGAgaW5zdGFuY2VcbiAqXG4gKiBUaGUgbmV3bHkgY3JlYXRlZCBtZXNoIGF0dHJpYnV0ZXMgYXJlOlxuICpcbiAqIEF0dHJidXRlIHwgRGVzY3JpcHRpb25cbiAqIDotLS0gfCAtLS1cbiAqICoqbm9ybWFsQnVmZmVyKiogICAgICAgfGNvbnRhaW5zIHRoZSBtb2RlbCYjMzk7cyBWZXJ0ZXggTm9ybWFsc1xuICogbm9ybWFsQnVmZmVyLml0ZW1TaXplICB8c2V0IHRvIDMgaXRlbXNcbiAqIG5vcm1hbEJ1ZmZlci5udW1JdGVtcyAgfHRoZSB0b3RhbCBudW1iZXIgb2YgdmVydGV4IG5vcm1hbHNcbiAqIHxcbiAqICoqdGV4dHVyZUJ1ZmZlcioqICAgICAgfGNvbnRhaW5zIHRoZSBtb2RlbCYjMzk7cyBUZXh0dXJlIENvb3JkaW5hdGVzXG4gKiB0ZXh0dXJlQnVmZmVyLml0ZW1TaXplIHxzZXQgdG8gMiBpdGVtc1xuICogdGV4dHVyZUJ1ZmZlci5udW1JdGVtcyB8dGhlIG51bWJlciBvZiB0ZXh0dXJlIGNvb3JkaW5hdGVzXG4gKiB8XG4gKiAqKnZlcnRleEJ1ZmZlcioqICAgICAgIHxjb250YWlucyB0aGUgbW9kZWwmIzM5O3MgVmVydGV4IFBvc2l0aW9uIENvb3JkaW5hdGVzIChkb2VzIG5vdCBpbmNsdWRlIHcpXG4gKiB2ZXJ0ZXhCdWZmZXIuaXRlbVNpemUgIHxzZXQgdG8gMyBpdGVtc1xuICogdmVydGV4QnVmZmVyLm51bUl0ZW1zICB8dGhlIHRvdGFsIG51bWJlciBvZiB2ZXJ0aWNlc1xuICogfFxuICogKippbmRleEJ1ZmZlcioqICAgICAgICB8Y29udGFpbnMgdGhlIGluZGljZXMgb2YgdGhlIGZhY2VzXG4gKiBpbmRleEJ1ZmZlci5pdGVtU2l6ZSAgIHxpcyBzZXQgdG8gMVxuICogaW5kZXhCdWZmZXIubnVtSXRlbXMgICB8dGhlIHRvdGFsIG51bWJlciBvZiBpbmRpY2VzXG4gKlxuICogQSBzaW1wbGUgZXhhbXBsZSAoYSBsb3Qgb2Ygc3RlcHMgYXJlIG1pc3NpbmcsIHNvIGRvbid0IGNvcHkgYW5kIHBhc3RlKTpcbiAqXG4gKiAgICAgdmFyIGdsICAgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKSxcbiAqICAgICAgICAgbWVzaCA9IE9CSi5NZXNoKG9ial9maWxlX2RhdGEpO1xuICogICAgIC8vIGNvbXBpbGUgdGhlIHNoYWRlcnMgYW5kIGNyZWF0ZSBhIHNoYWRlciBwcm9ncmFtXG4gKiAgICAgdmFyIHNoYWRlclByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gKiAgICAgLy8gY29tcGlsYXRpb24gc3R1ZmYgaGVyZVxuICogICAgIC4uLlxuICogICAgIC8vIG1ha2Ugc3VyZSB5b3UgaGF2ZSB2ZXJ0ZXgsIHZlcnRleCBub3JtYWwsIGFuZCB0ZXh0dXJlIGNvb3JkaW5hdGVcbiAqICAgICAvLyBhdHRyaWJ1dGVzIGxvY2F0ZWQgaW4geW91ciBzaGFkZXJzIGFuZCBhdHRhY2ggdGhlbSB0byB0aGUgc2hhZGVyIHByb2dyYW1cbiAqICAgICBzaGFkZXJQcm9ncmFtLnZlcnRleFBvc2l0aW9uQXR0cmlidXRlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgXCJhVmVydGV4UG9zaXRpb25cIik7XG4gKiAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyUHJvZ3JhbS52ZXJ0ZXhQb3NpdGlvbkF0dHJpYnV0ZSk7XG4gKlxuICogICAgIHNoYWRlclByb2dyYW0udmVydGV4Tm9ybWFsQXR0cmlidXRlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgXCJhVmVydGV4Tm9ybWFsXCIpO1xuICogICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHNoYWRlclByb2dyYW0udmVydGV4Tm9ybWFsQXR0cmlidXRlKTtcbiAqXG4gKiAgICAgc2hhZGVyUHJvZ3JhbS50ZXh0dXJlQ29vcmRBdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCBcImFUZXh0dXJlQ29vcmRcIik7XG4gKiAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyUHJvZ3JhbS50ZXh0dXJlQ29vcmRBdHRyaWJ1dGUpO1xuICpcbiAqICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIHZlcnRleCwgdmVydGV4IG5vcm1hbCwgYW5kIHRleHR1cmUgY29vcmRpbmF0ZSBidWZmZXJzXG4gKiAgICAgLy8gYW5kIHNhdmUgb24gdG8gdGhlIG1lc2ggb2JqZWN0XG4gKiAgICAgT0JKLmluaXRNZXNoQnVmZmVycyhnbCwgbWVzaCk7XG4gKlxuICogICAgIC8vIG5vdyB0byByZW5kZXIgdGhlIG1lc2hcbiAqICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbWVzaC52ZXJ0ZXhCdWZmZXIpO1xuICogICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyUHJvZ3JhbS52ZXJ0ZXhQb3NpdGlvbkF0dHJpYnV0ZSwgbWVzaC52ZXJ0ZXhCdWZmZXIuaXRlbVNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gKiAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBtZXNoIGRvZXNuJ3QgY29udGFpblxuICogICAgIC8vIGFueSB0ZXh0dXJlIGNvb3JkaW5hdGVzIChlLmcuIHN1emFubmUub2JqIGluIHRoZSBkZXZlbG9wbWVudCBicmFuY2gpLlxuICogICAgIC8vIGluIHRoaXMgY2FzZSwgdGhlIHRleHR1cmUgdmVydGV4QXR0cmliQXJyYXkgd2lsbCBuZWVkIHRvIGJlIGRpc2FibGVkXG4gKiAgICAgLy8gYmVmb3JlIHRoZSBjYWxsIHRvIGRyYXdFbGVtZW50c1xuICogICAgIGlmKCFtZXNoLnRleHR1cmVzLmxlbmd0aCl7XG4gKiAgICAgICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyUHJvZ3JhbS50ZXh0dXJlQ29vcmRBdHRyaWJ1dGUpO1xuICogICAgIH1cbiAqICAgICBlbHNle1xuICogICAgICAgLy8gaWYgdGhlIHRleHR1cmUgdmVydGV4QXR0cmliQXJyYXkgaGFzIGJlZW4gcHJldmlvdXNseVxuICogICAgICAgLy8gZGlzYWJsZWQsIHRoZW4gaXQgbmVlZHMgdG8gYmUgcmUtZW5hYmxlZFxuICogICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyUHJvZ3JhbS50ZXh0dXJlQ29vcmRBdHRyaWJ1dGUpO1xuICogICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG1lc2gudGV4dHVyZUJ1ZmZlcik7XG4gKiAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlclByb2dyYW0udGV4dHVyZUNvb3JkQXR0cmlidXRlLCBtZXNoLnRleHR1cmVCdWZmZXIuaXRlbVNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gKiAgICAgfVxuICpcbiAqICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbWVzaC5ub3JtYWxCdWZmZXIpO1xuICogICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyUHJvZ3JhbS52ZXJ0ZXhOb3JtYWxBdHRyaWJ1dGUsIG1lc2gubm9ybWFsQnVmZmVyLml0ZW1TaXplLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICpcbiAqICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBtb2RlbC5tZXNoLmluZGV4QnVmZmVyKTtcbiAqICAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBtb2RlbC5tZXNoLmluZGV4QnVmZmVyLm51bUl0ZW1zLCBnbC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0TWVzaEJ1ZmZlcnMgKCBnbCwgbWVzaCApIHtcbiAgbWVzaC5ub3JtYWxCdWZmZXIgPSBfYnVpbGRCdWZmZXIoZ2wsIGdsLkFSUkFZX0JVRkZFUiwgbWVzaC52ZXJ0ZXhOb3JtYWxzLCAzKTtcbiAgbWVzaC50ZXh0dXJlQnVmZmVyID0gX2J1aWxkQnVmZmVyKGdsLCBnbC5BUlJBWV9CVUZGRVIsIG1lc2gudGV4dHVyZXMsIG1lc2gudGV4dHVyZVN0cmlkZSk7XG4gIG1lc2gudmVydGV4QnVmZmVyID0gX2J1aWxkQnVmZmVyKGdsLCBnbC5BUlJBWV9CVUZGRVIsIG1lc2gudmVydGljZXMsIDMpO1xuICBtZXNoLmluZGV4QnVmZmVyID0gX2J1aWxkQnVmZmVyKGdsLCBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbWVzaC5pbmRpY2VzLCAxKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVNZXNoQnVmZmVycyAoIGdsLCBtZXNoICkge1xuICBnbC5kZWxldGVCdWZmZXIobWVzaC5ub3JtYWxCdWZmZXIpO1xuICBnbC5kZWxldGVCdWZmZXIobWVzaC50ZXh0dXJlQnVmZmVyKTtcbiAgZ2wuZGVsZXRlQnVmZmVyKG1lc2gudmVydGV4QnVmZmVyKTtcbiAgZ2wuZGVsZXRlQnVmZmVyKG1lc2guaW5kZXhCdWZmZXIpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3V0aWxzLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==